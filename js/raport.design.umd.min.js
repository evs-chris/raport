!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("ractive"),require("raport/index")):"function"==typeof define&&define.amd?define(["exports","ractive","raport/index"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).Raport=t.Raport||{},t.Raport.Design={}),t.Ractive,t.Raport)}(this,(function(t,e,r){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(e);const i={v:4,t:[{t:7,e:"div",m:[{t:13,n:"class",f:"raport-report",g:1},{n:"trackfocus",t:71}],f:[{t:8,r:"left"}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"layout",g:1},{n:["keys"],t:70,a:{r:[],s:'["z",{ctrl:true}]'},f:{r:["@this"],s:"[_0.undo(),true]"}},{n:["keys"],t:70,a:{r:[],s:'["Z",{ctrl:true,shift:true}]'},f:{r:["@this"],s:"[_0.redo(),true]"}},{n:"class-pad-me",t:13,f:[{t:2,r:"~/show.pad"}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"design actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["report.type","report.sources.length"],s:'_0==="delimited"&&_1!==1'}}],t:13},{n:["click"],t:70,f:{r:["@this"],s:'[_0.run()&&_0.set("tab","result")]'}}],f:[{t:8,r:"play"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","design")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0!=="result"&&_0!=="context"&&_0!=="definition"&&_0!=="import"&&_0!=="project"'}}]}],f:["Designer"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","result")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="result"'}}]}],f:["Output"]}],n:50,r:"result"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","context")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="context"'}}]}],f:["Context"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","definition")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="definition"'}}]}],f:["Definition"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","import")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="import"'}}]}],f:["Import Data"]}],n:50,x:{r:["data","@this"],s:'_0&&_1.readLink("data")'}}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"which",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("import")]'}}],f:[{t:8,r:"times"}]}," Close Import"]}],n:50,x:{r:["data","tab"],s:'_0&&_1==="import"'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this","~/report.name","~/result","~/report.type"],s:'[_0.download((_1||"report")+(_3==="delimited"?".csv":".html"),_2,_3==="delimited"?"text/csv":"text/html")]'}},{n:"title",f:"Save output to a file",t:13,g:1}],f:["Save Output"]}],n:50,x:{r:["tab"],s:'_0==="result"'}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"right",g:1}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ico error",g:1},{n:"title",f:["There are unsaved changes to this project (",{t:2,r:"~/project.name"},")"],t:13}],f:[{t:8,r:"warning"}]}],n:50,r:"~/projectChanged"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","project")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="project"'}}]}],f:[{t:2,x:{r:["~/showProjects"],s:'_0?"Project":"Settings"'}}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab designer",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0!=="result"&&_0!=="context"&&_0!=="definition"&&_0!=="import"&&_0!=="project"'}}]}],f:[{t:8,r:"design"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab report-context",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="context"'}}]}],f:[{t:8,r:"context"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab report-definition",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="definition"'}}]}],f:[{t:8,r:"definition"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab data-import",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="import"'}}]}],f:[{t:8,r:"data-import"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"result tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="result"'}}]}],f:[{t:7,e:"iframe",m:[{n:"id",f:"result",t:13,g:1},{n:"srcdoc",f:[{t:2,x:{r:["~/report.type","@style.out.fg","@style.fg","@style.out.bg","@style.bg","@this","result"],s:'_0==="delimited"?("<style>pre { padding: 0.5rem; } code { display: block; color: "+(_1||_2)+"; background-color: "+(_3||_4)+"; }</style><code><pre>")+_6+"</pre></code>"+_5.frameExtra():_6'}}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"project tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="project"'}}]}],f:[{t:8,r:"project"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"bottom-pane",g:1},{n:"class-active",t:13,f:[{t:2,r:"~/show.bottom"}]},{n:"class-max",t:13,f:[{t:2,r:"~/max.bottom"}]}],f:[{t:8,r:"bottom"}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"position: absolute; left: -1000px; width: 1rem; height: 1rem;",g:1},{n:"id",f:"sizer",t:13,g:1}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"position: absolute; left: -1000px; width: 5rem; height: 5rem; overflow: auto;",g:1}],f:[{t:7,e:"textarea",m:[{n:"id",f:"text-helper",t:13},{n:"style",f:"padding: 0.5em;",t:13}]}]}]}],e:{0:function(){return 0},1:function(){return 1},2:function(){return 2},3:function(){return 3},4:function(){return 4},5:function(){return 5},6:function(){return 6},7:function(){return 7},'["z",{ctrl:true}]':function(){return["z",{ctrl:!0}]},"[_0.undo(),true]":function(t){return[t.undo(),!0]},'["Z",{ctrl:true,shift:true}]':function(){return["Z",{ctrl:!0,shift:!0}]},"[_0.redo(),true]":function(t){return[t.redo(),!0]},'_0==="delimited"&&_1!==1':function(t,e){return"delimited"===t&&1!==e},'[_0.run()&&_0.set("tab","result")]':function(t){return[t.run()&&t.set("tab","result")]},'[_0.set("tab","design")]':function(t){return[t.set("tab","design")]},'_0!=="result"&&_0!=="context"&&_0!=="definition"&&_0!=="import"&&_0!=="project"':function(t){return"result"!==t&&"context"!==t&&"definition"!==t&&"import"!==t&&"project"!==t},'[_0.set("tab","result")]':function(t){return[t.set("tab","result")]},'_0==="result"':function(t){return"result"===t},'[_0.set("tab","context")]':function(t){return[t.set("tab","context")]},'_0==="context"':function(t){return"context"===t},'[_0.set("tab","definition")]':function(t){return[t.set("tab","definition")]},'_0==="definition"':function(t){return"definition"===t},'[_0.set("tab","import")]':function(t){return[t.set("tab","import")]},'_0==="import"':function(t){return"import"===t},'_0&&_1.readLink("data")':function(t,e){return t&&e.readLink("data")},'[_0.checkLink("import")]':function(t){return[t.checkLink("import")]},'_0&&_1==="import"':function(t,e){return t&&"import"===e},'[_0.download((_1||"report")+(_3==="delimited"?".csv":".html"),_2,_3==="delimited"?"text/csv":"text/html")]':function(t,e,r,n){return[t.download((e||"report")+("delimited"===n?".csv":".html"),r,"delimited"===n?"text/csv":"text/html")]},'[_0.set("tab","project")]':function(t){return[t.set("tab","project")]},'_0==="project"':function(t){return"project"===t},'_0?"Project":"Settings"':function(t){return t?"Project":"Settings"},'_0==="delimited"?("<style>pre { padding: 0.5rem; } code { display: block; color: "+(_1||_2)+"; background-color: "+(_3||_4)+"; }</style><code><pre>")+_6+"</pre></code>"+_5.frameExtra():_6':function(t,e,r,n,o,i,s){return"delimited"===t?"<style>pre { padding: 0.5rem; } code { display: block; color: "+(e||r)+"; background-color: "+(n||o)+"; }</style><code><pre>"+s+"</pre></code>"+i.frameExtra():s},"[_0.loadReportFile()]":function(t){return[t.loadReportFile()]},'[_1.download((_0||"report")+".js"+(_2?"":"on"),_1.reportToString(true,_2,_3))]':function(t,e,r,n){return[e.download((t||"report")+".js"+(r?"":"on"),e.reportToString(!0,r,n))]},"[_0.fmtAll()]":function(t){return[t.fmtAll()]},"[_0.autosize(_1)]":function(t,e){return[t.autosize(e)]},"_0.reportToString(_1,_2,_3)":function(t,e,r,n){return t.reportToString(e,r,n)},'[_1.loadReportString(_0),_1.update("temp")]':function(t,e){return[e.loadReportString(t),e.update("temp")]},"[_0.loadContextFile()]":function(t){return[t.loadContextFile()]},"[_0.tryContext(_1)]":function(t,e){return[t.tryContext(e)]},'["_contextText"]':function(){return["_contextText"]},"[_0.loadImportFile()]":function(t){return[t.loadImportFile()]},'_0==="fetch"':function(t){return"fetch"===t},'[_0.set("data.type",_1?"fetch":undefined)]':function(t,e){return[t.set("data.type",e?"fetch":void 0)]},undefined:function(){},'[_0.editExpr(_1+".url",{template:true}),false]':function(t,e){return[t.editExpr(e+".url",{template:!0}),!1]},'[(_0).push(".headers",[])]':function(t){return[t.push(".headers",[])]},"[_0.fetchData()]":function(t){return[t.fetchData()]},'[(_0).splice("../",_1,1)]':function(t,e){return[t.splice("../",e,1)]},'[_0.editExpr(_1+".1",{template:true}),false]':function(t,e){return[t.editExpr(e+".1",{template:!0}),!1]},'[_0.editExpr(_1+".body",{template:true}),false]':function(t,e){return[t.editExpr(e+".body",{template:!0}),!1]},'_0!=="GET"':function(t){return"GET"!==t},"[_1.autosize(_0),_1.tryImport(_2)]":function(t,e,r){return[e.autosize(t),e.tryImport(r)]},'["_importText"]':function(){return["_importText"]},"[_0.saveProjects()]":function(t){return[t.saveProjects()]},'[_1.download(_0+".json",_1.stringifyProject())]':function(t,e){return[e.download(t+".json",e.stringifyProject())]},"[_0.cloneProject()]":function(t){return[t.cloneProject()]},"[_0.importProject()]":function(t){return[t.importProject()]},"[_0.makeProject(true)]":function(t){return[t.makeProject(!0)]},"[_0.removeProject()]":function(t){return[t.removeProject()]},"[_0.resetProject()]":function(t){return[t.resetProject()]},'[_0.set("projectText",_0.stringifyProject())]':function(t){return[t.set("projectText",t.stringifyProject())]},"[_0.importProject(_1)]":function(t,e){return[t.importProject(e)]},"_0!=null":function(t){return null!=t},"[_0.makeProject()]":function(t){return[t.makeProject()]},"_0===_1":function(t,e){return t===e},"[_0.linkProject(_1)]":function(t,e){return[t.linkProject(e)]},"[_0.addHeader()]":function(t){return[t.addHeader()]},"!_0":function(t){return!t},'[_0.set("report.headers",undefined)]':function(t){return[t.set("report.headers",void 0)]},'[_0.push("report.headers",""),_0.push("report.fields","")]':function(t){return[t.push("report.headers",""),t.push("report.fields","")]},"[_0.editExpr((_1))]":function(t,e){return[t.editExpr(e)]},"[true]":function(){return[!0]},"[_0.removeWidget((_1)),false]":function(t,e){return[t.removeWidget(e),!1]},"!!_0":function(t){return!!t},'[_1.push("report.fields",""),_0&&_1.push("report.headers","")]':function(t,e){return[e.push("report.fields",""),t&&e.push("report.headers","")]},'_0==="delimited"':function(t){return"delimited"===t},"_0.paperSize()":function(t){return t.paperSize()},'[_0===_1?_2.selectWidget("report"):true]':function(t,e,r){return[t!==e||r.selectWidget("report")]},'[_0.unlink("widget"),_0.unlink("expr"),_0.set("temp",{name:"report ",widget:"report"})]':function(t){return[t.unlink("widget"),t.unlink("expr"),t.set("temp",{name:"report ",widget:"report"})]},'_0==="report"||_0==="report.watermark"||_0==="report.overlay"':function(t){return"report"===t||"report.watermark"===t||"report.overlay"===t},'[_0.set("temp.hover",_1?"report.watermark":_2?"report.overlay":"report"),false]':function(t,e,r){return[t.set("temp.hover",e?"report.watermark":r?"report.overlay":"report"),!1]},'[_0.set("temp.hover",""),false]':function(t){return[t.set("temp.hover",""),!1]},'[_0.set("report.header",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.header",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.set("report.header",{type:"container"})]':function(t){return[t.set("report.header",{type:"container"})]},'[_0.set("report.footer",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.footer",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.set("report.footer",{type:"container"})]':function(t){return[t.set("report.footer",{type:"container"})]},"!_0||!/^report.(water|overlay)/.test(_0)":function(t){return!t||!/^report.(water|overlay)/.test(t)},'_0==="page"':function(t){return"page"===t},'[_0.set("report.watermark",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.watermark",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.link("report.watermark","widget"),_0.set("temp.widget","report.watermark"),false]':function(t){return[t.link("report.watermark","widget"),t.set("temp.widget","report.watermark"),!1]},'[_0.set("report.watermark",{type:"container"}),_0.link("report.watermark","widget"),_0.set("temp.widget","report.watermark"),false]':function(t){return[t.set("report.watermark",{type:"container"}),t.link("report.watermark","widget"),t.set("temp.widget","report.watermark"),!1]},'[_0.set("report.overlay",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.overlay",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.link("report.overlay","widget"),_0.set("temp.widget","report.overlay"),false]':function(t){return[t.link("report.overlay","widget"),t.set("temp.widget","report.overlay"),!1]},'[_0.set("report.overlay",{type:"container"}),_0.link("report.overlay","widget"),_0.set("temp.widget","report.overlay"),false]':function(t){return[t.set("report.overlay",{type:"container"}),t.link("report.overlay","widget"),t.set("temp.widget","report.overlay"),!1]},'[_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.unlink("widget"),t.set("temp.widget","")]},"/^report.(water|overlay)/.test(_0)":function(t){return/^report.(water|overlay)/.test(t)},'"page header"':function(){return"page header"},'_0==="page"&&_1':function(t,e){return"page"===t&&e},"/^report.water/.test(_0)":function(t){return/^report.water/.test(t)},"/^report.overlay/.test(_0)":function(t){return/^report.overlay/.test(t)},'"page footer"':function(){return"page footer"},'[(_0).set(".width",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:typeof _1==="object"&&"x" in _1?"grow":_2)]':function(t,e,r){return[t.set(".width","number"==typeof e||void 0===e?{percent:e}:"object"==typeof e&&"percent"in e?{x:""}:"object"==typeof e&&"x"in e?"grow":r)]},'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":typeof _0==="object"&&"x" in _0?"Change to Fill/Grow":"Change to REM"':function(t){return"number"==typeof t||void 0===t?"Change to percent":"object"==typeof t&&"percent"in t?"Change to Expression":"object"==typeof t&&"x"in t?"Change to Fill/Grow":"Change to REM"},'[_0.editExpr(".width.x"),false]':function(t){return[t.editExpr(".width.x"),!1]},'typeof _0==="object"&&"x" in _0':function(t){return"object"==typeof t&&"x"in t},'typeof _0==="number"||_0===undefined':function(t){return"number"==typeof t||void 0===t},'typeof _0==="object"&&"percent" in _0':function(t){return"object"==typeof t&&"percent"in t},'_0==="grow"':function(t){return"grow"===t},'_0==="label"':function(t){return"label"===t},'[(_0).set(".height",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:typeof _1==="object"&&"x" in _1?"grow":_2)]':function(t,e,r){return[t.set(".height","number"==typeof e||void 0===e?{percent:e}:"object"==typeof e&&"percent"in e?{x:""}:"object"==typeof e&&"x"in e?"grow":r)]},'[_0.editExpr(".height.x"),false]':function(t){return[t.editExpr(".height.x"),!1]},"_0.lastKey(_1)":function(t,e){return t.lastKey(e)},"Array.isArray(_0)":function(t){return Array.isArray(t)},'[(_0).set("^^/br",typeof _1==="object"?false:{x:""})]':function(t,e){return[t.set("^^/br","object"!=typeof e&&{x:""})]},'typeof _0==="object"?"Change to Boolean":"Change to Expression"':function(t){return"object"==typeof t?"Change to Boolean":"Change to Expression"},'[_0.editExpr("^^/br.x"),false]':function(t){return[t.editExpr("^^/br.x"),!1]},'typeof _0!=="object"':function(t){return"object"!=typeof t},'typeof _0==="object"':function(t){return"object"==typeof t},"_0.split(_1,2)":function(t,e){return t.split(e,2)},'[_0.editExpr(".hide")]':function(t){return[t.editExpr(".hide")]},'[_0.editExpr(".margin.x"),false]':function(t){return[t.editExpr(".margin.x"),!1]},'typeof _0==="undefined"':function(t){return void 0===t},'[(_0).set(".margin",undefined)]':function(t){return[t.set(".margin",void 0)]},'typeof _0!=="undefined"':function(t){return void 0!==t},'typeof _0==="number"':function(t){return"number"==typeof t},'[(_0).set(".margin",1)]':function(t){return[t.set(".margin",1)]},'typeof _0!=="number"':function(t){return"number"!=typeof t},"_0===2":function(t){return 2===t},'[(_0).set(".margin",[1,1])]':function(t){return[t.set(".margin",[1,1])]},"_0!==2":function(t){return 2!==t},"_0===4":function(t){return 4===t},'[(_0).set(".margin",[1,1,1,1])]':function(t){return[t.set(".margin",[1,1,1,1])]},"_0!==4":function(t){return 4!==t},'[(_0).set(".margin",{x:""})]':function(t){return[t.set(".margin",{x:""})]},"!_0||_1===undefined":function(t,e){return!t||void 0===e},"_0!==undefined":function(t){return void 0!==t},'[_0.editExpr(".border")]':function(t){return[t.editExpr(".border")]},'typeof _0==="string"':function(t){return"string"==typeof t},'[(_0).set(".border",undefined)]':function(t){return[t.set(".border",void 0)]},'[(_0).set(".border",1)]':function(t){return[t.set(".border",1)]},"_0===1":function(t){return 1===t},'[(_0).set(".border",[1])]':function(t){return[t.set(".border",[1])]},"_0!==1":function(t){return 1!==t},'[(_0).set(".border",[1,1])]':function(t){return[t.set(".border",[1,1])]},'[(_0).set(".border",[1,1,1,1])]':function(t){return[t.set(".border",[1,1,1,1])]},'[(_0).set(".border","")]':function(t){return[t.set(".border","")]},'typeof _0!=="string"':function(t){return"string"!=typeof t},'[(_0).set(".font.align",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.align","object"==typeof e?void 0:{x:""})]},'typeof _0==="object"?"Change to value":"Change to Expression"':function(t){return"object"==typeof t?"Change to value":"Change to Expression"},'[_0.editExpr(".font.align.x")]':function(t){return[t.editExpr(".font.align.x")]},'_0!=="image"':function(t){return"image"!==t},'[(_0).set(".font.pre",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.pre","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.pre.x")]':function(t){return[t.editExpr(".font.pre.x")]},'[(_0).set(".font.pre",_1?true:undefined)]':function(t,e){return[t.set(".font.pre",!!e||void 0)]},'_0==="measured"||_0==="image"':function(t){return"measured"===t||"image"===t},'[(_0).set(".font.clamp",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.clamp","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.clamp.x")]':function(t){return[t.editExpr(".font.clamp.x")]},'[(_0).set(".font.clamp",_1?true:undefined)]':function(t,e){return[t.set(".font.clamp",!!e||void 0)]},'[(_0).set(".font.size",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.size","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.size.x")]':function(t){return[t.editExpr(".font.size.x")]},'[(_0).set(".font.line",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.line","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.line.x")]':function(t){return[t.editExpr(".font.line.x")]},'[(_0).set(".font.family",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.family","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.family.x")]':function(t){return[t.editExpr(".font.family.x")]},'[(_0).set(".font.color",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.color","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.color.x")]':function(t){return[t.editExpr(".font.color.x")]},'[(_0).set(".font.weight",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.weight","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.weight.x")]':function(t){return[t.editExpr(".font.weight.x")]},'[(_0).set(".bg",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".bg","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".bg.x")]':function(t){return[t.editExpr(".bg.x")]},'[(_0).set(".radius",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".radius","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".radius.x")]':function(t){return[t.editExpr(".radius.x")]},'[_0.editExpr(".url")]':function(t){return[t.editExpr(".url")]},'[(_0).set(".fit",!_1||typeof _1==="string"?{x:""}:undefined)]':function(t,e){return[t.set(".fit",e&&"string"!=typeof e?void 0:{x:""})]},'_0&&typeof _0!=="object"?"Expression":"Value"':function(t){return t&&"object"!=typeof t?"Expression":"Value"},'[_0.editExpr(".fit.x"),false]':function(t){return[t.editExpr(".fit.x"),!1]},'!_0||typeof _0==="string"':function(t){return!t||"string"==typeof t},'[typeof _0==="string"?_2.editExpr(_1+".source"):_2.editReportSrc((_3),".source")]':function(t,e,r,n){return["string"==typeof t?r.editExpr(e+".source"):r.editReportSrc(n,".source")]},'[(_0).set(".source","")]':function(t){return[t.set(".source","")]},'[(_0).set(".source",{source:""})]':function(t){return[t.set(".source",{source:""})]},"_0||_1":function(t,e){return t||e},"_0||_1||_2":function(t,e,r){return t||e||r},"_0&&_1":function(t,e){return t&&e},"_0.split(_1)":function(t,e){return t.split(e)},'[_0.editExpr(".text")]':function(t){return[t.editExpr(".text")]},'[(_0).set(".font.metric",typeof _1==="object"?undefined:{x:""})]':function(t,e){return[t.set(".font.metric","object"==typeof e?void 0:{x:""})]},'[_0.editExpr(".font.metric.x")]':function(t){return[t.editExpr(".font.metric.x")]},"_0-1-_1":function(t,e){return t-1-e},"_0&&_2[_1]":function(t,e,r){return t&&r[e]},'Array.isArray(_0)?"manual":"auto"':function(t){return Array.isArray(t)?"manual":"auto"},'[(_0).set(".layout",_1==="manual"?[]:undefined)]':function(t,e){return[t.set(".layout","manual"===e?[]:void 0)]},'[_0.editExpr(".context")]':function(t){return[t.editExpr(".context")]},'[_0.editExpr(".html",{html:true})]':function(t){return[t.editExpr(".html",{html:!0})]},'[_0.editExpr(".text",{label:true})]':function(t){return[t.editExpr(".text",{label:!0})]},'[(_0).set(".text",_2.getPartStrings(_1)),_2.editExpr(".text",{label:true})]':function(t,e,r){return[t.set(".text",r.getPartStrings(e)),r.editExpr(".text",{label:!0})]},'[(_0).set(".id",undefined)]':function(t){return[t.set(".id",void 0)]},'[(_0).set(".id","")]':function(t){return[t.set(".id","")]},"_0.inRepeater(_1)":function(t,e){return t.inRepeater(e)},'[(_0).set(".format",undefined)]':function(t){return[t.set(".format",void 0)]},'[(_0).set(".format",{})]':function(t){return[t.set(".format",{})]},'[(_0).push(".format.args","")]':function(t){return[t.push(".format.args","")]},'_0==="params"':function(t){return"params"===t},'[_0.set("temp.bottom.tab","params"),_0.set("show.bottom",true)]':function(t){return[t.set("temp.bottom.tab","params"),t.set("show.bottom",!0)]},'!_0||_0==="expr"':function(t){return!t||"expr"===t},'[_0.set("temp.bottom.tab","expr"),_0.set("show.bottom",true)]':function(t){return[t.set("temp.bottom.tab","expr"),t.set("show.bottom",!0)]},'_0==="param"':function(t){return"param"===t},'[_0.set("temp.bottom.tab","param"),_0.set("show.bottom",true)]':function(t){return[t.set("temp.bottom.tab","param"),t.set("show.bottom",!0)]},'_0==="source"':function(t){return"source"===t},'[_0.set("temp.bottom.tab","source"),_0.set("show.bottom",true)]':function(t){return[t.set("temp.bottom.tab","source"),t.set("show.bottom",!0)]},'[_0.checkLink("expr")]':function(t){return[t.checkLink("expr")]},'_0.replace(/\\./g," 〉 ")':function(t){return t.replace(/\./g," 〉 ")},'_0&&(!_1||_1==="expr")':function(t,e){return t&&(!e||"expr"===e)},'[_0.checkLink("param")]':function(t){return[t.checkLink("param")]},"+_0.lastKey(_1)+1":function(t,e){return+t.lastKey(e)+1},'_0&&_1==="param"':function(t,e){return t&&"param"===e},'[_0.checkLink("source")]':function(t){return[t.checkLink("source")]},'_0&&_1==="source"':function(t,e){return t&&"source"===e},'[_0.toggle("max.bottom")]':function(t){return[t.toggle("max.bottom")]},'[_0.toggle("show.bottom")]':function(t){return[t.toggle("show.bottom")]},"[_0.eval()]":function(t){return[t.eval()]},'_0==="text"':function(t){return"text"===t},'[_0.set("temp.expr.tab","text")]':function(t){return[t.set("temp.expr.tab","text")]},"[_0.fmt()]":function(t){return[t.fmt()]},'_0==="text"&&!_1':function(t,e){return"text"===t&&!e},'_0?"":"none"':function(t){return t?"":"none"},'_0==="html"':function(t){return"html"===t},'[_0.set("temp.expr.tab","html")]':function(t){return[t.set("temp.expr.tab","html")]},'[_0.set("temp.expr.tab","result")]':function(t){return[t.set("temp.expr.tab","result")]},'_0==="parsed"':function(t){return"parsed"===t},'[_0.set("temp.expr.tab","parsed")]':function(t){return[t.set("temp.expr.tab","parsed")]},'!_0||_0==="text"':function(t){return!t||"text"===t},'[(_0).set(".str",_1.getPartStrings(_2))]':function(t,e,r){return[t.set(".str",e.getPartStrings(r))]},'[(_0).push(".str","")]':function(t){return[t.push(".str","")]},"_0===0":function(t){return 0===t},"[_0.moveUp((_1))]":function(t,e){return[t.moveUp(e)]},"[_0.moveDown((_1))]":function(t,e){return[t.moveDown(e)]},'[(_0).set(".",{text:_1})]':function(t,e){return[t.set(".",{text:e})]},'[(_0).set(".",_1)]':function(t,e){return[t.set(".",e)]},"_0==null?1:_0":function(t){return null==t?1:t},'[(_0).set(".str",[_1])]':function(t,e){return[t.set(".str",[e])]},'[_0.command("bold")]':function(t){return[t.command("bold")]},'[_0.command("italic")]':function(t){return[t.command("italic")]},'[_0.command("underline")]':function(t){return[t.command("underline")]},'[_0.command("strikeThrough")]':function(t){return[t.command("strikeThrough")]},"[_0.setHTMLFontSize()]":function(t){return[t.setHTMLFontSize()]},'!_0||_0==="plain"':function(t){return!t||"plain"===t},'[_0.set("temp.expr.resulttype","plain")]':function(t){return[t.set("temp.expr.resulttype","plain")]},'_0&&_0!=="plain"':function(t){return t&&"plain"!==t},'_0==="json"':function(t){return"json"===t},'[_0.set("temp.expr.resulttype","json")]':function(t){return[t.set("temp.expr.resulttype","json")]},'_0!=="json"':function(t){return"json"!==t},'[_0.set("temp.expr.resulttype","html")]':function(t){return[t.set("temp.expr.resulttype","html")]},'_0!=="html"':function(t){return"html"!==t},"_0===undefined":function(t){return void 0===t},'JSON.stringify(_0,null,"  ")':function(t){return JSON.stringify(t,null,"  ")},'_0==="ast"||_0==="text"||_0==="html"?"":"none"':function(t){return"ast"===t||"text"===t||"html"===t?"":"none"},'_0==="ast"&&(_1).decorators.scrolled&&(_1).decorators.scrolled.invalidate()||""&&""':function(t,e){return"ast"===t&&e.decorators.scrolled&&e.decorators.scrolled.invalidate()||""},"[_0.insertOp(_1)]":function(t,e){return[t.insertOp(e)]},'_0==="string"':function(t){return"string"===t},'[(_0).set(".init","")]':function(t){return[t.set(".init","")]},'[(_0).set(".init",undefined)]':function(t){return[t.set(".init",void 0)]},'[(_0).set(".options",Array.isArray(_1)?undefined:[])]':function(t,e){return[t.set(".options",Array.isArray(e)?void 0:[])]},'[(_2).push(".options",!_0?_1:{label:_0,value:_1}),(_2).set({"ctx.label":"","ctx.value":""})]':function(t,e,r){return[r.push(".options",t?{label:t,value:e}:e),r.set({"ctx.label":"","ctx.value":""})]},'[_0.editExpr(_1+".base")]':function(t,e){return[t.editExpr(e+".base")]},'[_0.editExpr(_1+".filter")]':function(t,e){return[t.editExpr(e+".filter")]},'[_0.editExpr(_1+".sort")]':function(t,e){return[t.editExpr(e+".sort")]},'[(_0).push(".group","")]':function(t){return[t.push(".group","")]},'[(_0).set(".group",undefined)]':function(t){return[t.set(".group",void 0)]},"_0+1":function(t){return t+1},'[_0.editExpr("~/"+_1)]':function(t,e){return[t.editExpr("~/"+e)]},'[(_0).set(".group",[""])]':function(t){return[t.set(".group",[""])]},"[_0.exprToggle(_1)]":function(t,e){return[t.exprToggle(e)]},'_1[_0]?"-":"+"':function(t,e){return e[t]?"-":"+"},"[_0.insertRef(_1)]":function(t,e){return[t.insertRef(e)]},'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]':function(t,e,r){return[Array.isArray(t)?r.splice("../",e,1):r.set(".",void 0)]},'[(_0).set(".source",{r:""})]':function(t){return[t.set(".source",{r:""})]},'[(_0).set(".apply",{r:""})]':function(t){return[t.set(".apply",{r:""})]},'_1[_0]&&_1[_0].type==="aggregate"':function(t,e){return e[t]&&"aggregate"===e[t].type},"[_0.retypeASTNode(_1,_2)]":function(t,e,r){return[t.retypeASTNode(e,r)]},'_1&&"op" in _1?"operator":_1&&"v" in _1?(typeof _0==="string"?"string":typeof _0==="number"?"number":"object"):_1&&"r" in _1?"reference":"undefined"':function(t,e){return e&&"op"in e?"operator":e&&"v"in e?"string"==typeof t?"string":"number"==typeof t?"number":"object":e&&"r"in e?"reference":"undefined"},'[_0!==_2&&[_1.link(_2,"temp.expr.part"),_1.set("temp.expr.partpath",_2)],false]':function(t,e,r){return[t!==r&&[e.link(r,"temp.expr.part"),e.set("temp.expr.partpath",r)],!1]},'(_0&&("op" in _0?"op":"v" in _0?"value":"r" in _0?"ref":"wat"))||"wat"':function(t){return t&&("op"in t?"op":"v"in t?"value":"r"in t?"ref":"wat")||"wat"},'[(_0).push(".args",{v:""})]':function(t){return[t.push(".args",{v:""})]},'_0&&"op" in _0':function(t){return t&&"op"in t},'_0&&"v" in _0':function(t){return t&&"v"in t},'_0&&"r" in _0':function(t){return t&&"r"in t},'"+ "':function(){return"+ "},'"=> "':function(){return"=> "},'[_0.set("report.defaultParams",_1)]':function(t,e){return[t.set("report.defaultParams",e)]},"[_0.initParams()]":function(t){return[t.initParams()]},'_0==="boolean"':function(t){return"boolean"===t},'_0==="code"':function(t){return"code"===t},'_0==="number"':function(t){return"number"===t},'[_0.toggle("~/show.props")]':function(t){return[t.toggle("~/show.props")]},'_0?"left":"right"':function(t){return t?"left":"right"},"[_0.addWidget(_1)]":function(t,e){return[t.addWidget(e)]},'_0!=="delimited"&&(_1==="container"||_2==="report")':function(t,e,r){return"delimited"!==t&&("container"===e||"report"===r)},'[_0.set("reparent",undefined)]':function(t){return[t.set("reparent",void 0)]},true:function(){return!0},"[_0.treeScrollToActive()]":function(t){return[t.treeScrollToActive()]},'_0==="report"':function(t){return"report"===t},'[_0?_2.reparent((_1)):_2.selectWidget("report")]':function(t,e,r){return[t?r.reparent(e):r.selectWidget("report")]},'[_0.set("temp.hover","report"),false]':function(t){return[t.set("temp.hover","report"),!1]},"_0.toUpperCase()":function(t){return t.toUpperCase()},"_0.substr(1)":function(t){return t.substr(1)},'[_0.editExpr("report.name",{template:true}),false]':function(t){return[t.editExpr("report.name",{template:!0}),!1]},'_0!=="delimited"':function(t){return"delimited"!==t},'[_0.push("report.parameters",{})]':function(t){return[t.push("report.parameters",{})]},"[_0.editParam((_1))]":function(t,e){return[t.editParam(e)]},'[_0.checkLink("param",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("param",e),r.splice("../",n,1)]},'[_0.push("sources",{})]':function(t){return[t.push("sources",{})]},"[_0.editProvidedData((_1))]":function(t,e){return[t.editProvidedData(e)]},"[_0.logData(_1)]":function(t,e){return[t.logData(e)]},'"console"':function(){return"console"},'[_0.checkLink("import",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("import",e),r.splice("../",n,1)]},'[_0.push("report.sources",{name:"",parameters:{}})]':function(t){return[t.push("report.sources",{name:"",parameters:{}})]},'_0!=="delimited"||_1<1':function(t,e){return"delimited"!==t||e<1},"[_0.editReportSrc((_1))]":function(t,e){return[t.editReportSrc(e)]},'[_0.checkLink("source",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("source",e),r.splice("../",n,1)]},'_0+"-props"':function(t){return t+"-props"},'[_0.set("temp.expr.hover",_1),false]':function(t,e){return[t.set("temp.expr.hover",e),!1]},'[_0.set("temp.expr.hover",""),false]':function(t){return[t.set("temp.expr.hover",""),!1]},'[_1.moveUp((_2),"../",_3),_0&&_1.moveUp((_2),"~/report.header",_3),false]':function(t,e,r,n){return[e.moveUp(r,"../",n),t&&e.moveUp(r,"~/report.header",n),!1]},'[_1.moveDown((_2),"../",_3),_0&&_1.moveDown((_2),"~/report.header",_3),false]':function(t,e,r,n){return[e.moveDown(r,"../",n),t&&e.moveDown(r,"~/report.header",n),!1]},"[_0.removeWidget((_1))]":function(t,e){return[t.removeWidget(e)]},'[_1&&_0==="container"&&_4.indexOf(_1.resolve())===-1?_3.reparent((_2)):_3.selectWidget(_4),false]':function(t,e,r,n,o){return[e&&"container"===t&&-1===o.indexOf(e.resolve())?n.reparent(r):n.selectWidget(o),!1]},'[_0.set("temp.hover",_1),false]':function(t,e){return[t.set("temp.hover",e),!1]},'[_0.moveUp((_1)),_0.moveUp((_1),"^^/groupEnds"),false]':function(t,e){return[t.moveUp(e),t.moveUp(e,"^^/groupEnds"),!1]},'[_0.moveDown((_1)),_0.moveDown((_1),"^^/groupEnds"),false]':function(t,e){return[t.moveDown(e),t.moveDown(e,"^^/groupEnds"),!1]},'_0==="repeater"&&_1':function(t,e){return"repeater"===t&&e},'_0!=="row"||_1!=="repeater"':function(t,e){return"row"!==t||"repeater"!==e},'_0==="container"':function(t){return"container"===t},"_1&&_0===_1.resolve()":function(t,e){return e&&t===e.resolve()},'[_1&&_1.resolve()===_4?_3.set("reparent",undefined):_1&&_0==="container"&&_4.indexOf(_1.resolve())===-1?_3.reparent((_2)):_3.selectWidget(_4),false]':function(t,e,r,n,o){return[e&&e.resolve()===o?n.set("reparent",void 0):e&&"container"===t&&-1===o.indexOf(e.resolve())?n.reparent(r):n.selectWidget(o),!1]},'!_2||_0==="container"&&_1.indexOf(_2.resolve())===-1':function(t,e,r){return!r||"container"===t&&-1===e.indexOf(r.resolve())},'[_0.set("reparent",(_1)),false]':function(t,e){return[t.set("reparent",e),!1]},'[_1.moveUp((_2)),Array.isArray(_0)?_1.moveUp((_2),"^^/layout"):false,false]':function(t,e,r){return[e.moveUp(r),!!Array.isArray(t)&&e.moveUp(r,"^^/layout"),!1]},'[_1.moveDown((_2)),Array.isArray(_0)?_1.moveDown((_2),"^^/groupEnds"):false,false]':function(t,e,r){return[e.moveDown(r),!!Array.isArray(t)&&e.moveDown(r,"^^/groupEnds"),!1]},'[(_0).set(".group",undefined),(_0).set(".groupEnds",[true]),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".group",void 0),t.set(".groupEnds",[!0]),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).push(".group",{type:"container"}),(_0).splice(".groupEnds",-1,0,true)]':function(t){return[t.push(".group",{type:"container"}),t.splice(".groupEnds",-1,0,!0)]},'[(_0).set(".group",[{type:"container"}]),(_0).set(".groupEnds",[true,true])]':function(t){return[t.set(".group",[{type:"container"}]),t.set(".groupEnds",[!0,!0])]},'[(_0).set(".header",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".header",void 0),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).set(".header",{type:"container"})]':function(t){return[t.set(".header",{type:"container"})]},'[(_0).set(".footer",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".footer",void 0),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).set(".footer",{type:"container"})]':function(t){return[t.set(".footer",{type:"container"})]},'"Group Header "+(_0+1)':function(t){return"Group Header "+(t+1)},'"Header"':function(){return"Header"},'(_0).set(".row",{type:"container"})&&""':function(t){return t.set(".row",{type:"container"})&&""},'"Row"':function(){return"Row"},'"Footer"':function(){return"Footer"},'[(_0).toggle("ctx.preview")]':function(t){return[t.toggle("ctx.preview")]},"[_0.autosizeHtml((_1))]":function(t,e){return[t.autosizeHtml(e)]},'[_0.editExpr((_1).resolve(".html"),{html:true})]':function(t,e){return[t.editExpr(e.resolve(".html"),{html:!0})]},"_0||0.83":function(t){return t||.83},'_0===0?"initial":(_0||_1||1)+"rem"':function(t,e){return 0===t?"initial":(t||e||1)+"rem"},"_0<50":function(t){return t<50},"_0.evalExpr(_1)":function(t,e){return t.evalExpr(e)},'!_0?"contain":_0==="stretch"?"100% 100%":"cover"':function(t){return t?"stretch"===t?"100% 100%":"cover":"contain"},"_0.calcFont(_1)":function(t,e){return t.calcFont(e)},'_0||"container"':function(t){return t||"container"},'(_0).set("ctx.layout",_1==="row"||!_1?"auto":"manual")&&""':function(t,e){return t.set("ctx.layout","row"!==e&&e?"manual":"auto")&&""},'[_0==="auto"?(_1).set(".layout",undefined):(_1).set(".layout",[])]':function(t,e){return["auto"===t?e.set(".layout",void 0):e.set(".layout",[])]},false:function(){return!1},"[_0]":function(t){return[t]},'_0!=="page footer"':function(t){return"page footer"!==t},"_0||0":function(t){return t||0},'_0==="container"?"min-":""':function(t){return"container"===t?"min-":""},'(_0&&_0!=="auth")||_1!=="container"':function(t,e){return t&&"auth"!==t||"container"!==e},"_0.calcManualLayout(_2[_1],_3,_4)":function(t,e,r,n,o){return t.calcManualLayout(r[e],n,o)},"_0===true":function(t){return!0===t},"_0.calcMargin(_1)":function(t,e){return t.calcMargin(e)},"_0.calcBorder(_1)":function(t,e){return t.calcBorder(e)},"[_0.selectWidget(_1)]":function(t,e){return[t.selectWidget(e)]},"[_0.removeWidget((_1),false)]":function(t,e){return[t.removeWidget(e,!1)]},"_0.calcWidthWithMargin(_1,(_2))":function(t,e,r){return t.calcWidthWithMargin(e,r)},"_0.calcHeightWithMargin(_1)":function(t,e){return t.calcHeightWithMargin(e)}},p:{types:[{t:7,e:"option",f:["any"]}," ",{t:7,e:"option",f:["string"]}," ",{t:7,e:"option",f:["number"]}," ",{t:7,e:"option",f:["boolean"]}," ",{t:7,e:"option",f:["date"]}," ",{t:7,e:"option",f:["array"]}," ",{t:7,e:"option",f:["object"]}," ",{t:7,e:"option",f:["string[]"]}," ",{t:7,e:"option",f:["number[]"]}," ",{t:7,e:"option",f:["boolean[]"]}," ",{t:7,e:"option",f:["date[]"]}," ",{t:7,e:"option",f:["object[]"]}],definition:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"definition-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"definition",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-wrap: wrap;",g:1},{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.loadReportFile()]"}},{n:"title",f:"Load report definition from a file",t:13,g:1}],f:["Load"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico text spacer",g:1},{n:["click"],t:70,f:{r:["~/report.name","@this","~/tmp.js","~/tmp.strings"],s:'[_1.download((_0||"report")+".js"+(_2?"":"on"),_1.reportToString(true,_2,_3))]'}},{n:"title",f:"Save report definition to a file",t:13,g:1}],f:["Save"]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/tmp.compact"}],t:13},{n:"style",f:"vertical-align: middle;",t:13}]}," Compact?"]}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/tmp.js"}],t:13},{n:"style",f:"vertical-align: middle;",t:13}]}," JS?"]}],n:50,r:"~/tmp.compact"}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/tmp.strings"}],t:13}],f:[{t:7,e:"option",f:["json"]},{t:7,e:"option",f:["template"]}]}]}],n:50,r:"~/tmp.js"}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/tmp.nowrap"}],t:13}]}," Compact format?"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fmtAll()]"}},{n:"title",f:"Reformat all expressions",t:13,g:1}],f:["Format All"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"json",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"textarea",m:[{n:"invalidated",t:71},{n:["change","input","invalidate"],t:70,f:{r:["@this","@node"],s:"[_0.autosize(_1)]"}},{t:73,v:"t",f:"false"},{n:"value",f:[{t:2,x:{r:["@this","~/tmp.compact","~/tmp.js","~/tmp.strings"],s:"_0.reportToString(_1,_2,_3)"}}],t:13},{n:["change"],t:70,f:{r:["@node.value","@this"],s:'[_1.loadReportString(_0),_1.update("temp")]'}}]}]}]}]}]}]}],context:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"context-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"definition",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text spacer",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.loadContextFile()]"}},{n:"title",f:"Import context from a file",t:13,g:1}],f:["Load"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"json",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"textarea",m:[{n:"invalidated",t:71},{n:["input","invalidate"],t:70,f:{r:["@this","@node"],s:"[_0.autosize(_1)]"}},{n:["change"],t:70,f:{r:["@this","@node.value"],s:"[_0.tryContext(_1)]"}},{n:"tracked",t:71,f:{r:[],s:'["_contextText"]'}}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"margin-top: 2rem;",g:1}],f:["Extra Context"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"extra-context",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:"~/report.extraContext"}],t:13}]}]}]}]}]}]}],"data-import":[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited import paper",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"import-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"definition",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text spacer",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.loadImportFile()]"}},{n:"title",f:"Import data from a file",t:13,g:1}],f:["Load"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"checked",f:[{t:2,x:{r:["data.type"],s:'_0==="fetch"'}}],t:13},{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@node.checked"],s:'[_0.set("data.type",_1?"fetch":undefined)]'}}]}," Fetch request?"]}]}," ",{t:4,f:[{t:7,e:"div",f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"radio",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"name",f:[{t:2,r:"data.eval"}],t:13},{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}]}," JSON"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"radio",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"name",f:[{t:2,r:"data.eval"}],t:13},{n:"value",f:"txt",t:13}]}," Plain text"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"fetch scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"label",m:[{t:13,n:"style",f:"width: 26rem;",g:1},{t:13,n:"class",f:"input",g:1}],f:["URL ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".url",{template:true}),false]'}}],f:[{t:8,r:"pencil"}]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".url"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Method",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".method"}],t:13}],f:[" ",{t:7,e:"option",f:["GET"]}," ",{t:7,e:"option",f:["POST"]}," ",{t:7,e:"option",f:["PUT"]}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"check",g:1},{n:"title",f:"Check if this source should be fetched before each run or leave unchecked if cached data can be used",t:13,g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".fetch"}],t:13}]}," Fetch on each run?"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".headers",[])]'}}],f:["Add Header"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fetchData()]"}}],f:["Fetch Now"]}," ",{t:4,f:[{t:7,e:"h3",f:["Headers"]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"fetch-header",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Remove header",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:[{t:8,r:"times"}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Header",{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:".",m:[{r:[],s:"0"}]}}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Value ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".1",{template:true}),false]'}}],f:[{t:8,r:"pencil"}]},{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:".",m:[{r:[],s:"1"}]}}],t:13}]}]}]}],n:52,r:".headers"}],n:50,r:".headers"}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"area",g:1}],f:["Body ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".body",{template:true}),false]'}}],f:[{t:8,r:"pencil"}]},{t:7,e:"textarea",f:[{t:2,r:".body"}]}]}],n:50,x:{r:[".method"],s:'_0!=="GET"'}}],n:54,r:"data"}]}]}],n:50,x:{r:["data.type"],s:'_0==="fetch"'}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"json",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"textarea",m:[{n:"invalidated",t:71},{n:["change","input","invalidate"],t:70,f:{r:["@node","@this","@node.value"],s:"[_1.autosize(_0),_1.tryImport(_2)]"}},{n:"tracked",t:71,f:{r:[],s:'["_importText"]'}}]}]}]}]}]}]}],project:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper project",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"settings-pane",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"settings-pane-inner",g:1}],f:[{t:7,e:"h3",f:["Settings"]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Theme",{t:7,e:"br"},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/settings.theme"}],t:13}],f:[" ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Auto"]}," ",{t:7,e:"option",m:[{n:"value",f:"dark",t:13}],f:["Dark"]}," ",{t:7,e:"option",m:[{n:"value",f:"light",t:13}],f:["Light"]}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Output Theme",{t:7,e:"br"},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/settings.outTheme"}],t:13}],f:[" ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Follow Designer"]}," ",{t:7,e:"option",m:[{n:"value",f:"dark",t:13}],f:["Dark"]}," ",{t:7,e:"option",m:[{n:"value",f:"light",t:13}],f:["Light"]}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"check",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/settings.autosave"}],t:13}]}," Auto save on leave?"]}," ",{t:7,e:"br"},{t:7,e:"br"}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Format Wrap",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/settings.format.wrap"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Array Wrap",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/settings.format.wrap_array"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Object Wrap",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/settings.format.wrap_keys"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Argument Wrap",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/settings.format.wrap_args"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Union Wrap",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/settings.format.wrap_union"}],t:13}]}]}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"project-pane",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"project-pane-left",g:1}],f:[{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"project-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"label",m:[{t:13,n:"style",f:"width: 20rem;",g:1},{t:13,n:"class",f:"input",g:1}],f:["Project Name",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"~/project.name"}],t:13}]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Save all projects to browser storage",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.saveProjects()]"}}],f:["Save Projects"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Export this project to a file",t:13,g:1},{n:["click"],t:70,f:{r:["~/project.name","@this"],s:'[_1.download(_0+".json",_1.stringifyProject())]'}}],f:["Export Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Create a copy of this project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.cloneProject()]"}}],f:["Clone Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Import this project definition from a file",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.importProject()]"}}],f:["Import Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Create a new empty project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.makeProject(true)]"}}],f:["New Project"]}," ",{t:7,e:"br"},{t:7,e:"br"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Delete this project from browser storage",t:13,g:1},{n:"style-background",f:[{t:2,r:"@style.error"}],t:13},{n:["click"],t:70,f:{r:["@this"],s:"[_0.removeProject()]"}}],f:["Delete Project"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"style-background",f:[{t:2,r:"@style.error"}],t:13},{n:"title",f:"Discard changes to this project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.resetProject()]"}}],f:["Discard Project Changes"]}],n:50,r:"~/projectChanged"}," ",{t:7,e:"br"},{t:7,e:"br"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Export this project as text to the below text field",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("projectText",_0.stringifyProject())]'}}],f:["Refresh Text"]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"grow area",g:1}],f:["Project Definition",{t:7,e:"textarea",m:[{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@node.value"],s:"[_0.importProject(_1)]"}}],f:[{t:2,r:"projectText"}]}]}],n:50,x:{r:["~/project"],s:"_0!=null"}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Convert the current definition to a project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.makeProject()]"}}],f:["Make Project"]}]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"project-pane-right",g:1}],f:["Projects ",{t:7,e:"div",m:[{t:13,n:"class",f:"project-list",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"project-item",g:1},{n:"title",f:["Load ",{t:2,r:".name"},", discarding any unsaved changes in the current project or definitions"],t:13},{n:"class-active-project",t:13,f:[{t:2,x:{r:[".","~/project"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.linkProject(_1)]"}}],f:[{t:2,r:".name"}]}],n:52,r:"~/projects"}]}]}]}],n:50,r:"~/showProjects"}]}]}]}],design:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 3rem; min-width: min-content;",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"widget active-widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:["Report"]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.addHeader()]"}}],f:["Add Header"]}],n:50,x:{r:["report.headers"],s:"!_0"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.headers",undefined)]'}}],f:["Remove Header"]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"widget hover-widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:["Header"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.headers",""),_0.push("report.fields","")]'}}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children fields",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"field",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}},{n:"class-active-expr",t:13,f:[{t:2,x:{r:["~/temp.expr.path","@keypath"],s:"_0===_1"}}]},{n:"expr",t:71,f:{r:[],s:"[true]"}}],f:[{t:7,e:"span",f:[{t:2,r:"."}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:[{t:8,r:"times"}]}]}],n:52,r:"report.headers"}]}]}],n:50,x:{r:["~/report.headers"],s:"!!_0"}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widget hover-widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:["Row"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["~/report.headers","@this"],s:'[_1.push("report.fields",""),_0&&_1.push("report.headers","")]'}}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children fields",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"field",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}},{n:"class-active-expr",t:13,f:[{t:2,x:{r:["~/temp.expr.path","@keypath"],s:"_0===_1"}}]},{n:"expr",t:71}],f:[{t:7,e:"span",f:[{t:2,r:"."}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:[{t:8,r:"times"}]}]}],n:52,r:"report.fields"}]}]}]}]}]}]}]}]}],n:50,x:{r:["report.type"],s:'_0==="delimited"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 3rem; min-width: min-content;",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"paper",g:1},{n:"style",f:[{t:2,x:{r:["@this"],s:"_0.paperSize()"}}],t:13},{n:["click"],t:70,f:{r:["@event.target","@node","@this"],s:'[_0===_1?_2.selectWidget("report"):true]'}}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"cursor: pointer;",g:1},{t:13,n:"class",f:"bar",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.unlink("widget"),_0.unlink("expr"),_0.set("temp",{name:"report ",widget:"report"})]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["temp.widget"],s:'_0==="report"||_0==="report.watermark"||_0==="report.overlay"'}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["temp.hover"],s:'_0==="report"||_0==="report.watermark"||_0==="report.overlay"'}}]},{n:["mouseover"],t:70,f:{r:["@this","~/inWatermark","~/inOverlay"],s:'[_0.set("temp.hover",_1?"report.watermark":_2?"report.overlay":"report"),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:[{t:4,f:["Watermark"],n:50,r:"~/inWatermark"},{t:4,f:["Overlay "],n:50,r:"~/inOverlay",l:1},{t:4,f:["Report"],n:51,l:1}]}," ",{t:4,f:[{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.header",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove page header"]}],n:50,r:"report.header"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.header",{type:"container"})]'}}],f:["Add page header"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.footer",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove page footer"]}],n:50,r:"report.footer"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.footer",{type:"container"})]'}}],f:["Add page footer"]}],n:51,l:1}],n:50,x:{r:["~/temp.widget"],s:"!_0||!/^report.(water|overlay)/.test(_0)"}}],n:50,x:{r:["report.type"],s:'_0==="page"'}}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.watermark",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove watermark"]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.link("report.watermark","widget"),_0.set("temp.widget","report.watermark"),false]'}}],f:["Edit watermark"]}],n:51,r:"~/inWatermark"}],n:50,r:"report.watermark"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.watermark",{type:"container"}),_0.link("report.watermark","widget"),_0.set("temp.widget","report.watermark"),false]'}}],f:["Add watermark"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.overlay",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove overlay"]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.link("report.overlay","widget"),_0.set("temp.widget","report.overlay"),false]'}}],f:["Edit overlay"]}],n:51,r:"~/inOverlay"}],n:50,r:"report.overlay"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.overlay",{type:"container"}),_0.link("report.overlay","widget"),_0.set("temp.widget","report.overlay"),false]'}}],f:["Add overlay"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Edit report"]}],n:50,x:{r:["~/temp.widget"],s:"/^report.(water|overlay)/.test(_0)"}}]}," ",{t:4,f:[{t:8,r:"widget",c:{r:"~/report.header"},z:[{n:"label",x:{x:{r:[],s:'"page header"'}}}]}],n:50,x:{r:["~/report.type","~/report.header"],s:'_0==="page"&&_1'}}," ",{t:4,f:[{t:4,f:[{t:8,r:"widget"}],n:52,r:"~/report.watermark.widgets"}],n:50,x:{r:["~/temp.widget"],s:"/^report.water/.test(_0)"}},{t:4,f:[{t:4,f:[{t:8,r:"widget"}],n:52,r:"~/report.overlay.widgets"}," "],n:50,x:{r:["~/temp.widget"],s:"/^report.overlay/.test(_0)"},l:1},{t:4,f:[" ",{t:4,f:[{t:8,r:"widget"}],n:52,r:"~/report.widgets"}],n:51,l:1}," ",{t:4,f:[{t:8,r:"widget",c:{r:"~/report.footer"},z:[{n:"label",x:{x:{r:[],s:'"page footer"'}}}]}],n:50,x:{r:["~/report.type","~/report.footer"],s:'_0==="page"&&_1'}}]}]}]}]}],n:51,l:1}],"widget-props":[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Width of the ",{t:2,r:".type"}," in rem, if a number, a percentage of the parent, grow/fill, or an expression, defaulting to 100%"],t:13}],f:["Width ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".width",".width.percent"],s:'[(_0).set(".width",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:typeof _1==="object"&&"x" in _1?"grow":_2)]'}},{n:"title",f:[{t:2,x:{r:[".width"],s:'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":typeof _0==="object"&&"x" in _0?"Change to Fill/Grow":"Change to REM"'}}],t:13}],f:[" ",{t:8,r:"switch"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".width.x"),false]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".width"],s:'typeof _0==="object"&&"x" in _0'}}]}," ",{t:7,e:"span",f:[{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".width"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["rem"]}]}],n:50,x:{r:[".width"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".width.percent"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["%"]}]}," "],n:50,x:{r:[".width"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",f:["Fill/Grow"]}," "],n:50,x:{r:[".width"],s:'_0==="grow"'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".width.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:51,l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Height of the ",{t:2,r:".type"}," in rem, if a number, a percentage of the parent, or an expression, fill/grow, default to",{t:4,f:["the largest font size or"],n:50,x:{r:["type"],s:'_0==="label"'}}," 1"],t:13}],f:["Height ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".height",".height.percent"],s:'[(_0).set(".height",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:typeof _1==="object"&&"x" in _1?"grow":_2)]'}},{n:"title",f:[{t:2,x:{r:[".height"],s:'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":typeof _0==="object"&&"x" in _0?"Change to Fill/Grow":"Change to REM"'}}],t:13}],f:[{t:8,r:"switch"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".height.x"),false]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".height"],s:'typeof _0==="object"&&"x" in _0'}}]}," ",{t:7,e:"span",f:[{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".height"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["rem"]}]}],n:50,x:{r:[".height"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".height.percent"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["%"]}]}," "],n:50,x:{r:[".height"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",f:["Fill/Grow"]}," "],n:50,x:{r:[".height"],s:'_0==="grow"'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".height.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:51,l:1}]}]}," ",{t:4,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["X"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:".layout",m:[{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"},{r:[],s:"0"}]}}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Y"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:".layout",m:[{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"},{r:[],s:"1"}]}}],t:13}]}]}]}],n:50,x:{r:[".layout"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"Cause the next widget to start on the next line in an automatic layout",t:13,g:1}],f:["Break? ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context","^^/br"],s:'[(_0).set("^^/br",typeof _1==="object"?false:{x:""})]'}},{n:"title",f:[{t:2,x:{r:["^^/br"],s:'typeof _0==="object"?"Change to Boolean":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr("^^/br.x"),false]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:["^^/br"],s:'typeof _0==="object"&&"x" in _0'}}," "]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"^^/br"}],t:13}]}],n:50,x:{r:["^^/br"],s:'typeof _0!=="object"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:"^^/br.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:["^^/br"],s:'typeof _0==="object"'},l:1}]}]}],n:51,l:1}],n:54,rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1,2)"}]}},{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"If this evaluates to true, the widget will be hidden and not affect automatic layouts",t:13,g:1}],f:["Hidden ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".hide")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".hide"}],t:13},{n:"tabout",f:0,t:13}]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Margin ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".margin.x"),false]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".margin"],s:'typeof _0==="object"&&"x" in _0'}}," "]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="undefined"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",undefined)]'}}],n:50,x:{r:[".margin"],s:'typeof _0!=="undefined"'}}],f:["None"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="number"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",1)]'}}],n:50,x:{r:[".margin"],s:'typeof _0!=="number"'}}],f:["All"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin.length"],s:"_0===2"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",[1,1])]'}}],n:50,x:{r:[".margin.length"],s:"_0!==2"}}],f:["Paired"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin.length"],s:"_0===4"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",[1,1,1,1])]'}}],n:50,x:{r:[".margin.length"],s:"_0!==4"}}],f:["Individual"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="object"&&"x" in _0'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",{x:""})]'}}],n:50,x:{r:[".margin",".margin.x"],s:"!_0||_1===undefined"}}],f:["Expression"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin"}],t:13}]}],n:50,x:{r:[".margin"],s:'typeof _0==="number"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"span"},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"span"},{t:7,e:"span"}]}," "],n:50,x:{r:[".margin.length"],s:"_0===2"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.3"}],t:13}]},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.2"}],t:13}]},{t:7,e:"span"}]}," "],n:50,x:{r:[".margin.length"],s:"_0===4"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".margin.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".margin.x"],s:"_0!==undefined"},l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"Setting box to contain will make the margins fit within the designated size. Setting box to expand will expand the width to include the margin. The default depends on the type of sizing, with contain for percentages and expand for others.",t:13,g:1}],f:["Box"]},{t:7,e:"span",f:[" ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".box"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Default"]}," ",{t:7,e:"option",m:[{n:"value",f:"contain",t:13}],f:["Contain"]}," ",{t:7,e:"option",m:[{n:"value",f:"expand",t:13}],f:["Expand"]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Border ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".border")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".border"],s:'typeof _0==="string"'}}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="undefined"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",undefined)]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="undefined"'}}],f:["None"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="number"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",1)]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="number"'}}],f:["Bottom"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===1"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==1"}}],f:["All"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===2"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1,1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==2"}}],f:["Paired"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===4"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1,1,1,1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==2"}}],f:["Individual"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border","")]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="string"'}}],f:["Expression"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border"}],t:13}]}],n:50,x:{r:[".border"],s:'typeof _0==="number"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".border"}],t:13},{n:"tabout",f:0,t:13}]}]}," "],n:50,x:{r:[".border"],s:'typeof _0==="string"'},l:1},{t:4,f:[" ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]}," "],n:50,x:{r:[".border.length"],s:"_0===1"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"span"},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"span"},{t:7,e:"span"}]}," "],n:50,x:{r:[".border.length"],s:"_0===2"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.3"}],t:13}]},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.2"}],t:13}]},{t:7,e:"span"}]}],n:50,x:{r:[".border.length"],s:"_0===4"},l:1}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Alignment ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.align"],s:'[(_0).set(".font.align",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.align"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.align.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.align"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.align.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.align"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".font.align"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(default)"]}," ",{t:7,e:"option",f:["left"]}," ",{t:7,e:"option",f:["center"]}," ",{t:7,e:"option",f:["right"]}]}],n:51,l:1}]}]}],n:50,x:{r:[".type"],s:'_0!=="image"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Display all whitespace, including newlines, within the content of the ",{t:2,r:".type"},"?"],t:13}],f:["Significant Space? ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.pre"],s:'[(_0).set(".font.pre",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.pre"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.pre.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.pre"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.pre.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.pre"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,r:".font.pre"}],t:13},{n:["change"],t:70,f:{r:["@context","@node.checked"],s:'[(_0).set(".font.pre",_1?true:undefined)]'}}]}],n:51,l:1}]}]}],n:51,x:{r:[".type"],s:'_0==="measured"||_0==="image"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Prevent Overflow? ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.clamp"],s:'[(_0).set(".font.clamp",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.clamp"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.clamp.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.clamp"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.clamp.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.clamp"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,r:".font.clamp"}],t:13},{n:["change"],t:70,f:{r:["@context","@node.checked"],s:'[(_0).set(".font.clamp",_1?true:undefined)]'}}]}],n:51,l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Text Size ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.size"],s:'[(_0).set(".font.size",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.size"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.size.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.size"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.size.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.size"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.size"}],t:13}]}],n:51,l:1}]}]}],n:50,x:{r:[".type"],s:'_0!=="image"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Line Height ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.line"],s:'[(_0).set(".font.line",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.line"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.line.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.line"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.line.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.line"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.line"}],t:13}]}],n:51,l:1}]}]}],n:51,x:{r:[".type"],s:'_0==="measured"||_0==="image"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Font Family ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.family"],s:'[(_0).set(".font.family",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.family"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.family.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.family"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.family.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.family"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".font.family"}],t:13}]}],n:51,l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Text Color ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.color"],s:'[(_0).set(".font.color",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.color"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.color.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.color"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.color.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.color"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".font.color"}],t:13}]}],n:51,l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Weight ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.weight"],s:'[(_0).set(".font.weight",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.weight"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.weight.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.weight"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.weight.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.weight"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".font.weight"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(default)"]}," ",{t:7,e:"option",m:[{n:"value",f:"400",t:13}],f:["light"]}," ",{t:7,e:"option",m:[{n:"value",f:"500",t:13}],f:["normal"]}," ",{t:7,e:"option",m:[{n:"value",f:"600",t:13}],f:["bold"]}," ",{t:7,e:"option",m:[{n:"value",f:"700",t:13}],f:["bolder"]}]}],n:51,l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Background Color ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".bg"],s:'[(_0).set(".bg",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".bg"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".bg.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".bg"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".bg.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".bg"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".bg"}],t:13}]}],n:51,l:1}]}]}],n:50,x:{r:[".type"],s:'_0!=="image"'}},{t:7,e:"label",f:[{t:7,e:"span",f:["Radius ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".radius"],s:'[(_0).set(".radius",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".radius"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".radius.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".radius"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".radius.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".radius"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".radius"}],t:13}]}],n:51,l:1}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Padding to add to the right side of the ",{t:2,r:".type"},", which is useful for right-aligned text"],t:13}],f:["Right Pad"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.right"}],t:13}]}]}]}],n:50,x:{r:[".margin"],s:"!_0"}}],"image-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["URL ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".url")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".url"}],t:13},{n:"tabout",f:0,t:13}]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Fit ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".fit"],s:'[(_0).set(".fit",!_1||typeof _1==="string"?{x:""}:undefined)]'}},{n:"title",f:["Sitch to ",{t:2,x:{r:[".fit"],s:'_0&&typeof _0!=="object"?"Expression":"Value"'}}],t:13}],f:[{t:8,r:"switch"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".fit.x"),false]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".fit"],s:'typeof _0==="object"&&"x" in _0'}}," "]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".fit"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Contain"]}," ",{t:7,e:"option",m:[{n:"value",f:"cover",t:13}],f:["Cover"]}," ",{t:7,e:"option",m:[{n:"value",f:"stretch",t:13}],f:["Stretch"]}]}],n:50,x:{r:[".fit"],s:'!_0||typeof _0==="string"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".fit.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:51,l:1}]}]}],"repeater-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Source ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:[".source","@keypath","@this","@context"],s:'[typeof _0==="string"?_2.editExpr(_1+".source"):_2.editReportSrc((_3),".source")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".source"],s:'typeof _0==="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source","")]'}}],n:50,x:{r:[".source"],s:'typeof _0!=="string"'}}],f:["Expression"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".source"],s:'typeof _0!=="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source",{source:""})]'}}],n:50,x:{r:[".source"],s:'typeof _0==="string"'}}],f:["Source"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".source"}],t:13}]}],n:50,x:{r:[".source"],s:'typeof _0==="string"'}}," ",{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source.source"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"",t:13}],f:["(None)"]},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[".name",".source"],s:"_0||_1"}}],t:13}],f:[{t:2,x:{r:[".label",".name",".source"],s:"_0||_1||_2"}}]}],n:52,r:"~/report.sources"}]}],n:50,x:{r:[".source"],s:'typeof _0!=="string"'}}]}]}," ",{t:19,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Show Footer?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"repeater.groupEnds",m:[{t:30,n:"repeater.group.length"}]}}],t:13}]}]}]}],n:50,x:{r:["repeater.footer","repeater.group.length"],s:"_0&&_1"}}],n:54,z:[{n:"repeater",x:{rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1)"}]}}}]}],"measured-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Text ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".text")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".text"}],t:13},{n:"tabout",f:0,t:13}]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"",t:13,g:1}],f:["Metric ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".font.metric"],s:'[(_0).set(".font.metric",typeof _1==="object"?undefined:{x:""})]'}},{n:"title",f:[{t:2,x:{r:[".font.metric"],s:'typeof _0==="object"?"Change to value":"Change to Expression"'}}],t:13}],f:[" ",{t:8,r:"switch"}," "]},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".font.metric.x")]'}}],f:[{t:8,r:"pencil"}]}],n:50,x:{r:[".font.metric"],s:'typeof _0==="object"'}}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".font.metric.x"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:50,x:{r:[".font.metric"],s:'typeof _0==="object"'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.metric"}],t:13}]}],n:51,l:1}]}]}],"container-props":[{t:19,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Show Footer?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"repeater.groupEnds",m:[{r:["repeater.group.length","index"],s:"_0-1-_1"}]}}],t:13}]}]}]}],n:50,x:{r:["repeater.footer","index","repeater.group"],s:"_0&&_2[_1]"}}],n:54,z:[{n:"repeater",x:{rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1,2)"}]}}},{n:"index",x:{x:{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"}}}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Layout"]},{t:7,e:"span",f:[" ",{t:7,e:"select",m:[{t:73,v:"t",f:"false"},{n:"value",f:[{t:2,x:{r:[".layout"],s:'Array.isArray(_0)?"manual":"auto"'}}],t:13},{n:["change"],t:70,f:{r:["@context","@node.value"],s:'[(_0).set(".layout",_1==="manual"?[]:undefined)]'}}],f:[{t:7,e:"option",m:[{n:"value",f:"auto",t:13}],f:["Auto"]}," ",{t:7,e:"option",m:[{n:"value",f:"manual",t:13}],f:["Manual"]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"If bridging is enabled, the container can span multiple pages.",t:13,g:1}],f:["Bridge Breaks?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".bridge"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"If supplied, this expression is evaluated and the result is added to the context stack that the container and its widgets are rendered in.",t:13,g:1}],f:["Context ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".context")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".context"}],t:13},{n:"tabout",f:0,t:13}]}]}]}]}],"html-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["HTML ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".html",{html:true})]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".html"}],t:13},{n:"tabout",f:0,t:13},{n:"template",f:0,t:13}]}]}]}]}],"label-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Text ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".text",{label:true})]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context",".text","@this"],s:'[(_0).set(".text",_2.getPartStrings(_1)),_2.editExpr(".text",{label:true})]'}}],f:["Convert to Text"]}],n:50,x:{r:[".text"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".text"}],t:13},{n:"tabout",f:0,t:13}]}]}],n:51,l:1}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["ID ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Remove aggregate id",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".id",undefined)]'}}],f:[{t:8,r:"times"}]}],n:50,x:{r:[".id"],s:"_0!=null"}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add aggregate id",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".id","")]'}}],f:["+"]}],n:51,l:1}," "]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".id"}],t:13}]}],n:50,x:{r:[".id"],s:"_0!=null"}}]}]}],n:50,x:{r:["@this","~/temp.widget"],s:"_0.inRepeater(_1)"}}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Format ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:4,f:[" ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Remove format",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".format",undefined)]'}}],f:[{t:8,r:"times"}]}],n:50,x:{r:[".format"],s:"_0!=null"}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add format",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".format",{})]'}}],f:["+"]}],n:51,l:1}," "]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".format.name"}],t:13},{n:"style-width",f:"80%",t:13}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add parameter",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".format.args","")]'}}],f:["+"]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"."}],t:13},{n:"style-width",f:"80%",t:13}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Remove parameter",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:[{t:8,r:"times"}]}],n:52,r:".format.args"}],n:50,x:{r:[".format"],s:"_0!=null"}}]}]}],"page-props":[],sure:[],bottom:[{t:7,e:"div",m:[{t:13,n:"class",f:"top actions",g:1}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="params"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","params"),_0.set("show.bottom",true)]'}}],f:["Parameters"]}],n:50,r:"~/report.parameters.length"}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'!_0||_0==="expr"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","expr"),_0.set("show.bottom",true)]'}}],f:[{t:4,f:["Expression"],n:50,r:"~/temp.expr.path"},{t:4,f:["Evaluate"],n:51,l:1}]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="param"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","param"),_0.set("show.bottom",true)]'}}],f:["Parameter"]}],n:50,r:"~/temp.bottom.param"}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="source"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","source"),_0.set("show.bottom",true)]'}}],f:["Source"]}],n:50,r:"~/temp.bottom.source"}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"which",g:1}],f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("expr")]'}}],f:[{t:8,r:"times"}]}," ",{t:2,x:{r:["~/temp.expr.path"],s:'_0.replace(/\\./g," 〉 ")'}}],n:50,x:{r:["~/temp.expr.path","~/temp.bottom.tab"],s:'_0&&(!_1||_1==="expr")'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("param")]'}}],f:[{t:8,r:"times"}]}," Parameter ",{t:2,x:{r:["@this","~/temp.bottom.param"],s:"+_0.lastKey(_1)+1"}}],n:50,x:{r:["~/temp.bottom.param","~/temp.bottom.tab"],s:'_0&&_1==="param"'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("source")]'}}],f:[{t:8,r:"times"}]}," Source ",{t:2,x:{r:["@this","~/temp.bottom.source"],s:"+_0.lastKey(_1)+1"}}],n:50,x:{r:["~/temp.bottom.source","~/temp.bottom.tab"],s:'_0&&_1==="source"'}}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"style",f:"height: 2.5rem;",g:1},{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.toggle("max.bottom")]'}},{n:"class",f:[{t:4,f:["down"],n:50,r:"~/max.bottom"},{t:4,f:["up"],n:51,l:1},"-arrow"],t:13}],f:[{t:8,r:"arrow"}]}],n:50,r:"~/show.bottom"}," ",{t:7,e:"button",m:[{t:13,n:"style",f:"height: 2.5rem;",g:1},{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.toggle("show.bottom")]'}},{n:"class",f:[{t:4,f:["down"],n:50,r:"~/show.bottom"},{t:4,f:["up"],n:51,l:1},"-arrow"],t:13}],f:[{t:8,r:"arrow"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"bottom",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'!_0||_0==="expr"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["~/temp.expr.str"],s:"!_0"}}],t:13},{n:["click"],t:70,f:{r:["@this"],s:"[_0.eval()]"}},{n:"class-error",t:13,f:[{t:2,r:"~/temp.expr.error"}]}],f:[{t:8,r:"play"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="text"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","text")]'}}],f:[{t:4,f:["Template"],n:50,r:"~/temp.expr.template"},{t:4,f:["Text"],n:51,l:1}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fmt()]"}}],f:["Format"]}],n:50,x:{r:["~/temp.expr.tab","~/temp.expr.template"],s:'_0==="text"&&!_1'}}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/temp.expr.template"}],t:13}]}," Template"]}],n:50,x:{r:["~/temp.expr.tab","~/temp.expr.path"],s:'_0==="text"&&!_1'}}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.html"],s:'_0?"":"none"'}}],t:13},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="html"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","html")]'}}],f:["HTML"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 2;",g:1}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="result"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","result")]'}}],f:["Result"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="parsed"'}}]},{n:"class-error",t:13,f:[{t:2,r:"~/temp.expr.error"}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","parsed")]'}}],f:["Parsed"]}],n:50,r:"~/temp.expr.parsed"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab text",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'!_0||_0==="text"'}}]}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"display: flex; justify-content: space-between;",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context","@this",".str"],s:'[(_0).set(".str",_1.getPartStrings(_2))]'}}],f:["Convert to Text"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".str","")]'}},{n:"title",f:"Add part",t:13,g:1}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"label-part",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}},{n:"title",f:"Remove part",t:13,g:1}],f:[{t:8,r:"times"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico up-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.moveUp((_1))]"}},{n:"title",f:"Move up",t:13,g:1}],f:[{t:8,r:"arrow"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer down-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.moveDown((_1))]"}},{n:"title",f:"Move down",t:13,g:1}],f:[{t:8,r:"arrow"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context","."],s:'[(_0).set(".",{text:_1})]'}},{n:"title",f:"Format part",t:13,g:1}],f:["F"]}," ",{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:"."}],t:13},{n:"primary",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:["click"],t:70,f:{r:["@context",".text"],s:'[(_0).set(".",_1)]'}},{n:"title",f:"Plain part",t:13,g:1}],f:["T"]}," ",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".id"}],t:13},{n:"placeholder",f:"Tracking ID",t:13},{n:"title",f:"Track this value by assigning it a unique ID",t:13}]}," ",{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".text"}],t:13},{n:"primary",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Font Family",t:13},{n:"placeholder",f:"Font Family",t:13},{n:"value",f:[{t:2,r:".font.family"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Color",t:13},{n:"placeholder",f:"Color",t:13},{n:"value",f:[{t:2,r:".font.color"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Size",t:13},{n:"placeholder",f:"Size (1)",t:13},{n:"value",f:[{t:2,r:".font.size"}],t:13},{n:"type",f:"number",t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Line Height",t:13},{n:"placeholder",f:["Line Height (",{t:2,x:{r:[".font.size"],s:"_0==null?1:_0"}},")"],t:13},{n:"value",f:[{t:2,r:".font.line"}],t:13},{n:"type",f:"number",t:13}]}," ",{t:7,e:"select",m:[{n:"title",f:"Font Weight",t:13},{n:"value",f:[{t:2,r:".font.weight"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Font Weight"]}," ",{t:7,e:"option",m:[{n:"value",f:"400",t:13}],f:["light"]}," ",{t:7,e:"option",m:[{n:"value",f:"500",t:13}],f:["normal"]}," ",{t:7,e:"option",m:[{n:"value",f:"600",t:13}],f:["bold"]}," ",{t:7,e:"option",m:[{n:"value",f:"700",t:13}],f:["bolder"]}]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".font.pre"}],t:13}]}," Significant whitespec?"]}," ",{t:7,e:"input",m:[{n:"title",f:"Background Color",t:13},{n:"placeholder",f:"Background",t:13},{n:"value",f:[{t:2,r:".bg"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Border Radius",t:13},{n:"placeholder",f:"Radius",t:13},{n:"value",f:[{t:2,r:".radius"}],t:13}]}],n:51,l:1}]}],n:52,r:".str"}]}]}],n:50,x:{r:[".str"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context",".str"],s:'[(_0).set(".str",[_1])]'}}],f:["Convert to Parts"]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".str"}],t:13},{n:"template",f:[{t:2,x:{r:[".html",".template"],s:"_0||_1"}}],t:13},{n:["run"],t:70,f:{r:["@this"],s:"[_0.eval()]"}},{n:"primary",f:0,t:13}]}]}]}],n:51,l:1}],n:50,r:".label"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".str"}],t:13},{n:"template",f:[{t:2,x:{r:[".html",".template"],s:"_0||_1"}}],t:13},{n:["run"],t:70,f:{r:["@this"],s:"[_0.eval()]"}},{n:"primary",f:0,t:13}]}]}]}],n:51,l:1}],n:54,r:"~/temp.expr"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab html",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="html"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor-buttons",g:1}],f:[{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("bold")]'}},{n:"title",f:"Bold",t:13,g:1}],f:[{t:7,e:"strong",f:["B"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("italic")]'}},{n:"title",f:"Italic",t:13,g:1}],f:[{t:7,e:"em",f:["I"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("underline")]'}},{n:"title",f:"Underline",t:13,g:1}],f:[{t:7,e:"span",m:[{t:13,n:"style",f:"text-decoration: underline;",g:1}],f:["U"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("strikeThrough")]'}},{n:"title",f:"Strike Through",t:13,g:1}],f:[{t:7,e:"span",m:[{t:13,n:"style",f:"text-decoration: line-through;",g:1}],f:["S"]}]}," ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/temp.fontSize"}],t:13},{n:["change"],t:70,f:{r:["@this"],s:"[_0.setHTMLFontSize()]"}},{n:"title",f:"Change Font Size",t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"",t:13}],f:["(font size)"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"1"}}],t:13}],f:["smallest"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"2"}}],t:13}],f:["smaller"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"3"}}],t:13}],f:["small"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"4"}}],t:13}],f:["regular"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"5"}}],t:13}],f:["large"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"6"}}],t:13}],f:["larger"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"7"}}],t:13}],f:["largest"]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"html-editor",g:1},{n:"contenteditable",f:"true",t:13},{n:"value",f:[{t:2,r:"~/temp.expr.htmlstr"}],t:13},{n:"id",f:"expr-html",t:13,g:1}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab result",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="result"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor-buttons",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'!_0||_0==="plain"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","plain")]'}}],n:50,x:{r:["t"],s:'_0&&_0!=="plain"'}},{n:"title",f:"Show result as a plain string",t:13,g:1}],f:["Plain"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'_0==="json"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","json")]'}}],n:50,x:{r:["t"],s:'_0!=="json"'}},{n:"title",f:"Show result as JSON",t:13,g:1}],f:["JSON"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'_0==="html"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","html")]'}}],n:50,x:{r:["t"],s:'_0!=="html"'}},{n:"title",f:"Show result as HTML",t:13,g:1}],f:["HTML"]}],n:54,z:[{n:"t",x:{r:"~/temp.expr.resulttype"}}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"span",m:[{n:"style",f:["color: ",{t:2,r:"@style.code.c12"},";"],t:13}],f:["undefined"]}],n:50,x:{r:["~/temp.expr.result"],s:"_0===undefined"}},{t:4,f:[{t:4,f:[{t:3,r:"~/temp.expr.result"}],n:50,x:{r:["~/temp.expr.resulttype"],s:'_0==="html"'}},{t:4,f:[{t:7,e:"code",f:[{t:7,e:"pre",f:[{t:2,x:{r:["~/temp.expr.result"],s:'JSON.stringify(_0,null,"  ")'}}]}]}," "],n:50,x:{r:["~/temp.expr.resulttype"],s:'_0==="json"'},l:1},{t:4,f:[" ",{t:7,e:"code",f:[{t:7,e:"pre",f:[{t:2,r:"~/temp.expr.result"}]}]}],n:51,l:1}],n:51,l:1}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab parsed",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="parsed"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"code",f:[{t:7,e:"pre",m:[{t:13,n:"style",f:"margin: 1em;",g:1}],f:[{t:2,r:"~/temp.expr.parsed"}]}]}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"context",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="ast"||_0==="text"||_0==="html"?"":"none"'}}],t:13}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:["Context"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"panel scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:8,r:"expr-context",c:{r:"~/temp.expr.ctx"}}],n:50,r:"~/temp.expr.ctx"}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"ops",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="ast"||_0==="text"||_0==="html"?"":"none"'}}],t:13}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:["Operators"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"panel scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:2,x:{r:["~/temp.expr.tab","@context"],s:'_0==="ast"&&(_1).decorators.scrolled&&(_1).decorators.scrolled.invalidate()||""&&""'}}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"entry-details",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"expr-operator",g:1},{n:["click"],t:70,f:{r:["@this","@key"],s:"[_0.insertOp(_1)]"}}],f:[{t:2,r:"@key"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"entry-type",g:1}],f:[{t:2,r:".type"}]}]}],n:52,r:"~/operators"}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="param"'}}]}],f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Type"]},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".type"}],t:13}],f:[{t:8,r:"types"}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Refine"]},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".refine"}],t:13}],f:[" ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(none)"]}," ",{t:7,e:"option",m:[{n:"value",f:"text",t:13}],f:["Multiline Text"]}," ",{t:7,e:"option",m:[{n:"value",f:"code",t:13}],f:["Expression"]}]}]}],n:50,x:{r:[".type"],s:'_0==="string"'}}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".required"}],t:13}]}," Require?"]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Label"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".label"}],t:13}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".init","")]'}}]}," Initialization expression?"]}],n:50,x:{r:[".init"],s:"_0===undefined"}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:0,t:13},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".init",undefined)]'}}]}," Initialization expression?"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"height: 5em; border: 1px solid #ccc; overflow: auto; margin-right: 1em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".init"}],t:13}]}]}],n:51,l:1}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,x:{r:[".options"],s:"Array.isArray(_0)"}}],t:13},{n:["change"],t:70,f:{r:["@context",".options"],s:'[(_0).set(".options",Array.isArray(_1)?undefined:[])]'}}]}," Options?"]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"height: 100%; width: 30rem;",g:1},{t:13,n:"class",f:"options",g:1}],f:[{t:7,e:"h3",f:["Options"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"option-entry",g:1}],f:[{t:19,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Label"]},{t:7,e:"br"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"ctx.label"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Value"]},{t:7,e:"br"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"ctx.value"}],t:13}]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["ctx.value"],s:"!_0"}}],t:13},{n:["click"],t:70,f:{r:["ctx.label","ctx.value","@context"],s:'[(_2).push(".options",!_0?_1:{label:_0,value:_1}),(_2).set({"ctx.label":"","ctx.value":""})]'}}],f:["+"]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"."}],t:13}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".label"}],t:13}]}," ",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".value"}],t:13}]}],n:51,l:1}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:[{t:8,r:"times"}]}]}],n:52,r:".options"}]}]}],n:50,r:".options"}]}],n:50,x:{r:[".options"],s:"Array.isArray(_0)"}}],n:54,r:"~/param"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="params"'}}]}],f:[{t:8,r:"bottom-parameters"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="source"'}}]}],f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Source"]},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source"}],t:13}],f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:".name"}]}],n:52,r:"~/sources"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Base ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".base")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".base"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Filter ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".filter")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".filter"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Sort ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".sort")]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".sort"}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"height: 100%; width: 20rem;",g:1},{t:13,n:"class",f:"options",g:1}],f:[{t:7,e:"h3",f:[{t:7,e:"button",m:[{t:13,n:"style",f:"float: right;",g:1},{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add group",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".group","")]'}}],f:["+"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".group"}],t:13},{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".group",undefined)]'}}]}," Groups"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"group-edit",g:1}],f:[{t:7,e:"span",f:[{t:2,x:{r:["@index"],s:"_0+1"}}]}," ",{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:"."}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit group expression",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr("~/"+_1)]'}}],f:[{t:8,r:"pencil"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Remove group",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:[{t:8,r:"times"}]}]}],n:52,r:".group"}]}]}]}],n:50,x:{r:[".group"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".group",[""])]'}}]}," Group?"]}],n:51,l:1}],n:54,r:"~/source"}]}]}," ",{t:7,e:"datalist",m:[{n:"id",f:"operators",t:13,g:1}],f:[{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"@key"}],t:13}]}],n:52,r:"~/operators"}]}],"expr-context":[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"context-entry",g:1},{n:"class-expanded",t:13,f:[{t:2,rx:{r:"~/exprExpand",m:[{t:30,n:"@keypath"}]}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"entry-details",g:1}],f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"expand",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.exprToggle(_1)]"}}],f:[{t:2,x:{r:["@keypath","~/exprExpand"],s:'_1[_0]?"-":"+"'}}]}],n:50,r:".fields"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"entry-name",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.insertRef(_1)]"}}],f:[{t:2,r:".name"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"entry-type",g:1}],f:[{t:2,r:".type"}]}]}," ",{t:4,f:[{t:8,r:"expr-context"}],n:50,r:".fields"}]}],n:52,r:".fields"}],"ast-dim-actions":[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["../","@index","@context"],s:'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]'}}],f:[{t:8,r:"times"}]}]}],"ast-actions":[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-actions",g:1}],f:[{t:4,f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source",{r:""})]'}}],f:["+ Source"]}],n:51,r:".source"}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".apply",{r:""})]'}}],f:["+ Application"]}],n:51,r:".apply"}],n:50,x:{r:[".op","~/operators"],s:'_1[_0]&&_1[_0].type==="aggregate"'}}," ",{t:7,e:"select",m:[{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@keypath","@node.value"],s:"[_0.retypeASTNode(_1,_2)]"}},{n:"value",f:[{t:2,x:{r:[".v","."],s:'_1&&"op" in _1?"operator":_1&&"v" in _1?(typeof _0==="string"?"string":typeof _0==="number"?"number":"object"):_1&&"r" in _1?"reference":"undefined"'}}],t:13}],f:[{t:7,e:"option",f:["operator"]}," ",{t:7,e:"option",f:["string"]}," ",{t:7,e:"option",f:["number"]}," ",{t:7,e:"option",f:["reference"]}," ",{t:7,e:"option",f:["undefined"]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["../","@index","@context"],s:'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]'}}],f:[{t:8,r:"times"}]}]}],"ast-node":[{t:7,e:"div",m:[{n:["click"],t:70,f:{r:["~/temp.expr.partpath","@this","@keypath"],s:'[_0!==_2&&[_1.link(_2,"temp.expr.part"),_1.set("temp.expr.partpath",_2)],false]'}},{n:"class",f:["ast-node ast-",{t:2,x:{r:["."],s:'(_0&&("op" in _0?"op":"v" in _0?"value":"r" in _0?"ref":"wat"))||"wat"'}}],t:13},{n:"class-ast-active-node",t:13,f:[{t:2,x:{r:["~/temp.expr.partpath","@keypath"],s:"_0===_1"}}]}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-op-name",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},"(",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".op"}],t:13},{n:"list",f:"operators",t:13}]}]},{t:8,r:"ast-actions"}]}," ",{t:4,f:[{t:8,r:"ast-node"}],n:52,r:".args"}," ",{t:7,e:"div",f:[") ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".args",{v:""})]'}}],f:["+"]}]}],n:50,x:{r:["."],s:'_0&&"op" in _0'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-value",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"}," ",{t:4,f:[{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13},{n:"cols",f:"30",t:13}],f:[{t:2,r:".v"}]}],n:50,x:{r:[".v"],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".v"}],t:13},{n:"type",f:"number",t:13}]}],n:50,x:{r:[".v"],s:'typeof _0==="number"'},l:1}]}," ",{t:8,r:"ast-actions"}]}," "],n:50,x:{r:["."],s:'_0&&"v" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-ref",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".r"}],t:13}]}]}," ",{t:8,r:"ast-actions"}]}],n:50,x:{r:["."],s:'_0&&"r" in _0'},l:1}]}],n:50,x:{r:["~/temp.expr.partpath","@keypath"],s:"_0===_1"}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-op-name",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},"(",{t:2,r:".op"}]},{t:8,r:"ast-dim-actions"}]}," ",{t:4,f:[{t:4,f:[{t:8,r:"ast-node",c:{r:".source"},z:[{n:"prefix",x:{x:{r:[],s:'"+ "'}}}]}],n:50,r:".source"}," ",{t:4,f:[{t:8,r:"ast-node",c:{r:".apply"},z:[{n:"prefix",x:{x:{r:[],s:'"=> "'}}}]}],n:50,r:".apply"}],n:50,x:{r:[".op","~/operators"],s:'_1[_0]&&_1[_0].type==="aggregate"'}}," ",{t:4,f:[{t:8,r:"ast-node"}],n:52,r:".args"}," )"],n:50,x:{r:["."],s:'_0&&"op" in _0'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-value",g:1}],f:[{t:7,e:"div",m:[{n:"class-ast-string",t:13,f:[{t:2,x:{r:[".v"],s:'typeof _0==="string"'}}]},{n:"class-ast-number",t:13,f:[{t:2,x:{r:[".v"],s:'typeof _0==="number"'}}]}],f:[{t:2,r:"prefix"},{t:2,r:".v"}]},{t:8,r:"ast-dim-actions"}]}," "],n:50,x:{r:["."],s:'_0&&"v" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-ref",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},{t:2,r:".r"}," (ref)"]},{t:8,r:"ast-dim-actions"}]}],n:50,x:{r:["."],s:'_0&&"r" in _0'},l:1}]}],n:51,l:1}]}],"bottom-parameters":[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this","params"],s:'[_0.set("report.defaultParams",_1)]'}},{n:"title",f:"Save these values as the report defaults",t:13,g:1}],f:["Save as Defaults"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico text",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.initParams()]"}},{n:"title",f:"Re-initialize all parameters",t:13,g:1}],f:["Re-init Params"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-editor",g:1}],f:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param",g:1}],f:[{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"check",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}," ",{t:2,x:{r:[".label",".name"],s:"_0||_1"}},"?"]}],n:50,x:{r:[".type"],s:'_0==="boolean"'}},{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"pick",g:1}],f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}},{t:7,e:"select",m:[{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}],f:[" ",{t:4,f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:"."}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:".value"}],t:13}],f:[{t:2,r:".label"}]}],n:51,l:1}],n:52,r:".options"}]}]}," "],n:50,r:".options.length",l:1},{t:4,f:[" ",{t:4,f:[{t:7,e:"div",f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"height: 5em; border: 1px solid #ccc; overflow: auto;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}]}],n:50,x:{r:[".refine"],s:'_0==="code"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"div",f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}}]}," ",{t:7,e:"textarea",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}]}]}," "],n:50,x:{r:[".refine"],s:'_0==="text"'},l:1},{t:4,f:[" ",{t:7,e:"label",m:[{t:13,n:"class",f:"string",g:1}],f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}}," ",{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}]}],n:51,l:1}," "],n:50,x:{r:[".type"],s:'_0==="string"'},l:1},{t:4,f:[" ",{t:7,e:"label",m:[{t:13,n:"class",f:"string",g:1}],f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}],n:50,x:{r:[".type"],s:'_0==="number"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}],n:51,l:1}]}],n:51,l:1}]}],n:50,r:".name"}],n:52,r:"~/report.parameters"}]}]}]}],left:[{t:7,e:"div",m:[{t:13,n:"class",f:"left properties",g:1},{n:"class-popped",t:13,f:[{t:2,r:"~/show.props"}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"properties-pull",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.toggle("~/show.props")]'}}],f:[{t:7,e:"button",m:[{n:"class",f:["ico large ",{t:2,x:{r:["~/show.props"],s:'_0?"left":"right"'}},"-arrow"],t:13}],f:[{t:8,r:"arrow"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"height: 3rem;",g:1},{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:[{t:4,f:["Moving..."],n:50,r:"~/reparent"},{t:4,f:["Widgets"],n:51,l:1}]}," ",{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/add"}],t:13},{n:["change"],t:70,f:{r:["@this","@node.value"],s:"[_0.addWidget(_1)]"}}],f:[{t:7,e:"option",f:["container"]}," ",{t:7,e:"option",f:["label"]}," ",{t:7,e:"option",f:["repeater"]}," ",{t:7,e:"option",f:["html"]}," ",{t:7,e:"option",f:["image"]}," ",{t:7,e:"option",f:["measured"]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this","~/add"],s:"[_0.addWidget(_1)]"}}],f:["+"]}],n:50,x:{r:["~/report.type","~/widget.type","~/temp.widget"],s:'_0!=="delimited"&&(_1==="container"||_2==="report")'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("reparent",undefined)]'}},{n:"title",f:"Cancel move",t:13,g:1}],f:[{t:8,r:"reparent",z:[{n:"cancel",x:{x:{r:[],s:"true"}}}]}]}],n:50,r:"~/reparent"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.treeScrollToActive()]"}},{n:"title",f:"Scroll active widget into view",t:13,g:1}],f:[{t:8,r:"scrollto"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper widget-tree",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"tree",g:1},{n:"scrolled",t:71},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget"],s:'_0==="report"'}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover"],s:'_0==="report"'}}]},{n:["click"],t:70,f:{r:["~/reparent","@context","@this"],s:'[_0?_2.reparent((_1)):_2.selectWidget("report")]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover","report"),false]'}}],f:["Report"]}," ",{t:4,f:[{t:8,r:"delimited-fields"}],n:50,x:{r:["report.type"],s:'_0==="delimited"'}},{t:4,f:[{t:8,r:"widget-tree"}],n:51,l:1}]}],n:54,r:"report"}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:[{t:2,x:{r:["~/temp.name.0"],s:"_0.toUpperCase()"}},{t:2,x:{r:["~/temp.name"],s:"_0.substr(1)"}},"Properties"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"growy",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sheet",g:1}],f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr("report.name",{template:true}),false]'}}],f:[{t:8,r:"pencil"}]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"style",f:"padding: 0; overflow: auto; max-height: 5em;",g:1}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:"report.name"}],t:13},{n:"tabout",f:0,t:13},{n:"template",f:0,t:13}]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Type"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.type"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"page",t:13}],f:["Paged"]}," ",{t:7,e:"option",m:[{n:"value",f:"flow",t:13}],f:["Continuous"]}," ",{t:7,e:"option",m:[{n:"value",f:"delimited",t:13}],f:["Delimited"]}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Combine styles into classes?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"report.classifyStyles"}],t:13}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Paper size"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.size"}],t:13}],f:[{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"."}],t:13}],f:[{t:2,r:"@key"}]}],n:52,r:"~/pageSizes"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Orientation"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.orientation"}],t:13}],f:[{t:7,e:"option",f:["landscape"]}," ",{t:7,e:"option",f:["portrait"]}]}]}]}],n:50,x:{r:["report.type"],s:'_0==="page"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Width"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"report.width"}],t:13}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Paper size"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.size"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(None)"]},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"."}],t:13}],f:[{t:2,r:"@key"}]}],n:52,r:"~/pageSizes"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Orientation"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.orientation"}],t:13}],f:[{t:7,e:"option",f:["landscape"]}," ",{t:7,e:"option",f:["portrait"]}]}]}]}],n:50,x:{r:["report.width"],s:"!_0"}}],n:51,l:1}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Text Size"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/report.font.size"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Line Height"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"~/report.font.line"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Font Family"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"~/report.font.family"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Text Color"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"~/report.font.color"}],t:13}]}]}]}],n:50,x:{r:["report.type"],s:'_0!=="delimited"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Record Delimiter"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.record"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Field Delimiter"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.field"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Quote"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.quote"}],t:13}]}]}]}],n:51,l:1}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Parameters"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.parameters",{})]'}}],f:["+"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"parameter head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param-name",g:1}],f:["Name"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-type",g:1}],f:["Type"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"width: 30%;",g:1},{t:13,n:"class",f:"param-require",g:1}],f:["Require"]}]}],n:50,r:"report.parameters"}," ",{t:7,e:"div",f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"parameter",g:1},{n:["focusin"],t:70,f:{r:["@this","@context"],s:"[_0.editParam((_1))]"}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-type",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".type"}],t:13}],f:[{t:8,r:"types"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-require",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".required"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("param",_1),(_2).splice("../",_3,1)]'}}],f:[{t:8,r:"times"}]}]}]}],n:52,r:"report.parameters"}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Provided Sources"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("sources",{})]'}}],f:["+"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src-name",g:1}],f:["Name"]}]}],n:50,r:"~/sources"}," ",{t:7,e:"div",f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"src-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Import data...",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editProvidedData((_1))]"}}],f:[{t:8,r:"pencil"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Log data to console...",t:13,g:1},{n:["click"],t:70,f:{r:["@this","."],s:"[_0.logData(_1)]"}}],f:[{t:8,x:{r:[],s:'"console"'}}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("import",_1),(_2).splice("../",_3,1)]'}}],f:[{t:8,r:"times"}]}]}]}],n:52,r:"~/sources"}]}],n:50,r:"~/sources"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"justify-content: center;",g:1},{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("sources",{})]'}},{n:"title",f:"Create a new source of data to reference from a report source",t:13,g:1}],f:["Provide Source"]}]}],n:51,l:1}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Source",{t:4,f:["s"],n:50,x:{r:["report.type"],s:'_0!=="delimited"'}}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.sources",{name:"",parameters:{}})]'}}],f:["+"]}],n:50,x:{r:["report.type","report.sources.length"],s:'_0!=="delimited"||_1<1'}}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"width: 100%;",g:1},{t:13,n:"class",f:"src-name",g:1}],f:["Name"]}]}],n:50,r:"report.sources.length"}," ",{t:7,e:"div",f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src",g:1},{n:["focusin"],t:70,f:{r:["@this","@context"],s:"[_0.editReportSrc((_1))]"}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-src",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source"}],t:13}],f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:".name"}]}],n:52,r:"~/sources"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("source",_1),(_2).splice("../",_3,1)]'}}],f:[{t:8,r:"times"}]}]}]}],n:52,r:"report.sources"}]}],n:50,x:{r:["~/temp.widget"],s:'_0==="report"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sheet",g:1}],f:[{t:4,f:[{t:8,x:{r:[".type"],s:'_0+"-props"'}}," ",{t:8,r:"widget-props"}],n:54,r:"~/widget"}]}]}]}],n:50,r:"~/widget",l:1}]}]}],n:50,r:"~/temp.widget"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"placeholder",g:1}],f:["Click on a Widget"]}],n:51,l:1}]}],"delimited-fields":[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited children",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["@keypath","~/temp.expr.path"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["@keypath","~/temp.expr.hover"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.expr.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.hover",""),false]'}}],f:[{t:7,e:"span",f:[{t:2,x:{r:["@index"],s:"_0+1"}},". ",{t:2,r:"."}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico field up-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["~/report.header","@this","@context","@index"],s:'[_1.moveUp((_2),"../",_3),_0&&_1.moveUp((_2),"~/report.header",_3),false]'}}],f:[{t:8,r:"arrow"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico field down-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["~/report.header","@this","@context","@index"],s:'[_1.moveDown((_2),"../",_3),_0&&_1.moveDown((_2),"~/report.header",_3),false]'}}],f:[{t:8,r:"arrow"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico field remove",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1))]"}}],f:[{t:8,r:"times"}]}]}]}],n:52,r:".fields"}]}],"widget-tree":[{t:7,e:"div",m:[{t:13,n:"class",f:"children",g:1}],f:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:[".type","~/reparent","@context","@this","@keypath"],s:'[_1&&_0==="container"&&_4.indexOf(_1.resolve())===-1?_3.reparent((_2)):_3.selectWidget(_4),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],f:[{t:7,e:"span",f:["group ",{t:2,x:{r:["@index"],s:"_0+1"}}]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico up-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.moveUp((_1)),_0.moveUp((_1),"^^/groupEnds"),false]'}},{n:"title",f:"Move up",t:13,g:1}],f:[{t:8,r:"arrow"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico down-arrow",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.moveDown((_1)),_0.moveDown((_1),"^^/groupEnds"),false]'}},{n:"title",f:"Move down",t:13,g:1}],f:[{t:8,r:"arrow"},">"]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico remove",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}},{n:"title",f:"Remove",t:13,g:1}],f:[{t:8,r:"times"}]}]}," ",{t:8,r:"widget-tree"}]}],n:52,r:".group"}],n:50,x:{r:[".type",".group"],s:'_0==="repeater"&&_1'}}," ",{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:[".type","~/reparent","@context","@this","@keypath"],s:'[_1&&_0==="container"&&_4.indexOf(_1.resolve())===-1?_3.reparent((_2)):_3.selectWidget(_4),false]'}},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1}],f:[{t:7,e:"span",f:[{t:2,r:"@key"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico remove",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:[{t:8,r:"times"}]}],n:50,x:{r:["@key","../type"],s:'_0!=="row"||_1!=="repeater"'}}]}," ",{t:8,r:"widget-tree"}]}],n:50,x:{r:[".type"],s:'_0==="container"'}}],n:52,r:"."}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:"class-moving",t:13,f:[{t:2,x:{r:["@keypath","~/reparent"],s:"_1&&_0===_1.resolve()"}}]},{n:["click"],t:70,f:{r:[".type","~/reparent","@context","@this","@keypath"],s:'[_1&&_1.resolve()===_4?_3.set("reparent",undefined):_1&&_0==="container"&&_4.indexOf(_1.resolve())===-1?_3.reparent((_2)):_3.selectWidget(_4),false]'}},{t:4,f:[{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],n:50,x:{r:[".type","@keypath","~/reparent"],s:'!_2||_0==="container"&&_1.indexOf(_2.resolve())===-1'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1}],f:[{t:7,e:"span",f:[{t:2,r:".type"}]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Move to another container",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.set("reparent",(_1)),false]'}}],f:[{t:8,r:"reparent"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico up-arrow",g:1},{n:"title",f:"Move up",t:13,g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["^^/layout","@this","@context"],s:'[_1.moveUp((_2)),Array.isArray(_0)?_1.moveUp((_2),"^^/layout"):false,false]'}}],f:[{t:8,r:"arrow"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico down-arrow",g:1},{n:"title",f:"Move down",t:13,g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["^^/layout","@this","@context"],s:'[_1.moveDown((_2)),Array.isArray(_0)?_1.moveDown((_2),"^^/groupEnds"):false,false]'}}],f:[{t:8,r:"arrow"}]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico remove",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:[{t:8,r:"times"}]}],n:50,x:{r:["~/reparent"],s:"!_0"}}]}," ",{t:8,r:"widget-tree"}]}],n:52,r:".widgets"}]}],warning:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"M 7.9999999,1.3419993 A 0.51954981,0.51954981 0 0 0 7.5501881,1.6016783 L 0.46200598,13.878401 A 0.51954981,0.51954981 0 0 0 0.91181778,14.658 H 15.088182 a 0.51954981,0.51954981 0 0 0 0.449812,-0.779599 L 8.4498118,1.6016783 A 0.51954981,0.51954981 0 0 0 7.9999999,1.3419993 Z m 0,1.5580761 6.1879971,10.7186456 H 1.8120026 Z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"M 7.5117187,5.7675781 V 10.755859 H 8.4882813 V 5.7675781 Z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"m 7.5097656,11.556641 v 1.058593 h 0.9804688 v -1.058593 z",t:13,g:1}]}]}],autosize:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 7.8643604,1.1461781 c -0.1252288,1.027e-4 -0.2452523,0.050113 -0.333504,0.13896 L 3.8599966,4.9559978 c -0.1847627,0.1839512 -0.1847627,0.4830568 0,0.667008 0.1836871,0.1832173 0.4810049,0.1832173 0.664692,0 L 7.3942123,2.7534819 V 14.081037 L 4.5246886,11.213829 c -0.1836871,-0.183218 -0.4810049,-0.183218 -0.664692,0 -0.1832174,0.183687 -0.1832174,0.481004 0,0.664692 l 3.6708598,3.673175 c 0.088631,0.088 0.1892895,0.136645 0.333504,0.136645 0.1442144,0 0.2225519,-0.0257 0.3335039,-0.136645 0.1109522,-0.110954 3.6708597,-3.673175 3.6708597,-3.673175 0.183218,-0.183688 0.183218,-0.481005 0,-0.664692 -0.183951,-0.184763 -0.483057,-0.184763 -0.667008,0 L 8.3345084,14.081037 V 2.7534819 l 2.8672076,2.8695239 c 0.183951,0.1847627 0.483057,0.1847627 0.667008,0 0.184763,-0.1839512 0.184763,-0.4830568 0,-0.667008 L 8.1978643,1.2851381 C 8.1096126,1.1962906 7.9895891,1.1462808 7.8643604,1.1461781 Z",t:13,g:1}]}]}],times:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 3.081157,3.2367593 a 0.39687499,0.39687499 0 0 0 -0.28125,0.1171875 0.39687499,0.39687499 0 0 0 0,0.5605469 L 7.3038132,8.4184 2.799907,12.920353 a 0.39687499,0.39687499 0 0 0 0,0.560547 0.39687499,0.39687499 0 0 0 0.5625,0 L 7.8643601,8.9789468 12.368266,13.4809 a 0.39687499,0.39687499 0 0 0 0.560547,0 0.39687499,0.39687499 0 0 0 0,-0.560547 L 8.424907,8.4184 12.928813,3.9144937 a 0.39687499,0.39687499 0 0 0 0,-0.5605469 0.39687499,0.39687499 0 0 0 -0.560547,0 L 7.8643601,7.8558999 3.362407,3.3539468 A 0.39687499,0.39687499 0 0 0 3.081157,3.2367593 Z",t:13,g:1}]}]}],eye:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"M 8.0292969,3.84375 C 5.8187216,3.7959779 3.2719166,4.828582 0.6875,7.9414062 L 0.47851563,8.1933594 0.68554687,8.4472656 C 4.2213376,12.771626 7.6072279,13.362529 10.207031,12.503906 12.806835,11.645284 14.588183,9.4664365 15.279297,8.4121094 L 15.449219,8.1542969 15.240234,7.9257812 C 14.56764,7.1977999 12.721311,5.0903713 10.117188,4.2148437 9.4661566,3.9959619 8.7661553,3.859674 8.0292969,3.84375 Z M 8.0019531,4.6191406 C 8.6565753,4.6408129 9.2772607,4.769772 9.8632813,4.9667969 12.042444,5.6994492 13.625228,7.3762655 14.40625,8.2207031 13.700218,9.2262323 12.130956,11.032675 9.9589844,11.75 7.7038396,12.494794 4.8499214,12.067539 1.5566406,8.1992188 3.9323632,5.4612889 6.1082738,4.5564473 8.0019531,4.6191406 Z",t:13,g:1}]}," ",{t:7,e:"circle",m:[{n:"r",f:"3.5391803",t:13,g:1},{n:"cy",f:"8.3395138",t:13,g:1},{n:"cx",f:"8.0542507",t:13,g:1},{n:"fill",f:"#000",t:13,g:1}]}]}],play:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"M 2.5273438,2.1328125 A 0.39691468,0.39691468 0 0 0 2.328125,2.4765625 V 14.357422 a 0.39691468,0.39691468 0 0 0 0.5957031,0.34375 L 13.201172,8.7675781 a 0.39691468,0.39691468 0 0 0 0,-0.6875 L 2.9238281,2.1328125 a 0.39691468,0.39691468 0 0 0 -0.3964843,0 z m 0.5957031,1.03125 9.0878911,5.2597656 -9.0878911,5.2460939 z",t:13,g:1}]}]}],pencil:[{t:7,e:"svg",m:[{t:13,n:"class",f:"pencil",g:1},{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 10.574807,3.7181493 1.230348,-1.230348 c 0.786061,-0.1047571 2.169305,1.3270952 2.115927,2.0909526 l -1.24767,1.2476704 z m 0,0 L 12.677529,5.825142 5.136945,13.365724 3.5226704,13.820162 1.9083957,14.2746 2.5400804,12.67292 3.1717651,11.07124 10.574806,3.718149 Z",t:13,g:1}]}]}],console:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 2.5800781,4.140625 a 0.39687499,0.39687499 0 0 0 -0.2773437,0.1230469 0.39687499,0.39687499 0 0 0 0.011719,0.5625 L 5.9921875,8.3320313 2.3085938,12.015625 a 0.39687499,0.39687499 0 0 0 0,0.5625 0.39687499,0.39687499 0 0 0 0.5605468,0 L 6.8417969,8.6054688 a 0.39687499,0.39687499 0 0 0 0.00391,-0.00391 0.39687499,0.39687499 0 0 0 0.00195,-0.00195 0.39687499,0.39687499 0 0 0 0.00977,-0.015625 0.39687499,0.39687499 0 0 0 0.076172,-0.1425781 0.39687499,0.39687499 0 0 0 0.011719,-0.060547 A 0.39687499,0.39687499 0 0 0 6.9433594,8.25 0.39687499,0.39687499 0 0 0 6.9316406,8.1992188 0.39687499,0.39687499 0 0 0 6.8417969,8.0449219 a 0.39687499,0.39687499 0 0 0 -0.00391,0 0.39687499,0.39687499 0 0 0 -0.00391,-0.00781 L 2.8632813,4.25 A 0.39687499,0.39687499 0 0 0 2.5800781,4.140625 Z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"m 7.0917969,11.767578 v 0.792969 h 6.4453121 v -0.792969 z",t:13,g:1}]}]}],switch:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 11.226563,3.7128906 -0.707032,0.7070313 1.642578,1.6445312 H 3.046875 v 1 h 11.529297 z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"M 1.1855469,8.9433594 4.5351562,12.292969 5.2421875,11.585938 3.5996094,9.9433594 h 9.1171876 v -1 z",t:13,g:1}]}]}],scrollto:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 7.9921875,0.95883941 c -0.250488,-0.00872 -0.5000001,0.18861599 -0.5,0.59179689 0,2.4565678 0.014046,5.4488885 0.015625,5.7792969 -0.414832,-0.4134912 -1.618944,-1.609179 -3.0527344,-3.0429688 -0.208715,-0.2087145 -0.833715,0.4162855 -0.625,0.625 L 8,9.0818863 12.169922,4.9119644 c 0.208822,-0.2088228 -0.41813,-0.8357759 -0.626953,-0.6269531 -1.010297,1.0102962 -2.5173079,2.5148582 -3.0351565,3.03125 -0.00152,-0.3342485 -0.013672,-3.072983 -0.013672,-5.71875 0,-0.4162448 -0.2514651,-0.62995161 -0.5019531,-0.63867189 z M 8.28125,7.5408707 C 8.2531767,7.5688634 8,7.8221207 8,7.8221207 c 0,0 -0.257095,-0.255216 -0.2792969,-0.2773438 z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"m 1.9238281,10.37163 v 2 H 14.076172 v -2 z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"m 1.9238281,13.169922 v 2 H 14.076172 v -2 z",t:13,g:1}]}]}],reparent:[{t:7,e:"svg",m:[{n:"viewBox",f:"0 0 16 16",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"m 7.717269,6.5496963 c 1.1791128,1.1791128 3.537021,3.5439517 3.537021,3.5439517 0,0 -1.8715903,1.878096 -3.536918,3.543424 -0.2087145,0.208715 0.4174295,0.834858 0.626144,0.626143 1.739959,-1.739959 4.170103,-4.170102 4.170103,-4.170102 0,0 -2.8836136,-2.8836169 -4.170102,-4.1701053 C 8.1346942,5.7141849 7.5084462,6.3408735 7.717269,6.5496963 Z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"M 1.25,1.265625 V 3.1953125 H 3.1816406 V 1.265625 Z m 3.8613281,0 V 3.1953125 H 7.0410156 V 1.265625 Z m 3.859375,0 V 3.1953125 H 10.900391 V 1.265625 Z m 3.8593749,0 V 3.1953125 H 14.75 V 1.265625 Z",t:13,g:1}]}," ",{t:7,e:"path",m:[{n:"d",f:"m 3.5527344,4 c 0,1.570084 0,5.1494183 0,5.1494183 0,0.8840967 0.4590976,1.4746067 1.428392,1.4746067 l 7.3118426,-0.0166 -0.0039,-1.0000001 -7.2599976,0.014648 c -0.3569634,0 -0.476331,-0.1906315 -0.476331,-0.5277838 0,0 0,-3.4980046 0,-5.0942891 0,-0.3333353 -1.000006,-0.3333353 -1.000006,0 z",t:13,g:1}]}," ",{t:4,f:[{t:7,e:"path",m:[{n:"d",f:"M 2.5878906 1.7539062 L 1.3984375 2.9433594 L 6.7871094 8.3320312 L 1.3984375 13.720703 L 2.5878906 14.912109 L 7.9765625 9.5234375 L 13.367188 14.912109 L 14.556641 13.720703 L 9.1679688 8.3320312 L 14.556641 2.9433594 L 13.367188 1.7539062 L 7.9765625 7.1425781 L 2.5878906 1.7539062 z",t:13,g:1},{n:"opacity",f:"0.5",t:13,g:1},{n:"fill",f:"red",t:13,g:1}]}],n:50,r:"cancel"}]}],arrow:[{t:7,e:"svg",m:[{n:"viewBox",f:"4 7 16 10",t:13,g:1}],f:[{t:7,e:"path",m:[{n:"d",f:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z",t:13,g:1}]}]}],repeater:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1},{t:4,f:[{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],n:51,r:"~/reparent"},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:["Repeater"]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".group",undefined),(_0).set(".groupEnds",[true]),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Group"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".group",{type:"container"}),(_0).splice(".groupEnds",-1,0,true)]'}}],f:["Add Group Level"]}],n:50,r:".group"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".group",[{type:"container"}]),(_0).set(".groupEnds",[true,true])]'}}],f:["Add Group"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".header",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Header"]}],n:50,r:".header"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".header",{type:"container"})]'}}],f:["Add Header"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".footer",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Footer"]}],n:50,r:".footer"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".footer",{type:"container"})]'}}],f:["Add Footer"]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widgets",g:1}],f:[{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:["@index"],s:'"Group Header "+(_0+1)'}}}]}],n:52,r:".group"}],n:50,r:".group"}," ",{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Header"'}}}]}],n:54,r:".header"}],n:50,r:".header"}," ",{t:4,f:[{t:2,x:{r:["@context"],s:'(_0).set(".row",{type:"container"})&&""'}}],n:50,x:{r:[".row"],s:"!_0"}}," ",{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Row"'}}}]}],n:54,r:".row"}," ",{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Footer"'}}}]}],n:54,r:".footer"}],n:50,r:".footer"}]}],html:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"preview btn",g:1},{n:"title",f:"Toggle Preview",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle("ctx.preview")]'}}],f:[{t:8,r:"eye"}]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"autosize btn",g:1},{n:"title",f:"Autosize Block",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.autosizeHtml((_1))]"}}],f:[{t:8,r:"autosize"}]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{t:4,f:[{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],n:51,r:"~/reparent"},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.editExpr((_1).resolve(".html"),{html:true})]'}},{n:"class-preview",t:13,f:[{t:2,r:"ctx.preview"}]},{t:4,f:[{n:"style-font-size",f:[{t:2,x:{r:[".font.size"],s:"_0||0.83"}},"rem"],t:13},{n:"style-line-height",f:[{t:2,x:{r:[".font.line",".font.size"],s:'_0===0?"initial":(_0||_1||1)+"rem"'}}],t:13}],n:50,r:"ctx.preview"},{t:4,f:[{n:"style",f:"height: auto;",t:13}],n:50,r:"ctx.autosize"},{t:4,f:[{n:"title",f:[{t:2,r:".html"}],t:13}],n:50,x:{r:[".html.length"],s:"_0<50"}}],f:[{t:4,f:[{t:3,r:".html"}],n:50,r:"ctx.preview"},{t:4,f:[{t:7,e:"Viewer",m:[{t:13,n:"style",f:"overflow: hidden;",g:1},{n:"src",f:[{t:2,r:".html"}],t:13},{n:"template",f:"true",t:13,g:1}]}],n:51,l:1}]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}],image:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{t:4,f:[{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],n:51,r:"~/reparent"},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}},{n:"title",f:[{t:2,r:".url"}],t:13}],f:[{t:4,f:[{t:7,e:"div",m:[{n:"style",f:["width: 100%; height: 100%; background-image: url('",{t:2,x:{r:["@this",".url"],s:"_0.evalExpr(_1)"}},"'); background-repeat: no-repeat; background-size: ",{t:2,x:{r:[".fit"],s:'!_0?"contain":_0==="stretch"?"100% 100%":"cover"'}},"; background-position: center;"],t:13}]}],n:50,r:"ctx.preview"},{t:4,f:["IMG"],n:51,l:1}]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"preview btn",g:1},{n:"title",f:"Toggle Preview",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle("ctx.preview")]'}}],f:[{t:8,r:"eye"}]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}],label:[{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{t:4,f:[{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],n:51,r:"~/reparent"},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}},{n:"title",f:[{t:2,r:".text"}],t:13}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:2,r:"."}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"span",m:[{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcFont(_1)"}}],t:13}],n:50,r:".font"}],f:[{t:2,r:".text"}]}],n:51,l:1}],n:52,r:".text"}],n:50,x:{r:[".text"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"Viewer",m:[{t:13,n:"style",f:"overflow: hidden;",g:1},{n:"src",f:[{t:2,r:".text"}],t:13}]}],n:51,l:1}]}],container:[{t:19,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"name",g:1}],f:[{t:2,x:{r:["label"],s:'_0||"container"'}}]}," ",{t:4,f:[{t:2,x:{r:["@context",".layout"],s:'(_0).set("ctx.layout",_1==="row"||!_1?"auto":"manual")&&""'}}],n:50,r:"ctx.layout"}," ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"ctx.layout"}],t:13},{n:["change"],t:70,f:{r:["@node.value","@context"],s:'[_0==="auto"?(_1).set(".layout",undefined):(_1).set(".layout",[])]'}}],f:[{t:7,e:"option",m:[{n:"value",f:"auto",t:13}],f:["Auto Layout"]}," ",{t:7,e:"option",m:[{n:"value",f:"manual",t:13}],f:["Manual Layout"]}]}]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widgets",g:1},{n:"class-manual",t:13,f:[{t:2,x:{r:[".layout"],s:"Array.isArray(_0)"}}]},{n:"style",f:["height: ",{t:2,r:"heightMargin"},";"],t:13}],f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:"false"}}}]}],n:52,r:".widgets"}]}],widget:[{t:19,f:[{t:7,e:"div",m:[{n:"widget",t:71,f:{r:[".type"],s:"[_0]"}},{n:"style",f:[{t:4,f:["width: ",{t:2,r:"widthMargin"},";"],n:50,x:{r:["label"],s:'_0!=="page footer"'}},{t:4,f:["position: absolute; width: auto; left: ",{t:2,x:{r:["~/pageSize.margin.1"],s:"_0||0"}},"rem; right: ",{t:2,x:{r:["~/pageSize.margin.1"],s:"_0||0"}},"rem; bottom: ",{t:2,x:{r:["~/pageSize.margin.0"],s:"_0||0"}},"rem;"],n:51,l:1}," ",{t:4,f:[{t:2,x:{r:[".type"],s:'_0==="container"?"min-":""'}},"height: ",{t:2,r:"heightMargin"},";"],n:50,x:{r:[".height",".type"],s:'(_0&&_0!=="auth")||_1!=="container"'}}],t:13},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","@index","^^/layout","widthMargin","heightMargin"],s:"_0.calcManualLayout(_2[_1],_3,_4)"}}],t:13},{t:4,f:[{n:"moveable",t:71}],n:50,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}," "],n:50,x:{r:["^^/layout"],s:"Array.isArray(_0)"}},{t:4,f:[{n:"style",f:[{t:4,f:["break-after: always;"],n:50,x:{r:[".br"],s:"_0===true"}},{t:4,f:["flex-grow: 1; break-after: always;"],n:50,x:{r:[".width"],s:'_0==="grow"'}}],t:13}],n:51,l:1},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcMargin(_1)"}}],t:13}],n:50,r:".margin"},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcBorder(_1)"}}],t:13}],n:50,r:".border"},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcFont(_1)"}}],t:13}],n:50,r:".font"},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1)]"}}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"remove btn",g:1},{n:"title",f:["Remove ",{t:2,r:".type"}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1),false)]"}}],f:[{t:8,r:"times"}]}],n:50,x:{r:["../"],s:"Array.isArray(_0)"}}," ",{t:8,r:".type"}]}],n:54,z:[{n:"widthMargin",x:{x:{r:["@this",".","@context"],s:"_0.calcWidthWithMargin(_1,(_2))"}}},{n:"heightMargin",x:{x:{r:["@this","."],s:"_0.calcHeightWithMargin(_1)"}}}]}]}};const s={v:4,t:[{t:7,e:"div",m:[{t:13,n:"class",f:"syntax-editor",g:1},{t:8,r:"extra-attributes"}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"line-nos",g:1}],f:[{t:4,f:[{t:2,r:"."},{t:7,e:"br"}],n:52,r:"~/lines"}]}],n:50,x:{r:["~/lines.length"],s:"_0>4"}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"editor-pane",g:1}],f:[{t:7,e:"code",m:[{t:13,n:"class",f:"ast-nodes",g:1}],f:[{t:7,e:"pre",f:[{t:8,r:"ast-node",c:{r:"ast"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-fail",g:1}],f:[{t:2,x:{r:["src","ast.end","src.length"],s:"_0.substring(_1,_2)"}}]}],n:50,x:{r:["ast.end","src.length"],s:"_0<_1"}},{t:4,f:[" "],n:50,x:{r:["src.length","src"],s:'_0>0&&_1[_0-1]==="\\n"'}}]}]}," ",{t:7,e:"textarea",m:[{n:"autosize",t:71},{n:"class-expr-text",t:13},{t:4,f:[{n:"id",f:"expr-text",t:13}],n:50,r:"primary"},{n:"spellcheck",f:"false",t:13},{n:["keydown"],t:70,f:{r:["@this","@event"],s:"[_0.keydown(_1)]"}}],f:[{t:2,r:"src"}]}]}]}],e:{"_0>4":function(t){return t>4},"_0.substring(_1,_2)":function(t,e,r){return t.substring(e,r)},"_0<_1":function(t,e){return t<e},'_0>0&&_1[_0-1]==="\\n"':function(t,e){return t>0&&"\n"===e[t-1]},"[_0.keydown(_1)]":function(t,e){return[t.keydown(e)]},'(_0||"").substring(_1,_2)':function(t,e,r){return(t||"").substring(e,r)}},p:{viewer:[{t:7,e:"div",m:[{t:13,n:"class",f:"syntax-editor",g:1},{t:8,r:"extra-attributes"}],f:[{t:7,e:"code",m:[{t:13,n:"class",f:"ast-nodes",g:1}],f:[{t:7,e:"pre",f:[{t:8,r:"ast-node",c:{r:"ast"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-fail",g:1}],f:[{t:2,x:{r:["src","ast.end","src.length"],s:"_0.substring(_1,_2)"}}]}],n:50,x:{r:["ast.end","src.length"],s:"_0<_1"}},{t:4,f:[" "],n:50,x:{r:["src.length","src"],s:'_0>0&&_1[_0-1]==="\\n"'}}]}]}]}],"ast-node":[{t:7,e:"span",m:[{n:"class",f:[{t:2,r:".name"}],t:13}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-extra",g:1}],f:[{t:2,x:{r:["~/src","./0","./1"],s:"_0.substring(_1,_2)"}}]}],n:54,rx:{r:"^^/extra",m:[{t:30,n:"@index"}]}}],n:50,rx:{r:"^^/extra",m:[{t:30,n:"@index"}]}},{t:8,r:"ast-node"}],n:52,r:".children"},{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-extra",g:1}],f:[{t:2,x:{r:["~/src","./0","./1"],s:"_0.substring(_1,_2)"}}]}],n:54,rx:{r:".extra",m:[{t:30,n:".children.length"}]}}],n:50,rx:{r:".extra",m:[{t:30,n:".children.length"}]}}],n:50,r:".children.length"},{t:4,f:[{t:2,x:{r:["~/src",".start",".end"],s:'(_0||"").substring(_1,_2)'}}],n:51,l:1}]}]}},a=function(t){return[function(){return this.Ractive({template:{v:4,t:[".syntax-editor { position: relative; min-height: 99%; color: ",{t:2,r:"@style.code.c1"},"; display: flex; } .syntax-editor > .line-nos { height: 100%; flex-grow: 0; flex-shrink: 0; font-family: monospace; font-size: 0.85rem !important; line-height: 1rem !important; padding: 0.5rem !important; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.border"},"; border-right: 1px solid ",{t:2,r:"@style.dark"},"; text-align: right; } .syntax-editor > .editor-pane { position: relative; flex-grow: 1; flex-shrink: 1; } .ast-extra { color: ",{t:2,r:"@style.code.c1"},"; } .comment { color: ",{t:2,r:"@style.code.c14"},"; } .syntax-editor textarea { position: absolute; top: 0; font-family: monospace; color: transparent; background: transparent; caret-color: ",{t:2,r:"@style.fg"},"; min-height: 99%; overflow: hidden; resize: none; margin: 0 !important; padding: 0.5rem !important; line-height: 1rem !important; font-size: 0.85rem !important; white-space: pre-wrap; word-break: break-all; } .syntax-editor code { padding: 0.5rem; font-family: monospace; display: block; box-sizing: border-box; min-height: 99%; overflow: hidden; line-height: 1rem; font-size: 0.85rem; min-height: 2rem; } .syntax-editor > .editor-pane > code > pre { word-break: break-all; white-space: pre-wrap; margin: 0 !important; padding: 0 !important; } .ast-nodes .reference { color: ",{t:2,r:"@style.code.c2"},"; font-weight: 500; } .ast-nodes .primitive, .ast-nodes .number, .ast-nodes .date, .ast-nides .timespan { color: ",{t:2,r:"@style.code.c3"},"; font-weight: 500; } .ast-nodes .format-op { color: ",{t:2,r:"@style.code.c4"},"; } .ast-nodes .string, .ast-nodes .string > .ast-extra { color: ",{t:2,r:"@style.code.c5"},"; } .ast-nodes .string > .string-interpolation { font-style: oblique; } .ast-nodes .binary-op > .ast-extra, .ast-nodes .conditional > .ast-extra { color: ",{t:2,r:"@style.code.c6"},"; } .ast-nodes .typelit, .ast-nodes .typelit > .ast-extra { color: ",{t:2,r:"@style.code.c7"},"; } .ast-nodes .typelit .type { color: ",{t:2,r:"@style.code.c9"},"; font-weight: 500; } .ast-nodes .typelit .key, .ast-nodes .typelit .literal { font-weight: 500; color: ",{t:2,r:"@style.code.c10"},"; } .ast-nodes .typelit .key { color: ",{t:2,r:"@style.code.c8"},"; } .ast-nodes .typelit .condition { font-weight: 700; } .ast-nodes .ast-fail { color: ",{t:2,r:"@style.code.c20"},"; } .ast-nodes .interpolator, .ast-nodes .each-block > .ast-extra, .ast-nodes .if-block > .ast-extra, .ast-nodes .unless-block > .ast-extra, .ast-nodes .case-block > .ast-extra, .ast-nodes .with-block > .ast-extra { font-weight: 600; } .ast-nodes .each-block > .ast-extra { color: ",{t:2,r:"@style.code.c11"},"; } .ast-nodes .case-block > .ast-extra, .ast-nodes .unless-block > .ast-extra, .ast-nodes .if-block > .ast-extra { color: ",{t:2,r:"@style.code.c12"},"; } .ast-nodes .with-block > .ast-extra { color: ",{t:2,r:"@style.code.c13"},"; } ",{t:2,x:{r:["extra"],s:'_0||""'}}],e:{'_0||""':function(t){return t||""}}},data:this.cssData}).fragment.toString(!1)}.call(this)].join(" ")};function l(t){const e=t.cloneNode();function r(){e.style.width=`${t.clientWidth}px`,e.value=t.value,t.style.height=`${e.scrollHeight+8}px`}function n(){setTimeout(r,500)}return e.style.position="absolute",e.style.left="-110%",e.style.zIndex="-1",e.style.height="1rem",e.style.fontSize="0.85rem",e.style.lineHeight="1rem",e.style.padding="0.5rem",e.style.wordBreak="break-all",e.style.whiteSpace="pre-wrap",document.body.appendChild(e),t.addEventListener("focus",n),t.addEventListener("input",n),t.style.overflow="hidden",{teardown(){e.remove(),t.removeEventListener("focus",n),t.removeEventListener("input",n)}}}function f(t,e){let r;return function(...n){r&&clearTimeout(r),r=setTimeout((()=>{r=null,t.apply(this,n)}),e)}}const c=/[^\s]/,p=/^(\s*).*/;class d extends o.default{constructor(t){super(t)}highlightSyntax(){const t=this.get("src")||"";if("string"!=typeof t)return;const e=(this.get("template")?r.parseTemplate:r.parse)(t,{tree:!0,compact:!0});if(this.set("ast",e),!this.rendered)return;const n=this.find("pre");n&&this.set("lines",u(t,n.clientWidth))}keydown(t){let e=t.key,r=t.shiftKey;if("Backspace"===e){const n=t.target,o=n.value;if(n.selectionStart===n.selectionEnd){const t=o.lastIndexOf("\n",n.selectionStart-1),i=o.substring(t>0?t+1:0,n.selectionStart);i&&!c.test(i)&&i.length>1&&(e="Tab",r=!0)}}if("Home"===e){const e=t.target,n=e.value;if(e.selectionStart){const t=n.lastIndexOf("\n",e.selectionStart-1);let o=n.substring(t>0?t+1:0,e.selectionStart),i=o.replace(p,"$1");if(!o||c.test(o))if(o)e.selectionStart=e.selectionStart-o.length+i.length;else{let r=o.indexOf("\n",t);~r||(r=n.length);let i=e.selectionStart;for(;i<r&&!c.test(n[i]);i++);e.selectionStart=i}else e.selectionStart=e.selectionStart-o.length;return r||(e.selectionEnd=e.selectionStart),!1}}else{if("Tab"===e){const e=t.target;let n,o=e.value,i=[e.selectionStart,e.selectionEnd];if(i[0]===i[1]){if(n=o.lastIndexOf("\n",i[0]),this.get("tabout")){if(0===o.length)return!0;if(!r&&c.test(o.substring(-1===n?0:n,i[0])))return!0}n===i[0]&&(n=o.lastIndexOf("\n",n-1)),-1===n?n=0:n+=1,r?"  "===o.substr(n,2)&&(o=o.substring(0,n)+o.substr(n+2),i[0]=i[0]-2,i[1]=i[1]-2):(o=o.substring(0,n)+"  "+o.substr(n),i[0]=i[0]+2,i[1]=i[1]+2)}else{for(n=o.lastIndexOf("\n",e.selectionEnd),n===i[0]&&n==i[1]&&(n=o.lastIndexOf("\n",n-1));~n&&n>e.selectionStart;)r?"  "===o.substr(n+1,2)&&(o=o.substring(0,n+1)+o.substr(n+3),i[1]=i[1]-2):(o=o.substring(0,n+1)+"  "+o.substr(n+1),i[1]=i[1]+2),n=o.lastIndexOf("\n",n-1);n=o.lastIndexOf("\n",e.selectionStart),~n?n+=1:n=0,~n&&(r?"  "===o.substr(n,2)&&(o=o.substring(0,n)+o.substr(n+2),i[0]=i[0]-2,i[1]=i[1]-2):(o=o.substring(0,n)+"  "+o.substr(n),i[0]=i[0]+2,i[1]=i[1]+2))}return e.value=o,e.selectionStart=i[0],e.selectionEnd=i[1],e.dispatchEvent(new InputEvent("input")),e.dispatchEvent(new InputEvent("change")),!1}if("Enter"===t.key){if(t.ctrlKey)return this.fire("run"),!1;const e=t.target;let r=e.value,n=[e.selectionStart,e.selectionEnd],o=r.lastIndexOf("\n",n[0]-1);const i=r.substring(o>=0?o+1:0,n[0]).replace(p,"$1");return r=r.substr(0,n[0])+"\n"+i+r.substr(n[1]),e.value=r,e.selectionStart=e.selectionEnd=n[0]+i.length+1,e.dispatchEvent(new InputEvent("input")),e.dispatchEvent(new InputEvent("change")),!1}}}}o.default.extendWith(d,{template:s,css:a,cssId:"raport-editor",on:{init(){this.observe("src template",f((function(){this.highlightSyntax()}),150))}},decorators:{autosize:l},attributes:["src","template","tabout","primary"]});class m extends o.default{constructor(t){super(t)}highlightSyntax(){const t=this.get("src")||"";if("string"!=typeof t)return;const e=(this.get("template")?r.parseTemplate:r.parse)(t,{tree:!0,compact:!0});if(this.set("ast",e),!this.rendered)return;const n=this.find("pre");n&&this.set("lines",u(t,n.clientWidth))}}function u(t,e){if(e<16)return[];const r=Math.floor(e/8.16),n=[],o=t.split("\n");for(let t=0;t<o.length;t++){const e=o[t],i=Math.ceil(e.length/r);if(n.push(t+1),i>1)for(let t=1;t<i;t++)n.push("")}return n}o.default.extendWith(m,{template:{v:s.v,t:s.p.viewer},cssId:"raport-ast-view",css:a,cssData:{extra:"\n      pre { margin: 0; white-space: pre-wrap; font-size: 0.9em; }\n      .syntax-editor code { padding: 0; flex-grow: 1; }\n      .syntax-editor { max-height: 100%; overflow: auto; }\n      .syntax-editor code { font-size: inherit; line-height: 1em; }\n      "},partials:{"ast-node":s.p["ast-node"]},on:{init(){this.observe("src template",f((function(){this.highlightSyntax()}),150))}},attributes:["src","template"]});const g={};function h(t){return g[t||""]}let x;const b={fg:"#ccc",bg:"#222",border:"#555555",highlight:"#ddd",dark:"#444444",active:"#265189",hover:"#167808",error:"#a00",btntxt:"#ddd",code:{c1:"#ccc",c2:"#ccc",c3:"#1ca",c4:"#e81",c5:"#2a0",c6:"#e78",c7:"#6c3",c8:"#e82",c9:"#67f",c10:"#89d",c11:"#4bc",c12:"#1de",c13:"#29c",c14:"#888",c20:"#f00"}},_={fg:"#222",bg:"#fff",border:"#cccccc",highlight:"#000",dark:"#999999",active:"#4596ff",hover:"#26bf10",error:"#8b0000",btntxt:"#fff",code:{c1:"#555",c2:"#222",c3:"#164",c4:"#951",c5:"#a11",c6:"#708",c7:"#371",c8:"#630",c9:"#45c",c10:"#239",c11:"#167",c12:"#189",c13:"#145",c14:"#888",c20:"#f00"}};let y;const v=["**","*","/%","/","%","+","-",">=",">","<=","<","??","gt","gte","lt","lte","in","like","ilike","not-in","not-like","not-ilike","contains","does-not-contain","is","is-not","==","!=","===","!==","strict-is","strict-is-not","deep-is","deep-is-not","and","&&","or","||"],w=["INPUT","TEXTAREA","SELECT"];class k extends o.default{constructor(t){super(t),this.evalLock=!1,this._scrollers=[],this._undo=[],this._redo=[],this._inited=!1}addWidget(t){const e={type:t},r=this.get("temp.widget");"label"===t?("report"!==r&&(e.width=10),e.text=":label"):"html"===t&&(e.html="<div>html</div>",e.font={line:0}),this.push(`${r}.widgets`,e)}async run(){const t=this.get("report"),e=new r.Root(E(t.context),{parameters:this.get("params")}),n=await this.buildSources();let o;this.fire("running");try{o=r.run(t,n,e,{foot:this.frameExtra()})}catch(t){console.error(t),o=`<html><head><style>.page { width: 63rem; height: 48rem; position: absolute; overflow: hidden; left: 1.5rem; top: 1.5rem; } .page-back { width: 66rem; height: 51rem; } body { font-size: 0.83rem; } @media screen { html { min-width: 68rem; } body { background-color: #999; display: flex; flex-direction: column; align-items: center; } .page-back { background-color: #fff; box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.4); position: relative; overflow: hidden; box-sizing: border-box; margin: 0.5em; } } @media print { body { margin: 0; padding: 0; width:66rem;background-color: none; display: block; height: 357rem } .page-back { position: absolute; box-shadow: none; background-color: none; margin: 0; padding: 0; left: 0rem; } .pb0 { top: 0rem; } .pb1 { top: 51rem; } .pb2 { top: 102rem; } .pb3 { top: 153rem; } .pb4 { top: 204rem; } .pb5 { top: 255rem; } .pb6 { top: 306rem; } } @page { size: 66em 51em; } .container { position:absolute;box-sizing:border-box; } .label {position:absolute;box-sizing:border-box;} pre { margin: 1rem; } h2 { color: red; margin: 1rem; }</style></head><body><div class="page-back"><h2>Report Exception</h2><code><pre>${t}\n${t.stack}</pre></code></div></body></html>`}return this.fire("run"),this.set("result",o),!0}frameExtra(){return`\n      <style>\n        @media screen {\n          html:before, html:after { content: ' '; position: fixed; display: block; z-index: 2; box-shadow: 0 0 10px #000; transition: opacity 0.4s ease-in-out; opacity: 1; width: 100%; height: 5px; }\n          html:before { top: -5px; }\n          html:after { bottom: -5px; }\n          html.scrolled-top:before { opacity: 0; }\n          html.scrolled-bottom:after { opacity: 0; }\n\n          body {\n            background-color: ${this.get("@style.out.dark")||this.get("@style.dark")};\n            padding: 2em;\n          }\n          .page-back {\n            color: ${this.get("@style.out.fg")||this.get("@style.fg")};\n            background-color: ${this.get("@style.out.bg")||this.get("@style.bg")};\n          }\n        }\n      </style>\n      <script>\n        const html = document.scrollingElement || document.documentElement;\n        const listener = ev => {\n          if (html.scrollTop === 0) html.classList.add('scrolled-top');\n          else html.classList.remove('scrolled-top');\n\n          if (html.scrollTop + html.clientHeight >= html.scrollHeight) html.classList.add('scrolled-bottom');\n          else html.classList.remove('scrolled-bottom');\n        };\n        html.addEventListener('scroll', listener, { passive: true });\n        window.addEventListener('resize', listener);\n        window.addEventListener('scroll', listener);\n        html.classList.add('scrolled-top');\n      <\/script>\n    `}paperSize(){const t=this.get("pageSize");return"flow"===this.get("report.type")&&t.width?`width: ${t.width}rem;`:t?`width: ${t.width}rem; box-sizing: border-box; margin: auto; box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.4); padding: ${t.margin[0]}rem ${t.margin[1]}rem; min-height: ${t.height}rem; background-size: 1rem 1rem; background-position: ${10.5-t.margin[0]}rem ${10.5-t.margin[1]}rem; background-image: radial-gradient(circle, ${this.get("@style.border")}80 1px, transparent 1px);`:""}calcHeight(t){if("number"==typeof t.height)return`${t.height}rem`;if("object"==typeof t.height&&"percent"in t.height&&t.height.percent)return`${t.height.percent}%`;if("label"===t.type){let e=1;if(t.font&&!r.isComputed(t.font.size)&&t.font.size>e&&(e=t.font.size),Array.isArray(t.text))for(let r=0;r<t.text.length;r++)"object"==typeof t.text[0]&&t.text[0].font&&t.text[0].font.size>e&&(e=t.text[0].font.size);return`${e}rem`}return"container"!==t.type&&"repeater"!==t.type?"1rem":"min-content"}calcHeightWithMargin(t){const e=this.calcHeight(t);return!t.margin||r.isComputed(t.margin)?e:"number"==typeof t.margin?`calc(${e} + ${2*t.margin}rem)`:2===t.margin.length?`calc(${e} + ${2*t.margin[0]}rem)`:4===t.margin.length?`calc(${e} + ${t.margin[0]+t.margin[2]}rem)`:e}calcWidth(t,e){return!t.width||r.isComputed(t.width)?"100%":"grow"===t.width&&Array.isArray(e.get("../../layout"))?`(100% - ${e.get(`../../layout[${e.get("@index")}][0]`)||0}rem)`:"object"==typeof t.width&&"percent"in t.width?`${t.width.percent}%`:"number"==typeof t.width?`${t.width}rem`:void 0}calcWidthWithMargin(t,e){if(/^report\.widgets\.\d+$/.test(e.resolve()))return"100%";const n=this.calcWidth(t,e);return!t.margin&&t.font&&t.font.right?`calc(${n} + ${t.font.right}rem)`:!t.margin||r.isComputed(t.margin)?~n.indexOf("(")?`calc${n}`:n:"number"==typeof t.margin?`calc(${n} + ${2*t.margin}rem)`:2===t.margin.length?`calc(${n} + ${2*t.margin[1]}rem)`:4===t.margin.length?`calc(${n} + ${t.margin[1]+t.margin[3]}rem)`:void 0}calcMargin(t){const e=t.margin;return!e||r.isComputed(e)?"":"number"==typeof e?`padding: ${e}rem;`:2===e.length?`padding: ${e[0]}rem ${e[1]}rem;`:4===e.length?`padding: ${e[0]}rem ${e[1]}rem ${e[2]}rem ${e[3]}rem;`:""}calcBorder(t){const e=t.border;if(!e)return"";const r=this.get("@style.border");return"number"==typeof e?`border-bottom: ${.0625*e}rem solid ${r};`:Array.isArray(e)?1===e.length?`border: ${.0625*e[0]}rem solid ${r};`:2===e.length?`border-style: solid; border-width: ${.0625*e[0]}rem ${.0625*e[1]}rem`:4===e.length?`border-style: solid; border-width: ${.0625*e[0]}rem ${.0625*e[1]}rem ${.0625*e[2]}rem ${.0625*e[3]}rem`:"":"string"==typeof e?"border: 1px dotted green;":`border-style: solid; border-width: ${.0625*(e.top||0)}rem ${.0625*(e.right||0)}rem ${.0625*(e.bottom||0)}rem ${.0625*(e.left||0)}rem;`}calcFont(t){const e=t.font;let n="";return e.size&&!r.isComputed(e.size)&&(n+=`font-size: ${e.size}rem;`),e.line&&!r.isComputed(e.line)&&(n+=`line-height: ${e.line}rem;`),e.align&&!r.isComputed(e.align)&&(n+=`text-align: ${e.align};`),e.color&&!r.isComputed(e.color)&&(n+=`color: ${e.color} !important;`),e.family&&!r.isComputed(e.family)&&(n+=`font-family: ${e.family};`),e.weight&&!r.isComputed(e.weight)&&(n+=`font-weight: ${e.weight};`),e.right&&(n+=`padding-right: ${e.right}rem;`),n}calcManualLayout(t,e,r){const n=(t=t||[])[0]||0,o=t[1]||0;let i="";return i+=n<0?`margin-left: calc(100% - ${e} - ${-n-1}rem); margin-right: -100%;`:`margin-left: ${n}rem; margin-right: calc(${-n}rem - ${e});`,i+=o<0?`margin-top: calc(100% - ${r} - ${-o-1}rem); margin-bottom: ${-o-1}rem;`:`margin-top: ${o}rem;`,i}split(t,e,...r){const n=o.default.splitKeypath(t);return e&&n.splice(-e,e),r&&n.push(...r),n}lastKey(t,e=1){const r=o.default.splitKeypath(t);for(let t=1;t<e;t++)r.pop();return r.pop()}selectWidget(t){this.link(t,"widget"),this.set("temp.name",("report"===t?"Report":this.get(t+".type")||"")+" "),this.set("temp.widget",t);const e=this.get("widget");"html"===e.type?this.editExpr(`${t}.html`,{html:!0}):"label"===e.type||"measured"===e.type?this.editExpr(`${t}.text`,{label:!0}):"image"===e.type&&this.editExpr(`${t}.url`),this.treeScrollToActive()}treeScrollToActive(){setTimeout((()=>{const t=document.querySelector(".tree .node.active > .line");t&&"function"==typeof t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"center"})}),100)}async eval(){const t=Date.now(),e=this.get("temp.expr.str");let n=this.get("temp.expr.path");n&&n.startsWith("widget.")&&(n=n.replace("widget",this.get("temp.widget")));const o=await this.buildLocalContext(n),i=Array.isArray(e)?e.map((t=>"string"==typeof t?r.evaluate(o,t):t&&"object"==typeof t&&"string"==typeof t.text?r.evaluate(o,t.text):"")).join(""):r.evaluate(o,this.get("temp.expr.html")||this.get("temp.expr.template")?r.parseTemplate(e):e);console.log(`eval: ${Date.now()-t}ms`),this.set("temp.expr.result",i),this.set("temp.expr.tab","result")}evalExpr(t,e,n){return n?r.evaluate(n,e?r.parseTemplate(t):r.parse(t)):r.evaluate(e?r.parseTemplate(t):r.parse(t))}autosizeHtml(t){const e=t.get("ctx.preview");t.set("ctx.preview",!0),t.set("ctx.autosize",!0),t.set(".height",Math.ceil(t.node.nextElementSibling.offsetHeight/16)),t.set("ctx.autosize",!1),t.set("ctx.preview",e)}async editProvidedData(t){t.link(t.resolve(),"~/data");const e=t.get();let r;"type"in e&&"fetch"===e.type?r=await this.fetchData():("data"in e||"values"in e)&&(r=e.data?e.data:await e.values()),"object"==typeof r&&"value"in r&&(r=r.value),this._importText.value="string"==typeof r?r:JSON.stringify(r,null,2),this.set("tab","import")}async logData(t){"type"in t&&"fetch"===t.type?console.log(await this.fetchData(t)):("data"in t||"values"in t)&&console.log(t.data?t.data:await t.values())}editExpr(t,e){this.event&&(t=this.getContext(this.event.node).resolve(t)),t.startsWith("widget.")&&(t=t.replace("widget",this.get("temp.widget")));let n=this.get(t);Array.isArray(n)?n.forEach(((t,e)=>{"object"!=typeof t||"text"in t||(n[e]=r.stringify(t))})):"string"!=typeof n&&(n=r.stringify(n)),this.set("temp.expr.path",t);const i=e&&e.html,s=this.get("temp.expr.tab");this.set("temp.expr.html",i),this.set("temp.expr.label",e&&e.label),this.set("temp.expr.template",e&&e.template),this.set("temp.expr.tab",i?"html":"ast"===s||"text"===s?s:"text"),this.set("temp.bottom.tab","expr"),this.link(t,"expr"),this.set("temp.expr.str",n),this.set("show.bottom",!0);const a=document.getElementById("expr-"+(i?"html":"text"));a&&setTimeout((()=>a.focus()),500);const l=o.default.joinKeys(...o.default.splitKeypath(t).slice(0,-1));let f;f=this.observe(`${l} temp.expr.path`,((t,e,r)=>{if("temp.expr.path"===r)return f.cancel();t&&"object"==typeof t||this.checkLink("expr")}),{init:!1})}editParam(t){const e=t.resolve();this.set("show.bottom",!0),this.set("temp.bottom.param",e),this.set("temp.bottom.tab","param"),this.link(e,"param")}editReportSrc(t,e){const r=t.resolve(e||void 0);this.set("show.bottom",!0),this.set("temp.bottom.source",r),this.set("temp.bottom.tab","source"),this.link(r,"source")}moveUp(t,e,r){const n=void 0!==r?r:t.get("@index");if(n<=0)return;const[o]=t.splice(e||"../",n-1,1).result;t.splice(e||"../",n,0,o)}moveDown(t,e,r){const n=void 0!==r?r:t.get("@index");if(n>=t.get("@last"))return;const[o]=t.splice(e||"../",n+1,1).result;t.splice(e||"../",n,0,o)}reparent(t){const e=this.get("reparent");if(this.set("reparent",void 0),!e||!t)return;let r;Array.isArray(e.get("../../layout"))&&(r=e.splice("../../layout",e.get("@index"),1).result[0]),Array.isArray(t.get(".layout"))&&t.push(".layout",r||[0,0]);const n=e.splice("../",e.get("@index"),1).result[0];t.push(".widgets",n)}addHeader(){this.set("report.headers",(this.get("report.fields")||[]).map((()=>"")))}command(t,e,r){return document.execCommand(t,e||!1,void 0===r?null:r)}retypeASTNode(t,e){"operator"===e?this.set(t,{op:"+"}):"reference"===e?this.set(t,{r:""}):"string"===e?this.set(t,{v:""}):"number"===e?this.set(t,{v:0}):"undefined"===e&&this.set(t,{v:void 0})}autosize(t){y&&clearTimeout(y),y=setTimeout((()=>{y=0;const e=t.parentElement.scrollTop,r=t.parentElement.scrollHeight,n=t.parentElement.clientHeight,o=parseInt(t.style.height);t.style.height="",t.style.overflow="",setTimeout((()=>{const i=t.scrollHeight+1;t.style.height=`${i}px`,t.style.overflow="hidden",t.parentElement.scrollTop=o&&e+n+(i-o)>=r?e+(i-o):e}))}),500)}exprToggle(t){this.toggle("exprExpand."+o.default.escapeKey(t))}async buildRoot(){const t=this.get("report"),e=new r.Root(E(t.context),{parameters:this.get("params")}),n=await this.buildSources();r.applySources(e,t.sources||[],n);for(const r of t.sources||[])(r.name||r.source)in e.value||(e.value[r.name||r.source]=(e.sources[r.name||r.source]||{}).value);return e}async buildSources(){const t=this.get("report"),e=this.get("sources")||[],r={};for(const n of t.sources||[]){const t=e.find((t=>t.name===n.source));if(t){let e;const n=t;"fetch"!==n.type||!n.fetch&&n.data?"data"in t&&t.data?e=n.eval||"string"!=typeof t.data?t.data:{value:j(t.data)}:"values"in t&&"function"==typeof t.values&&(e=await t.values(this.get("params")||[])):(e=await this.fetchData(n),n.eval||(e={value:j(e)}),n.fetch||(n.data=e)),r[t.name]=e}}return r}async buildLocalContext(t){const e=await this.buildRoot();e.special.date=new Date;let n=this.get("report"),i=e;if(t){const s=o.default.splitKeypath(t);if("report"===s[0]&&s.shift(),"fields"===s[0])i=r.extend(i,{value:r.evaluate(i,`*${this.get("report.sources.0.source")}.0`)});else if("sources"===s[0])i="base"===s[s.length-1]?r.extend(i,{value:r.evaluate(i,`*${this.get(`report.sources.${s[1]}.source`)}.value`)}):r.extend(i,{value:r.evaluate(i,`*${this.get(`report.sources.${s[1]}.source`)}.0`)});else for(;n&&s.length;){if(n=n[s.shift()],n)if(n.context)i=r.extend(i,{value:r.evaluate(i,n.context)});else if(n.source&&n.source.source){const t=r.filter(e.sources[n.source.source]||{value:[]},n.source.filter,n.source.sort,n.source.group,i);i=r.extend(i,{value:t.value,special:{source:t}})}else n.source&&(i=r.extend(i,{value:r.evaluate(i,n.source)}));n&&"repeater"===n.type&&"row"===s[0]&&(i=r.extend(i,{value:r.evaluate(i,"@value.0")}))}}return i}async fetchData(t){const e=!t;t=t||this.get("data");const n=new r.Root({},{parameters:this.get("params")}),o=this.evalExpr(t.url,!0,n),i={};if(Array.isArray(t.headers))for(let e=0;e<t.headers.length;e++)i[t.headers[e][0]]=this.evalExpr(t.headers[e][1],!0,n);try{const r={headers:i,method:t.method};"POST"!==r.method&&"PUT"!==r.method||(r.body=this.evalExpr(t.body,!0,n));const s=await fetch(o,r),a=await s.text();return e&&this.set("data.data",a),a}catch(t){}}getSchema(t){const e=r.inspect(t.value);let n=t.value,o=e;o.fields=o.fields||[];let i=t,s="";for(const e in t.root.sources)o.fields.push({name:`*${e}`,type:"any"});let a=r.inspect(t.root.special);if(a.fields.forEach((t=>(t.name=`@${t.name}`,o.fields.push(t)))),(this.get("report.parameters")||[]).forEach((t=>o.fields.push({name:`!${t.name}`,type:t.type}))),i!==i.root)for(;i&&(i=i.parent,i===i.root?s="~":s+="^",n===i.value||(a=r.inspect(i.value,!0),(a.fields||[]).forEach((t=>(t.name=`${s}${t.name}`,o.fields.push(t)))),n=i.value,i!==i.root)););return e}insertRef(t){const e=this.get("temp.expr.tab")||"text",r=o.default.splitKeypath(t);let n=[];for(;r.length&&"ctx"!==r[r.length-1];)n.unshift(this.get(o.default.joinKeys.apply(o.default,r.concat("name")))),r.pop(),r.pop();"*"===n[0][0]&&"value"===n[1]&&n.length>2&&(n[1]="0");let i=o.default.joinKeys.apply(o.default,n);if((this.get("temp.expr.html")||this.get("temp.expr.template"))&&(i=`{{${i}}}`),"text"===e){const t=h();if(!t)return;const e=t.value,r=[t.selectionStart,t.selectionEnd];t.value=e.substring(0,r[0])+i+e.substr(r[1]),t.selectionStart=t.selectionEnd=r[0]+i.length,t.dispatchEvent(new InputEvent("input")),t.dispatchEvent(new InputEvent("change")),t.focus()}else{if("html"===e)return this.command("insertText",!1,i);if("ast"===e){const t=this.get("temp.expr.partpath")||"temp.expr.ast";this.set(t,{r:i})}}}insertOp(t){if("text"!==(this.get("temp.expr.tab")||"text"))return this.command("insertText",!1,`{{${t}}}`);{const e=h();if(!e)return;const r=e.value,n=[e.selectionStart,e.selectionEnd];let o,i=r.substring(n[0],n[1]);v.includes(t)?(i=` ${t} `,o=n[0]+i.length):(i=`${t}(${i})`,o=n[0]+i.length-1),e.value=r.substring(0,n[0])+i+r.substr(n[1]),e.selectionStart=e.selectionEnd=o,e.dispatchEvent(new InputEvent("input")),e.dispatchEvent(new InputEvent("change")),e.focus()}}resetScrollers(){this._scrollers.forEach((t=>t()))}loadReportString(t){try{const e=JSON.parse(t);this.set("report",e),this.set("params",e.defaultParams||{})}catch(e){try{const e=r.evaluate({PageSizes:r.PageSizes},t);this.set("report",e),this.set("params",e.defaultParams||{})}catch(t){console.error("Failed to load report",t)}}}async download(t,e,n="application/json"){t=r.evaluate(r.extend(await this.buildRoot(),{parser:r.parseTemplate}),t);const o=new Blob([e],{type:n}),i=URL.createObjectURL(o),s=document.createElement("a");s.download=t,s.href=i,s.style.display="none",document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)}reportToString(t,e,r){const n=this.get("report");return t?e?$(z(n),r):JSON.stringify(z(n)):JSON.stringify(n,null,2)}loadReportFile(){const t=this.find("#definition-file");let e;e=()=>{if(t.removeEventListener("change",e),t.files.length){const e=t.files[0],r=new FileReader;r.onload=t=>this.loadReportString(t.target.result),r.readAsText(e)}},t.addEventListener("change",e),t.click()}loadImportFile(){const t=this.find("#import-file");let e;e=()=>{if(t.removeEventListener("change",e),t.files.length){const e=t.files[0],r=new FileReader;r.onload=t=>this.tryImport(t.target.result),r.readAsText(e)}},t.addEventListener("change",e),t.click()}tryImport(t){if(!t||!this.readLink("data"))return;const e=j(t);e?"object"==typeof e&&"type"in e&&"fetch"===e.type?this.set("data",e):Array.isArray(e)||!Array.isArray(e.value)?this.set("data.data",{value:e}):this.set("data.data",e):this.set("data.data",t)}loadContextFile(){const t=this.find("#context-file");let e;e=()=>{if(t.removeEventListener("change",e),t.files.length){const e=t.files[0],r=new FileReader;r.onload=t=>this.tryContext(t.target.result),r.readAsText(e)}},t.addEventListener("change",e),t.click()}tryContext(t){if(!t)return;let e;try{e=JSON.parse(t)}catch(n){try{e=r.evaluate({},t)}catch(t){e={}}}this.set("report.context",e)}setHTMLFontSize(){const t=this.get("temp.fontSize");t&&this.command("fontSize",!1,t),setTimeout((()=>this.set("temp.fontSize","")))}inRepeater(t){return/\.row\./.test(t)}getPartStrings(t){return t.map((t=>t.text||t)).join(" + ")}nodeForPosition(t,e){const n=this.get("temp.expr.str"),o=(this.get("temp.expr.html")||this.get("temp.expr.template")?r.parseTemplate:r.parse)(n,{tree:!0});return"message"in o?o:function(t,e,r){const n=[];let o,i=t;for(;i;){i.start<=e&&i.end>=e&&(!r||i.name)&&n.unshift(i),o=null;for(let t=0;t<i.children.length&&(o=i.children[t],o.start>e||o.end<e);t++)o=null;i=o}return n}(o,t,e)}fmt(){this._onChange(this.get("report"));const t=this.get("temp.expr.str"),e=this.get("~/settings.format"),r={listWrap:{base:e.wrap,array:e.wrap_array,union:e.wrap_union,args:e.wrap_args,keys:e.wrap_keys}};this.set("temp.expr.str",A(t,this.get("temp.expr.html"),this.get("tmp.nowrap"),r))}fmtAll(){const t=this.get("report");this._onChange(t);const e=this.get("~/settings.format"),r={listWrap:{base:e.wrap,array:e.wrap_array,union:e.wrap_union,args:e.wrap_args,keys:e.wrap_keys}};this.set("report",C(t,this.get("tmp.nowrap"),r))}removeWidget(t){const e=t.resolve();let r;if(this.get("temp.widget")===e&&this.set("temp.widget","report"),(r=this.readLink("widget"))&&r.keypath===e&&this.unlink("widget"),this.checkLink("expr",t.resolve()),t.get("^^/groupEnds")&&t.splice("^^/groupEnds",t.get("^^/groupEnds")-1-t.get("@index"),1),"repeater"===t.get("../type"))t.set("^^/"+t.get("@key"),void 0);else if("report.header"===e||"report.footer"===e||"report.watermark"===e||"report.overlay"===e)this.set(e,void 0);else{Array.isArray(t.get("^^/layout"))&&t.splice("^^/layout",t.get("@index"),1);const r=t.get("@index");t.splice("../",r,1),e.startsWith("report.fields")&&t.get("../headers")?t.splice("../headers",r,1):e.startsWith("report.headers")&&t.splice("../fields",r,1)}}checkLink(t,e){let r;"import"===t?r=this.readLink("data"):"param"===t?r=this.readLink("param"):"source"===t&&(r=this.readLink("source")),void 0===e&&("expr"===t&&(e=this.get("temp.expr.path")),r&&(e=r.keypath)),"import"===t&&r&&e===r.keypath?(this.unlink("data"),this.set("tab","definition")):"expr"!==t&&"field"!==t||!(this.get("temp.expr.path")||"").startsWith(e)?"param"===t&&r&&e===r.keypath?(this.unlink("param"),this.set("temp.bottom.param",void 0),this.set("temp.bottom.tab","expr")):"source"===t&&r&&e===r.keypath&&(this.unlink("source"),this.set("temp.bottom.source",void 0),this.set("temp.bottom.tab","expr")):(this.unlink("expr"),this.set("temp.expr",{path:void 0,str:"",html:!1,tab:"text",label:!1,template:!1},{deep:!0})),"field"!==t&&e&&(e.startsWith("report.fields")&&this.checkLink("field",e.replace("fields","headers")),e.startsWith("report.headers")&&this.checkLink("field",e.replace("headers","fields")))}checkLinks(){this.checkLink("expr"),this.checkLink("import"),this.checkLink("source"),this.checkLink("param"),this.checkLink("field")}saveProjects(){const t=this.get("projects")||[];for(const e of t)"type"in e&&"fetch"===e.type&&delete e.data;window.localStorage.setItem("projects",JSON.stringify(this.get("projects")||[]));const e=this.get("project");e&&this.set("projectSaved",JSON.stringify(e))}loadProjects(){this.set("projects",JSON.parse(window.localStorage.getItem("projects")||"[]"))}resetProject(){this.set("project",JSON.parse(this.get("projectSaved")))}makeProject(t){const e=t?{name:"Project",report:{},sources:[]}:{name:"Project",report:this.get("report")||{},sources:this.get("sources")||[]};this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.checkLinks(),this.push("projects",e),this.link("projects."+(this.get("projects").length-1),"project"),this.link("project.report","report"),this.link("project.sources","sources"),this.set("projectText","")}stringifyProject(t){t||(t=this.get("project"));const e=(this.get("project.sources")||this.get("sources")||[]).map((t=>"type"in t&&"fetch"===t.type?Object.assign({},t,{data:void 0}):Object.assign({},t)));return JSON.stringify(Object.assign({},t,{sources:e,report:this.get("project.report")||this.get("report")||{}}))}removeProject(){if(window.confirm("Do you want to delete this project? This cannot be undone.")){const t=this.get("project"),e=this.get("projects")||[];e.splice(e.indexOf(t),1),this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.set("project",void 0),this.checkLinks(),this.saveProjects()}}importProject(t){const e=t=>{const e=JSON.parse(t);if(Array.isArray(e)&&e.length>0&&"name"in e[0])this.set("projects",e),this.checkLinks();else if("object"==typeof e&&"name"in e){const t=this.get("project"),r=this.get("projects");this.set("project",e),this.link("project.report","report"),this.link("project.sources","sources"),~r.indexOf(t)&&r.splice(r.indexOf(t),1,e),this.checkLinks()}};if(this.set("projectText",""),"string"==typeof t)t&&e(t);else{const t=this.find("#project-file");let r;r=()=>{if(t.removeEventListener("change",r),t.files.length){const r=t.files[0],n=new FileReader;n.onload=t=>e(t.target.result),n.readAsText(r)}},t.addEventListener("change",r),t.click()}}cloneProject(){this.set("projectText","");const t=this.get("project");this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.push("projects",JSON.parse(JSON.stringify(t))),this.link("projects."+(this.get("projects").length-1),"project"),this.link("project.report","report"),this.link("project.sources","sources")}linkProject(t){this.set("projectText",""),this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.checkLinks(),this.link(t,"project"),this.link("project.report","report"),this.link("project.sources","sources"),this.set("projectSaved",JSON.stringify(this.get(t))),this.resetUndo()}resetUndo(){this._undo=[],this._redo=[]}undo(){if(this.event&&~w.indexOf(this.event.event.target.nodeName))return!1;this._undoWatch.silence();let t=this._undo.shift();t&&JSON.stringify(this.get("report"))===t&&(this._redo.unshift(t),t=this._undo.shift()),t&&(this._redo.unshift(t),this.set("report",JSON.parse(t))),this._undoWatch.resume()}redo(){if(this.event&&~w.indexOf(this.event.event.target))return!1;this._undoWatch.silence();let t=this._redo.shift();t&&JSON.stringify(this.get("report"))===t&&(this._undo.unshift(t),t=this._redo.shift()),t&&(this._undo.unshift(t),this.set("report",JSON.parse(t))),this._undoWatch.resume()}async initParams(){this.set("params",r.initParameters(this.get("report"),await this.buildSources()))}_onChange(t){JSON.stringify(t)!==this._undo[0]&&(this._undo.unshift(JSON.stringify(t)),this.undo.length>40&&(this._undo=this._undo.slice(0,40)),this._redo=[])}applySettings(){const t=this.get("settings")||{};let e=!1;if("dark"===t.theme)e=!0,o.default.styleSet(b);else if("light"===t.theme)o.default.styleSet(_);else{const t=window.matchMedia("(prefers-color-scheme: dark)");e=t.matches,o.default.styleSet(t.matches?b:_)}"dark"===t.outTheme?o.default.styleSet("out",b):"light"===t.outTheme?o.default.styleSet("out",_):o.default.styleSet("out",e?b:_)}}function j(t){try{return JSON.parse(t)}catch(t){return{}}}function E(t){try{return JSON.parse(JSON.stringify(t))}catch(t){return{}}}o.default.extendWith(k,{template:i,css:function(t){return[function(){return this.Ractive({template:{v:4,t:["h3 { padding: 0.5rem; margin: 0; } button.plain { text-decoration: none; text-align: center; letter-spacing: 0.5px; cursor: pointer; user-select: none; border: none; border-radius: 0.2em; padding: 0 1.25rem; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2); transition: 0.2s ease-in-out; transition-property: box-shadow, opacity, background-color; font-size: 0.7em; line-height: 1.5em; background-color: ",{t:2,r:"@style.active"},"; color: ",{t:2,r:"@style.btntxt"},"; vertical-align: middle; min-height: 2.25em; outline: 0; margin: 0.25em; position: relative; overflow: hidden; -webkit-tap-highlight-color: transparent; font-family: inherit; } button.plain:hover { background-color: ",{t:2,r:"@style.hover"},"; } span.ico, button.ico { display: inline-block; border: none; background-color: transparent; cursor: pointer; outline: none; width: 1.2em; height: 1.2em; margin-left: 0.1rem; box-sizing: content-box; color: ",{t:2,r:"@style.fg"},"; } span.ico svg, button.ico svg { fill: ",{t:2,r:"@style.fg"},"; } span.ico.error svg, button.ico.error svg { fill: ",{t:2,r:"@style.error"},"; } button.ico.text { width: auto; } button.hide { border: none; width: 0; height: 0; padding: 0; outline: none; } button.ico:hover svg { fill: ",{t:2,r:"@style.hover"},"; } button.ico:hover { color: ",{t:2,r:"@style.hover"},"; } button.ico svg.pencil { stroke: ",{t:2,r:"@style.fg"},"; fill: none; } button.ico:hover svg.pencil { stroke: ",{t:2,r:"@style.hover"},"; fill: none; } button.ico.large { font-size: 1.5rem; width: 1.5rem; height: 1.5rem; padding: 0 0.5rem; } .properties button.ico.large { line-height: 1.5rem; } button.ico:disabled { color: ",{t:2,r:"@style.border"},"; cursor: default; } span.which { flex-grow: 1; line-height: 2em; display: flex; align-items: center; } .raport-report { display: flex; flex-grow: 1; flex-shrink: 1; font-family: sans-serif; height: 100%; width: 100%; box-sizing: border-box; padding: 0.5em; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } button.add { width: 2rem; height: 2rem; line-height: 1em; text-align: center; border-radius: 2rem; background-color: ",{t:2,r:"@style.active"},"; color: ",{t:2,r:"@style.btntxt"},"; margin: 0.5rem; border: none; cursor: pointer; font-size: 1.5em; transition: background-color 0.2s ease-in-out; } button.add:hover { background-color: ",{t:2,r:"@style.hover"},"; } select { padding: 0.2rem; border-style: solid; border-width: 0 0 1px 0; background: none; color: ",{t:2,r:"@style.fg"},"; } .layout { display: flex; flex-direction: column; flex-grow: 2; flex-shrink: 1; margin: 0 0.5em; box-sizing: border-box; overflow: hidden; padding-bottom: 1.75rem; } .layout.pad-me { padding-bottom: 32.5vh; } .layout > .tab { background-color: ",{t:2,r:"@style.dark"},"; } .editor > .tab, .layout > .tab { flex-grow: 10; flex-shrink: 1; overflow: hidden; max-height: 0; } .editor > .active-tab, .layout > .active-tab { max-height: none; } .designer { display: flex; flex-direction: column; } .spacer { margin-right: 3em; } .actions { display: flex; align-items: center; z-index: 2; } .actions .tab { box-sizing: border-box; padding: 0.5em; margin: 0 0.5em; background-color: ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; border-style: solid; border-width: 1px 1px 0 1px; font-weight: bold; cursor: pointer; outline: none; border-color: ",{t:2,r:"@style.border"},"; } .actions .tab:first-of-type { margin-left: 0; } .actions span.ico { vertical-align: middle; } .actions .right { margin-left: auto; } .actions.design .tab { background-color: ",{t:2,r:"@style.bg"},"; border-color: ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; } .actions .tab.active { background-color: ",{t:2,r:"@style.dark"},"; color: ",{t:2,r:"@style.btntxt"},"; border: none; border-top: 2px solid ",{t:2,r:"@style.highlight"},"; margin-bottom: -1px; } .bottom-pane .actions .tab { line-height: 1.3rem; } .bottom-pane .actions .tab.active { background-color: ",{t:2,r:"@style.bg"},"; border-color: ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; margin-bottom: -2px; border-style: solid; border-width: 1px; border-bottom-color: ",{t:2,r:"@style.bg"},"; } .bottom-pane .actions button.error { color: ",{t:2,r:"@style.error"},"; } .bottom-pane .actions button.error svg { fill: ",{t:2,r:"@style.error"},"; } .bottom-pane .actions .tab.error { border-color: ",{t:2,r:"@style.error"},"; color: ",{t:2,r:"@style.btntxt"},"; background-color: ",{t:2,r:"@style.error"},"; } .bottom-pane .actions .tab.active.error { background-color: ",{t:2,r:"@style.bg"},"; color: ",{t:2,r:"@style.error"},"; border-bottom-color: ",{t:2,r:"@style.bg"},"; } .bottom-pane { height: 33vh; overflow: hidden; flex-shrink: 0; display: flex; flex-direction: column; flex-grow: 0; box-sizing: border-box; position: absolute; right: 0.5rem; width: calc(100% - 29rem); bottom: 0; transition: transform 0.2s ease-in-out; transform: translateY(calc(33vh - 2.25rem)); background-color: ",{t:2,r:"@style.bg"},"; padding: 0.5rem; z-index: 1998; } .bottom-pane.max { height: 90vh; transform: translateY(calc(90vh - 2.25rem)); } .bottom-pane.active { transform: translateY(0); border-top: 1px solid ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } .result { display: flex; flex-grow: 2; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } iframe { display: block; border: none; } .bar { height: 2rem; background-color: ",{t:2,r:"@style.dark"},"; color: ",{t:2,r:"@style.fg"},"; display: flex; align-items: center; font-size: 0.75rem; border-bottom: 1px solid ",{t:2,r:"@style.border"},"; box-sizing: border-box; padding: 0 0.25rem; user-select: none; transition: background-color 0.2s ease-in-out, opacity 0.2s ease-in-out; opacity: 0; position: absolute; width: 100%; top: -2rem; height: 2rem; left: 0; } .delimited.paper .bar { opacity: 1; } .delimited.paper .active-widget { border: none; background-color: ",{t:2,r:"@style.bg"},"; } .delimited.paper .active-widget > .bar { top: -4.5rem; left: -0.5rem; right: -0.5rem; width: auto; } .delimited.paper .hover-widget { margin-top: 2.5rem; background-color: ",{t:2,r:"@style.bg"},"; } .active-widget > .bar, .hover-widget > .bar, .bar.active, .bar.hover { opacity: 1; } .bar * { margin: 0 0.5em 0 0; } .bar .name { color: ",{t:2,r:"@style.btntxt"},"; } .bar button, .bar .btn { background: none; color: #fff; border: none; cursor: pointer; font-size: inherit; padding: 0 0.5em; } .bar select { background: none; border: none; color: #fff; height: 1rem; font-size: 0.6rem; padding: 0; } div.widgets { display: flex; flex-wrap: wrap; align-content: flex-start; position: relative; height: min-content; width: calc(100% + 3px); left: -1.5px; background-position: 1.5rem 1.5rem; background-size: 1rem 1rem; } div.widgets.manual { display: inline-block; } div.widget { cursor: pointer; display: block; border: 1px dotted rgba(0, 0, 0, 0.2); box-sizing: border-box; font-size: 0.83rem; position: relative; } div.widgets.manual > .widget { float: left; } div.widgets.manual > .active-widget { cursor: move; } div.widget:hover { z-index: 1000; } div.active-widget { border-color: ",{t:2,r:"@style.active"},"; border-style: solid; background-color: ",{t:2,r:"@style.active"},"20; user-select: none; z-index: 999; } div.active-widget > .widgets, div.hover-widget > .widgets { background-image: linear-gradient(to top, ",{t:2,r:"@style.active"},"20, ",{t:2,r:"@style.active"},"20), radial-gradient(circle, ",{t:2,r:"@style.dark"}," 1px, transparent 1px); background-color: ",{t:2,r:"@style.bg"},"; } div.hover-widget { border-color: ",{t:2,r:"@style.hover"},"; border-style: solid; background-color: ",{t:2,r:"@style.hover"},"20; } .active-widget > .bar, .bar.active { background-color: ",{t:2,r:"@style.active"},"; z-index: 999; } .hover-widget > .bar, .bar.hover { background-color: ",{t:2,r:"@style.hover"},"; } .widget > .btn { position: absolute; right: 0; top: 0; opacity: 0; cursor: pointer; font-weight: bold; border-radius: 0.2rem; width: 0.9rem; height: 0.9rem; text-align: center; line-height: 0.9rem; font-size: 0.7rem; z-index: 10; } .widget > .preview.btn { right: 1.2rem; } .widget > .autosize.btn { right: 2.3rem; } .widget > .btn > svg { width: 100%; height: 100%; } .active-widget > .btn, .hover-widget > .btn { opacity: 1; } .label, .html { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .html .preview { font-size: 0.83rem; line-height: 1rem; white-space: normal; word-break: break-all; display: block; } .widget.image .content { display: flex; align-items: center; justify-content: space-around; font-size: 2em; font-weight: bold; overflow: hidden; } .widget > .content { display: block; height: 100%; } .sheet .toggles { margin-bottom: 0.5rem; } .toggle { font-size: 0.6rem; border: 1px dotted; padding: 0.2rem; border-radius: 0.2rem; display: inline-block; margin: 0.1em; line-height: 0.8rem; color: ",{t:2,r:"@style.fg"},"; cursor: pointer; } .toggle.active { border: 1px solid; color: ",{t:2,r:"@style.highlight"},"; } .sides { display: flex; flex-wrap: wrap; width: 12rem; margin: 0.5rem; } .properties .sheet .sides > input { width: 3rem; margin: 0.5rem 0.5rem; box-sizing: border-box; color: ",{t:2,r:"@style.fg"},"; background: transparent; } .sides .square { width: 4rem; height: 4rem; background-color: ",{t:2,r:"@style.active"},"; border: 1px solid; box-sizing: border-box; } .sides span { width: 4rem; height: 0.1rem; display: inline-block; } .shrinky { flex-shrink: 200; flex-grow: 1; } .growy { flex-grow: 100; flex-shrink: 1; } .scrolled-wrapper { position: relative; overflow: hidden; min-height: 4em; display: flex; flex-direction: column; } .scrolled { height: 100%; overflow: auto; } .scrolled:before, .scrolled:after { content: ' '; display: block; position: absolute; z-index: 2; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); height: 5px; width: 100%; opacity: 1; transition: opacity 0.25s ease-in-out; } .scrolled:before { top: -5px; } .scrolled:after { bottom: -5px; } .scrolled.scroll-top:before { opacity: 0; transition: opacity 0s linear; } .scrolled.scroll-bottom:after { opacity: 0; transition: opacity 0s linear; } @media screen and (max-width: 96em) { .properties.left { position: absolute; top: 0; height: 100%; left: -28rem; z-index: 1999; transition: transform 0.2s ease-in-out; overflow-x: visible; box-sizing: border-box; } .properties.popped { transform: translateX(28rem); box-shadow: 4px 5px 0.5rem #0005; } .properties .properties-pull { display: flex; align-items: center; justify-content: space-around; position: absolute; width: 2.5em; height: 3em; right: -2.5em; top: 3em; border-radius: 0 2rem 2rem 0; border: 1px solid ",{t:2,r:"@style.border"},"; background-color: ",{t:2,r:"@style.bg"},"; border-left-color: ",{t:2,r:"@style.bg"},"; box-shadow: 4px 5px 0.5rem #0005; } .bottom-pane .bottom .context, .bottom-pane .bottom .ops { display: none; } .bottom-pane { width: calc(100% - 1rem); right: 0.5rem; } }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".report-definition .paper { flex-grow: 1; display: flex; flex-direction: column; } .tab.report-definition { display: flex; flex-direction: column; } .definition { display: flex; flex-direction: column; flex-grow: 1; } .definition .json, .definition .extra-context { display: flex; flex-direction: column; flex-grow: 1; height: 10em; border: 1px solid ",{t:2,r:"@style.border"},"; } .definition .json > *, .definition .extra-context > * { flex-grow: 1; } .definition .json textarea, .definition .extra-context textarea { flex-shrink: 0; flex-grow: 1; width: 100%; box-sizing: border-box; min-height: 99%; border: none; outline: none; } .definition .json textarea { color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; }"]},data:this.cssData}).fragment.toString(!1)}.call(this)," .report-context .paper { flex-grow: 1; display: flex; flex-direction: column; } .tab.report-context { display: flex; flex-direction: column; }",function(){return this.Ractive({template:{v:4,t:[".tab.data-import { display: flex; flex-direction: column; } .import.paper { flex-grow: 1; display: flex; flex-direction: column; max-height: calc(100% - 2em); } .import .definition { display: flex; flex-direction: column; max-height: 100%; } .import .fetch { margin: 1em 0 2em; max-height: 40%; flex-grow: 0; flex-shrink: 1; } label.input, label.check { padding: 0.25rem; display: inline-block; } label.check { padding-top: 1.625rem; } label.input input, label.input select { display: block; height: 2.5rem; width: 100%; padding: 0.5rem; box-sizing: border-box; margin: 0; border: 1px solid ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; border-radius: 0; } label.area { display: block; padding: 0.25rem; } label.area.grow { display: flex; flex-direction: column; flex-grow: 1; } label.area textarea { display: block; min-height: 11rem; width: 100%; padding: 0.5rem; box-sizing: border-box; border: 1px solid ",{t:2,r:"@style.border"},"; margin: 0; border-radius: 0; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } label.area.grow textarea { flex-grow: 1; } label.check input { height: 2rem; vertical-align: middle; }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".project { display: flex; flex-grow: 1; flex-direction: column; } .active-tab .project { min-height: 75vh; } .settings-pane { display: flex; flex-direction: column; flex-grow: 0; flex-shrink: 0; } .settings-pane-inner { padding: 0.5rem; margin-bottom: 1em; border-bottom: 1px solid; } .project-pane { display: flex; flex-grow: 1; padding: 0.5rem; position: relative; flex-wrap: wrap; } .project-pane-left { flex-grow: 1; flex-shrink: 1; padding-right: 1rem; display: flex; flex-direction: column; box-sizing: border-box; } @media screen and (min-width: 48rem) { .project-pane-left { max-width: calc(100% - 15rem); } } .project-pane-right { width: 15rem; display: flex; flex-direction: column; flex-shrink: 0; margin-top: 0.5rem; } .project-list { flex-grow: 1; border: 1px solid ",{t:2,r:"@style.border"},"; overflow-y: auto; } .project-item { padding: 0.25rem 0.5rem; min-height: 1.5rem; cursor: pointer; } .active-project { background-color: ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; } label.input { display: inline-block; }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".paper { background-color: ",{t:2,r:"@style.bg"},"; color: ",{t:2,r:"@style.fg"},"; position: relative; } .delimited.paper { padding: 0.5rem; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } @media screen and (min-width: 48rem) { .delimited.paper { margin: 1rem; } } .delimited .children.fields { display: flex; flex-wrap: wrap; } .field { display: flex; border: 1px solid ",{t:2,r:"@style.border"},"; margin: 0.25rem; padding: 0.25rem; } .field span { display: inline-block; width: 15em; min-height: 1em; max-height: 6em; word-break: break-all; white-space: pre-wrap; overflow: hidden; } .field.active-expr { background-color: ",{t:2,r:"@style.active"},"20; border-color: ",{t:2,r:"@style.active"},"; } .field.hover-expr { background-color: ",{t:2,r:"@style.hover"},"20; border-color: ",{t:2,r:"@style.hover"},"; } .widget span.btn { background-color: ",{t:2,r:"@style.fg"},"; color: ",{t:2,r:"@style.bg"},"; } .widget span.btn svg { fill: ",{t:2,r:"@style.bg"},"; } .widget .bar span.btn { background-color: transparent; color: ",{t:2,r:"@style.btntxt"},"; } .widget.container > .remove.btn { top: -1.5rem; right: 0.5rem; z-index: 1000; }"]},data:this.cssData}).fragment.toString(!1)}.call(this)," .unit { font-size: 0.6rem; margin-left: 1em; }",function(){return this.Ractive({template:{v:4,t:[".bottom-pane pre { margin: 0; } .bottom-pane .top { display: flex; flex-shrink: 0; flex-grow: 0; box-sizing: border-box; height: 2.5em; font-size: 0.75rem; align-items: end; } .bottom-pane .bottom { display: flex; flex-grow: 1; flex-shrink: 1; overflow: hidden; border: 1px solid ",{t:2,r:"@style.border"},"; } .bottom-pane .bottom > .tab { display: flex; padding: 0.5rem; flex-grow: 0; border: none; display: none; } .bottom-pane .bottom > .active-tab { flex-grow: 1; display: flex; } .bottom-pane .context, .bottom-pane .ops { margin: 0.2em; width: 25%; max-width: 20em; flex-shrink: 0; display: flex; flex-direction: column; } .bottom-pane .context .panel, .bottom-pane .ops .panel { border: 1px solid ",{t:2,r:"@style.border"},"; flex-grow: 1; } .bottom-pane .context .header, .bottom-pane .ops .header { height: 2.55em; font-weight: bold; text-align: center; line-height: 2.2em; font-size: 0.85rem; } .bottom-pane .editor { flex-grow: 2; display: flex; flex-direction: column; padding: 0.25rem; box-sizing: border-box; } .bottom-pane textarea { width: 100%; box-sizing: border-box; padding: 0.5em; min-height: 99%; border: none; outline: none; font-size: 1em; } .bottom-pane .properties textarea, .bottom-pane .properties select, .bottom-pane .properties input { color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; border: 1px solid ",{t:2,r:"@style.border"},"; } .bottom-pane .properties textarea { min-height: 7em; } .bottom-pane .active-tab { border: 1px solid ",{t:2,r:"@style.border"},"; } .bottom-pane .editor .tab { display: flex; flex-direction: column; } .bottom-pane .ast.tab { word-wrap: anywhere; word-break: break-all; } .bottom-pane .ast.tab.error { border-color: ",{t:2,r:"@style.error"},"; } .bottom-pane .tab.html .scrolled { display: flex; flex-direction: column; } .bottom-pane .tab.result .scrolled { padding: 0.5rem; } .bottom-pane .tab.html, .bottom-pane .tab.result { display: flex; flex-direction: column; } .bottom-pane .tab .editor-buttons { display: flex; flex-shrink: 0; padding: 0.2rem; border-bottom: 1px solid ",{t:2,r:"@style.border"},"; } .bottom-pane .tab.html button { border: none; background-color: transparent; padding: 0.25rem; cursor: pointer; outline: none; } .bottom-pane .tab.html button:hover { color: ",{t:2,r:"@style.active"},"; } .bottom-pane .tab.html button.skip { margin-left: 1rem; } .bottom-pane .html-editor { padding: 0.5rem; flex-grow: 1; flex-shrink: 1; white-space: pre-wrap; word-wrap: anywhere; word-break: break-all; } .bottom-pane pre { white-space: pre-wrap; word-break: break-all; } .bottom-pane .properties { flex-direction: column; flex-wrap: wrap; align-content: flex-start; } .bottom-pane .properties > label { width: 20em; margin: 0 0.5rem; padding: 0.5rem 0; } .bottom-pane .options label { display: inline-block; } .bottom-pane .options label > span:first-of-type { font-size: 0.8rem; } .bottom-pane .properties > label > span:first-of-type { font-size: 0.8rem; display: flex; } .bottom-pane .options { box-sizing: border-box; padding: 0.5rem; border: 1px solid ",{t:2,r:"@style.border"},"; overflow: hidden; display: flex; flex-direction: column; } .bottom-pane .group-edit { display: flex; align-items: center; } .ast-node { margin-left: 0.5em; display: flex; cursor: pointer; min-height: 2em; border: 1px solid transparent; } .ast-node input, .ast-node select { border: 1px solid rgba(0, 0, 0, 0.15); background-color: transparent; padding: 0.2em; } .ast-content { display: flex; flex-direction: column; flex-grow: 1; } .ast-active-node { background-color: ",{t:2,r:"@style.active"},"20; border: 1px solid ",{t:2,r:"@style.active"},"; cursor: default; } .ast-string:before, .ast-string:after { content: '\"'; } .ast-number { font-family: mono; } .ast-op-name, .ast-content-value, .ast-content-ref { display: flex; justify-content: space-between; } .entry-details { display: flex; justify-content: space-between; } .entry-type { opacity: 0.6; padding: 0 0.5em; } .entry-details button { text-align: left; padding: 0; background: none; border: none; margin: 0; font-size: 1rem; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } .entry-details button.expand { margin-left: -1em; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; border: 1px solid ",{t:2,r:"@style.border"},"; width: 1em; height: 1em; text-align: center; line-height: 0.6em; } .context-entry { padding-left: 0.5em; border-left: 1px dotted ",{t:2,r:"@style.border"},"; margin-left: 1em; } .context-entry .context-entry { margin-left: 0.5em; } .context-entry > .context-entry { display: none; } .context-entry.expanded > .context-entry { display: block; } .expr-operator, .context-entry { cursor: pointer; } .entry-details .expr-operator { padding: 0 0.5em; } .label-part { padding: 0.25em; margin: 0.25em; border: 1px solid; border-radius: 0.2em; } .label-part code { background-color: ",{t:2,r:"@style.bg"},"; color: ",{t:2,r:"@style.fg"},"; } .label-part input, .label-part label, .label-part select { font-size: 0.8rem; padding: 0.25em; border-radius: 0.2rem; margin: 0.25em; vertical-align: middle; border: 1px solid ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } .label-part input[type=number] { width: 8rem; } .label-part label { white-space: nowrap; } .option-entry { box-sizing: border-box; display: flex; margin-bottom: 0.5em; align-items: end; justify-content: space-between; } .option-entry > * { flex-shrink: 1; flex-grow: 1; margin: 0.2em; }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".param { width: 18rem; margin: 0.5rem; break-inside: avoid; } .param label { width: 100%; } .param label input, .param label select { display: block; width: 100%; box-sizing: border-box; padding: 0.5rem; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; } .param label.check input { width: auto; display: inline-block; vertical-align: middle; padding: 0; } .param-editor { column-width: 20em; }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".properties { width: 28em; flex-grow: 0; flex-shrink: 0; border: 1px solid ",{t:2,r:"@style.border"},"; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; display: flex; flex-direction: column; } .properties-pull { display: none; } .placeholder { flex-grow: 1; align-items: center; display: flex; justify-content: center; font-size: 1.7rem; color: #aaa; } .properties .header { display: flex; flex: 1 1 auto; flex-grow: 0; flex-shrink: 0; align-items: center; margin-top: 1em; } .properties .header:first-of-type { margin-top: 0; } .properties .header h3 { flex-grow: 5; } .properties .tree { overflow-y: auto; } .properties .tree .children { margin-left: 0.5em; padding-left: 0.5em; border-left: 1px dotted ",{t:2,r:"@style.border"},"; } .properties .tree .node { color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; cursor: pointer; position: relative; transition: background-color 0.2s ease-in-out; } .properties .tree .node.active > .line { background-color: ",{t:2,r:"@style.active"},"; color: ",{t:2,r:"@style.btntxt"},"; } .properties .tree .node.active { background-color: ",{t:2,r:"@style.active"},"20; } .properties .tree .node.hover > .children > .node { background-color: ",{t:2,r:"@style.hover"},"20; } .properties .tree .node .line { display: flex; align-items: center; padding: 0.1rem 0.25rem; margin: 0.1rem; min-height: 2rem; transition: background-color 0.2s ease-in-out; } .properties .tree .node.hover > .line { background-color: ",{t:2,r:"@style.hover"},"; color: #fff; } .properties .tree .node.moving > .line { background-color: #8061ee; color: #fff; } .properties .tree .node .line span { flex-grow: 1; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; } .properties .tree .node.active > .line button, .properties .tree .node .line:hover button, .properties .tree .node.hover > .line button { color: #fff; } .properties .tree .node.active > .line button:disabled, .properties .tree .node .line:hover button:disabled, .properties .tree .node.hover > .line button:disabled { color: #ccc; cursor: default; } .properties .sheet { display: table; border-collapse: collapse; width: 100%; box-sizing: border-box; } .properties .sheet > label { display: table-row; } .properties .sheet > label > * { display: table-cell; line-height: 1rem; padding: 0.4rem; vertical-align: middle; border-style: solid; border-width: 1px 0; border-color: ",{t:2,r:"@style.border"},"; } .properties .sheet > label > *:first-of-type { border-width: 1px 1px 1px 0; } .properties .sheet > label > *:first-of-type > * { vertical-align: middle; } .properties .sheet input, .properties .sheet select { border: none; padding: 0; margin: 0; width: 100%; color: ",{t:2,r:"@style.fg"},"; background-color: ",{t:2,r:"@style.bg"},"; outline: none; } .properties .sheet textarea { border: none; width: 100%; height: 100%; margin: -0.2rem; padding: 0; box-sizing: border-box; outline: none; } .properties .sheet label:focus-within { background-color: transparent; color: ",{t:2,r:"@style.fg"},"; } .parameter, .src { display: flex; border-bottom: 1px solid ",{t:2,r:"@style.border"},"; } .parameter:focus-within, .src:focus-within { background-color: ",{t:2,r:"@style.border"},"; } .parameter.head, .src.head { border-top: 1px solid ",{t:2,r:"@style.border"},"; font-weight: bold; } .parameter > *, .src > * { border-left: 1px solid ",{t:2,r:"@style.border"},"; padding: 0.2rem; flex-grow: 0; flex-shrink: 0; box-sizing: border-box; } .parameter > *:first-of-type, .src > *:first-of-type { border-left: none; } .parameter input:not([type=checkbox]), .parameter select, .src input:not([type=checkbox]), .src select { width: 100%; height: 100%; border: none; background: transparent; color: ",{t:2,r:"@style.fg"},"; } .param-name { width: 40%; } .param-type { width: 30%; } .param-require { width: 19%; text-align: center; } .param-btn { width: 10%; } .src-name { width: 65%; } .rsrc-name { width: 43%; } .rsrc-src { width: 43%; } .src-btn { width: 35%; display: flex; justify-content: space-around; } .rsrc-btn { width: 14%; }"]},data:this.cssData}).fragment.toString(!1)}.call(this),function(){return this.Ractive({template:{v:4,t:[".line .actions { display: none; position: absolute; right: 3rem; } .line:hover .actions { display: block; } button.ico svg { width: 100%; height: 100%; border-radius: 0.2rem; transition: transform 0.2s ease-in-out 0.3s; } .line button.ico svg, .line button.ico.remove:hover svg, .hover .line .actions button.ico svg { fill: ",{t:2,r:"@style.bg"},"; } .line button.ico.field svg, .line button.ico.remove svg { fill: ",{t:2,r:"@style.fg"},"; } .line button.ico.field[disabled] svg { fill: ",{t:2,r:"@style.dark"},"; } .line button.ico.field:hover svg { fill: ",{t:2,r:"@style.bg"},"; } .hover .line .actions button.ico:hover svg, .line button.ico:hover svg { fill: ",{t:2,r:"@style.fg"},"; } button.ico[disabled] svg, button.ico[disabled]:hover svg { fill: gray; } button.ico.up-arrow svg { transform: rotate(180deg); } button.ico.left-arrow svg { transform: rotate(90deg); } button.ico.right-arrow svg { transform: rotate(270deg); }"]},data:this.cssData}).fragment.toString(!1)}.call(this)].join(" ")},cssId:"raport-report",partials:{measured:i.p.label},data:()=>({pageSizes:r.PageSizes,report:{type:"page",parameters:[],sources:[],context:{},classifyStyles:!0,widgets:[],size:r.PageSizes.letter,orientation:"landscape"},temp:{expr:{tab:"text"},widget:"report"},exprExpand:{},showProjects:!0}),components:{Editor:d,Viewer:m},computed:{operators(){const t=r.getOperatorMap();return Object.keys(t).filter((t=>!~t.indexOf("parse"))).sort().reduce(((e,r)=>(e[r]=t[r],e)),{})},inWatermark(){return/^report.water/.test(this.get("temp.widget"))},inOverlay(){return/^report.overlay/.test(this.get("temp.widget"))},pageSize(){if("flow"===this.get("report.type")){const t=this.get("report.width");if(t)return{width:t}}const t=this.get("report.size"),e=this.get("report.orientation")||"landscape";if(t){const r=[(t.margin||[])[0]||0,(t.margin||[])[1]||0];return{width:"landscape"===e?t.height:t.width,height:"landscape"===e?t.width:t.height,margin:r}}}},observe:{"report.type"(t){"delimited"===t?this.get("report.fields")||this.set("report.fields",[]):this.get("report.widgets")||this.set("report.widgets",[])},"temp.quote temp.record temp.field"(t,e,n){try{this.set(n.replace("temp","report"),r.parse(`'${t.replace(/'/g,"\\'")}'`).v)}catch(t){}},expr(t){this.evalLock||(this.evalLock=!0,this.set("temp.expr.str",t),this.evalLock=!1)},"temp.expr.str"(t){t||(this.set("temp.expr.error",void 0),this.set("temp.expr.ast",void 0));const e=this.get("temp.expr.path"),n=this.get("temp.expr.html")||this.get("temp.expr.template");if(e&&this.set(e,t),!this.evalLock&&t.trim()){this.evalLock=!0;try{const e=Array.isArray(t)?t:[t];for(let t=0;t<e.length;t++){const o="string"==typeof e[t]?e[t]:"text"in e[t]&&"string"==typeof e[t].text?e[t].text:e[t],i=(n?r.parseTemplate:r.parse)(o,{detailed:!0,contextLines:3,consumeAll:!0}),s=("marked"in i?`${"latest"in i?`${i.latest.message||"(no message)"} on line ${i.latest.line} at column ${i.latest.column}\n\n${i.latest.marked}\n\n`:""}${i.message||"(no message)"} on line ${i.line} at column ${i.column}\n\n${i.marked}\n\n`:"")+JSON.stringify(i,null,"  ");if(this.set("temp.expr.parsed",s),"message"in i?(this.set("temp.expr.error",i),this.set("temp.expr.ast",void 0)):(this.set("temp.expr.ast",i),this.set("temp.expr.error",void 0)),n?this.set("temp.expr.htmlstr",o):this.set("temp.expr.htmlstr",""),"message"in i)break}}catch(t){}this.evalLock=!1}},"temp.expr.ast"(t,e){if(!this.evalLock){this.evalLock=!0,void 0===e&&t&&this.set("temp.expr.error",void 0);try{const e=r.stringify(t,{template:this.get("temp.expr.html")});this.set("temp.expr.str",e),!("v"in t)||"`"!==e[0]&&"'"!==e[0]?this.set("temp.expr.htmlstr",""):this.set("temp.expr.htmlstr",e.substr(1,-1))}catch(t){}this.evalLock=!1}},"temp.expr.htmlstr"(t){this.evalLock||this.set("temp.expr.str",t)},"temp.widget"(){null==this.get(this.get("temp.expr.path"))&&(this.unlink("expr"),this.set("temp.expr.path",void 0),this.set("temp.expr.str",""),this.set("temp.expr.ctx",!1))},async"temp.expr.path report.parameters report.sources"(){x&&clearTimeout(x),x=setTimeout((async()=>{x=0;let t=this.get("temp.expr.path");t?(t.startsWith("widget.")&&(t=t.replace("widget",this.get("temp.widget"))),this.set("temp.expr.ctx",this.getSchema(await this.buildLocalContext(t)))):this.set("temp.expr.ctx",this.getSchema(await this.buildLocalContext()))}),1e3)},"report.defaultParams"(t){this.set("params",Object.assign({},t))},"report.parameters":{async handler(t){t&&this.initParams()},init:!1,strict:!0},"show.bottom"(t){setTimeout((()=>this.resetScrollers())),t?setTimeout((()=>this.set("show.pad",!0)),300):this.set("show.pad",!1)},settings(t){this._inited&&(this.applySettings(),window.localStorage.setItem("settings",JSON.stringify(t)))},"project projectSaved":{handler:f((function(){const t=this.get("project"),e=this.get("projectSaved");t&&JSON.stringify(t)!==e?this.set("projectChanged",!0):this.set("projectChanged",!1)}),1e3)},"report.context"(t){if(!this._contextText)return;const e=JSON.stringify(t||{},null,2);let r=this._contextText.value;try{r=JSON.stringify(JSON.parse(r),null,2)}catch(t){}r!==e&&(this._contextText.value=e,this.autosize(this._contextText))}},on:{init(){this.resetUndo(),this.command("styleWithCSS",!1,"true"),this._undoWatch=this.observe("report",f(this._onChange,2e3),{defer:!0,init:!0});const t=JSON.parse(window.localStorage.getItem("settings")||"{}");if(this.set("settings",t),window.addEventListener("beforeunload",(()=>{if(this.get("settings.autosave"))window.localStorage.setItem("autosave",JSON.stringify({report:this.get("report"),show:this.get("show"),tmp:this.get("tmp"),tab:this.get("tab"),"temp.expr.tab":this.get("temp.expr.tab"),"temp.bottom.tab":this.get("temp.bottom.tab"),projectName:this.get("project.name")}));else if(!window.confirm("Leaving this page will lose any unsaved changes. Are you sure you want to leave?"))return!1})),this.loadProjects(),t.autosave){let t=window.localStorage.getItem("autosave");t&&(t=JSON.parse(t));const e=t&&t.projectName;if(e){const t=this.get("projects").findIndex((t=>t.name===e));~t&&this.linkProject(`projects.${t}`)}this.set("",t,{deep:!0})}this._inited=!0,this.applySettings()},expr(t,e){const r=e||t.resolve();this.link(r,"expr"),this.set("temp.expr.path",r)},teardown(){this._undoWatch.cancel()},render(){setTimeout((()=>this._onChange(this.get("report"))),100)}},decorators:{expr(t,e){const r=this.getContext(t);const n=r.observe("~/temp.expr.hover",(function(n){e&&(n=n.replace(/\.fields\./,".headers.")),n===r.resolve(".")?t.classList.add("hover-expr"):t.classList.remove("hover-expr")})),o=[r.listen("click",(()=>this.fire("expr",r))),r.listen("mouseover",(()=>{let t=r.resolve();e&&(t=t.replace(/\.headers\./,".fields.")),r.set("~/temp.expr.hover",t)})),r.listen("mouseout",(()=>r.set("~/temp.expr.hover","")))];return{teardown(){n.cancel(),o.forEach((t=>t.cancel())),t.classList.remove("active-expr")}}},widget(t,e){const r=this.getContext(t);t.classList.add(e),t.classList.add("widget");const n=r.observe("~/temp.widget",(function(e){e===r.resolve()?t.classList.add("active-widget"):t.classList.remove("active-widget")})),o=r.observe("~/temp.hover",(function(e){e===r.resolve()?t.classList.add("hover-widget"):t.classList.remove("hover-widget")})),i=r.listen("click",(t=>{const e=r.resolve();return this.link(e,"widget"),this.set("temp.widget",e),this.set("temp.name",`${r.get("label")||r.get("type")} `),t.stopPropagation(),t.preventDefault(),!1}));return{teardown(){n.cancel(),o.cancel(),i.cancel(),t.classList.remove(e),t.classList.remove("widget")}}},scrolled(t){const e=this.getContext(t),r=e.ractive;r._scrollers||(r._scrollers=[]),t.classList.add("scrolled");let n=setTimeout((()=>{o()}),100);function o(){n=null,t.scrollHeight>t.offsetHeight?(t.scrollTop>0?t.classList.remove("scroll-top"):t.classList.add("scroll-top"),t.scrollTop+t.offsetHeight<t.scrollHeight?t.classList.remove("scroll-bottom"):t.classList.add("scroll-bottom")):t.classList.add("scroll-top","scroll-bottom")}t.classList.add("scroll-top","scroll-bottom");const i=function(){n||(n=setTimeout(o,250))},s=e.listen("scroll",i);return r._scrollers.push(o),{invalidate:()=>(i(),""),teardown(){t.classList.remove("scrolled","scroll-top","scroll-bottom"),s.cancel(),r._scrollers.splice(r._scrollers.indexOf(o),1)}}},moveable(t){const e=this.getContext(t),r=e.get("@index");let n,o,i,s,a,l,f;const c=e.listen("mousedown",(t=>{i=e.get(`^^/layout.${r}.0`)||0,s=e.get(`^^/layout.${r}.1`)||0,a=l=0,n=t.clientX,o=t.clientY;const c=document.getElementById("sizer");f=c?c.offsetHeight:12,document.body.addEventListener("mousemove",p),document.body.addEventListener("mouseup",d),document.body.addEventListener("keydown",m)}));function p(t){a=t.clientX-n,l=t.clientY-o,t.ctrlKey?e.set({[`^^/layout.${r}.0`]:i+a/f,[`^^/layout.${r}.1`]:s+l/f}):e.set({[`^^/layout.${r}.0`]:Math.round(i+a/f),[`^^/layout.${r}.1`]:Math.round(s+l/f)})}function d(){document.body.removeEventListener("mousemove",p),document.body.removeEventListener("mouseup",d),document.body.removeEventListener("keydown",m)}function m(t){"Escape"===t.key&&(d(),e.set({[`^^/layout.${r}.0`]:i,[`^^/layout.${r}.1`]:s}),console.log("ESCAPE!"))}return{teardown(){c.cancel()}}},invalidated(t){const e=this.getContext(t);return{teardown(){},invalidate(){e.hasListener("invalidate")&&e.raise("invalidate",{})}}},autosize:l,trackfocus:function(t,e){function r(t){const r=t.target;"selectionStart"in r&&(g[e||""]=r)}return t.addEventListener("focus",r,{capture:!0}),{teardown(){t.removeEventListener("focus",r,{capture:!0})}}},tracked(t,e){return this[e]=t,{teardown(){this[e]===t&&(this[e]=void 0)}}}},events:{keys:function(t,e){const r=Object.assign({},arguments[arguments.length-1]);if(arguments.length>2){r.keys=[];for(let t=2;t<arguments.length;t++)"string"==typeof arguments[t]&&r.keys.push(arguments[t])}const n=["ctrl","shift","alt","meta"],o=t=>{for(const e of n)if(r[e]&&!t[`${e}Key`]||!r[e]&&t[`${e}Key`])return;~r.keys.indexOf(t.key)&&e({event:t})};return window.addEventListener("keydown",o,{capture:!0,passive:!0}),{teardown(){window.removeEventListener("keydown",o,{capture:!0})}}}}});const S=["family","size","weight","color","align","line","right","pre","clamp"];function z(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(z);const e={};for(const r in t){const n=t[r];if((!1!==n||"classifyStyles"===r)&&(("hide"!==r&&"br"!==r||n)&&("height"!==r||"auto"!==n||"container"!==t.type&&"repeater"!==t.type)))if(Array.isArray(n)){const t=[];n.forEach((e=>t.push(z(e)))),e[r]=t}else if("object"==typeof n)if("font"===r){if(void 0===Object.values(n).find((t=>null!=t&&""!==t&&!1!==t)))continue;{const r={};if(S.forEach((t=>null!=n[t]&&""!==n[t]&&!1!==n[t]&&(r[t]=n[t]))),"html"===t.type&&1===Object.keys(r).length&&0===r.line)continue;e.font=r}}else{if(!Object.keys(n).length)continue;if(1===Object.keys(n).length&&"x"in n&&!n.x)continue;if("format"===r&&!n.name)continue;{const t=z(n);""!==t&&(e[r]=t)}}else{if(""===n)continue;e[r]=n}}return"page"!==e.type&&"flow"!==e.type&&"delimited"!==e.type||(e.context&&!Object.keys(e.context).length&&delete e.context,e.extraContext||delete e.extraContext,e.defaultParams&&!Object.keys(e.defaultParams).length&&delete e.defaultParams,e.sources&&!e.sources.length&&delete e.sources,e.parameters&&!e.parameters.length&&delete e.parameters,e.orientation&&"landscape"!==e.orientation||delete e.orientation,e.name||delete e.name,e.header&&Object.keys(e.header).length&&Array.isArray(e.header.widgets)&&e.header.widgets.length||delete e.header,e.footer&&Object.keys(e.footer).length&&Array.isArray(e.footer.widgets)&&e.footer.widgets.length||delete e.footer,e.width||delete e.width,e.margin&&e.margin.length||delete e.margin,e.source||delete e.source,e.headers&&e.headers.length||delete e.headers,e.record||delete e.record,e.field||delete e.field,e.quote||delete e.quote),e.source&&(e.filter||delete e.filter,e.sort||delete e.sort,e.base||delete e.base,e.parameters&&0!==Object.keys(e.parameters).length||delete e.parameters),(e.classifyStyles||null==e.classifyStyles)&&delete e.classifyStyles,e}const L={throw:!0,consumeAll:!0};function A(t,e,n,o){if("string"!=typeof t&&"object"!=typeof t)return t;const i=e?r.parseTemplate:r.parse,s=Object.assign(L,{template:e}),a=n?0:40,l=n,f=Object.assign({listWrap:a,noIndent:l},o,{template:e});if("string"==typeof t)try{return r.stringify(i(t,s),f)}catch(e){return t}else{if(Array.isArray(t))return t.map((t=>{if("string"==typeof t)try{return r.stringify(i(t,s),f)}catch(e){return t}else{if(!("text"in t)||"string"!=typeof t.text)return r.isValueOrExpr(t)?r.stringify(t,f):t;try{return Object.assign({},t,{text:r.stringify(i(t.text,s),f)})}catch(e){return t}}}));if("x"in t&&"string"==typeof t.x)try{return{x:r.stringify(i(t.x,s),f)}}catch(e){return t}else if(r.isValueOrExpr(t))return r.stringify(t,f)}return t}function C(t,e,r){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map((t=>C(t,e,r)));const n={};for(const o in t){const i=t[o];n[o]="text"===o||"width"===o||"height"===o||"hide"===o||"br"===o?A(i,!1,e,r):"name"===o||"html"===o?A(i,!0,e,r):C(i,e,r)}return n}const T=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/;function $(t,e){return"number"==typeof t?`${t}`:"boolean"==typeof t?t?"true":"false":null==t?"null":"string"==typeof t?"json"===e?JSON.stringify(t):`\`${t.replace(/(`|${|\\)/g,"\\$1")}\``:Array.isArray(t)?`[${t.map((t=>$(t,e))).join(",")}]`:"object"==typeof t?`{${Object.entries(t).map((([t,r])=>void 0===r?r:`${T.test(t)?t:`'${t}'`}:${$(r,e)}`)).filter((t=>!!t)).join(",")}}`:void 0}r.registerOperator({type:"value",names:["log"],apply(t,e){console.log.apply(console,e)}}),t.ReportDesigner=k,t.debounce=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=raport.design.umd.min.js.map

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("ractive"),require("raport/index")):"function"==typeof define&&define.amd?define(["exports","ractive","raport/index"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).Raport=t.Raport||{},t.Raport.Design={}),t.Ractive,t.Raport)}(this,(function(t,e,r){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=n(e);const o={v:4,t:[{t:7,e:"div",m:[{t:13,n:"class",f:"raport-report",g:1},{n:"trackfocus",t:71}],f:[{t:8,r:"left"}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"layout",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["report.type","report.sources.length"],s:'_0==="delimited"&&_1!==1'}}],t:13},{n:["click"],t:70,f:{r:["@this"],s:'[_0.run()&&_0.set("tab","result")]'}}],f:["▷"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","design")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0!=="result"&&_0!=="definition"&&_0!=="import"&&_0!=="project"'}}]}],f:["Designer"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","definition")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="definition"'}}]}],f:["Definition"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","import")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="import"'}}]}],f:["Import Data"]}],n:50,x:{r:["data","@this"],s:'_0&&_1.readLink("data")'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","result")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="result"'}}]}],f:["Output"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/report.name","~/result","~/report.type"],s:'[_0.download((_1||"report")+(_3==="delimited"?".csv":".html"),_2,_3==="delimited"?"text/csv":"text/html")]'}},{n:"title",f:"Save output to a file",t:13,g:1}],f:["Save Output"]}],n:50,x:{r:["tab"],s:'_0==="result"'}}],n:50,r:"result"}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"which",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("import")]'}}],f:["×"]}," Close Import"]}],n:50,x:{r:["data","tab"],s:'_0&&_1==="import"'}}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab right",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("tab","project")]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="project"'}}]}],f:["Project"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab designer",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0!=="result"&&_0!=="definition"&&_0!=="import"&&_0!=="project"'}}]}],f:[{t:8,r:"design"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab report-definition",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="definition"'}}]}],f:[{t:8,r:"definition"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab data-import",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="import"'}}]}],f:[{t:8,r:"data-import"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"result tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="result"'}}]}],f:[{t:7,e:"iframe",m:[{n:"id",f:"result",t:13,g:1},{n:"srcdoc",f:[{t:2,x:{r:["~/report.type","@this","result"],s:'_0==="delimited"?"<style>pre { margin: 1rem; background-color: #fff; padding: 0.5rem; }</style><code><pre>"+_2+"</pre></code>"+_1.frameExtra():_2'}}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"project tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["tab"],s:'_0==="project"'}}]}],f:[{t:8,r:"project"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"bottom-pane",g:1},{n:"class-active",t:13,f:[{t:2,r:"~/temp.bottom.pop"}]}],f:[{t:8,r:"bottom"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"position: absolute; left: -1000px; width: 1rem; height: 1rem;",g:1},{n:"id",f:"sizer",t:13,g:1}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"position: absolute; left: -1000px; width: 5rem; height: 5rem; overflow: auto;",g:1}],f:[{t:7,e:"textarea",m:[{n:"id",f:"text-helper",t:13},{n:"style",f:"padding: 0.5em;",t:13}]}]}]}],e:{0:function(){return 0},1:function(){return 1},2:function(){return 2},3:function(){return 3},4:function(){return 4},5:function(){return 5},6:function(){return 6},7:function(){return 7},'_0==="delimited"&&_1!==1':function(t,e){return"delimited"===t&&1!==e},'[_0.run()&&_0.set("tab","result")]':function(t){return[t.run()&&t.set("tab","result")]},'[_0.set("tab","design")]':function(t){return[t.set("tab","design")]},'_0!=="result"&&_0!=="definition"&&_0!=="import"&&_0!=="project"':function(t){return"result"!==t&&"definition"!==t&&"import"!==t&&"project"!==t},'[_0.set("tab","definition")]':function(t){return[t.set("tab","definition")]},'_0==="definition"':function(t){return"definition"===t},'[_0.set("tab","import")]':function(t){return[t.set("tab","import")]},'_0==="import"':function(t){return"import"===t},'_0&&_1.readLink("data")':function(t,e){return t&&e.readLink("data")},'[_0.set("tab","result")]':function(t){return[t.set("tab","result")]},'_0==="result"':function(t){return"result"===t},'[_0.download((_1||"report")+(_3==="delimited"?".csv":".html"),_2,_3==="delimited"?"text/csv":"text/html")]':function(t,e,r,n){return[t.download((e||"report")+("delimited"===n?".csv":".html"),r,"delimited"===n?"text/csv":"text/html")]},'[_0.checkLink("import")]':function(t){return[t.checkLink("import")]},'_0&&_1==="import"':function(t,e){return t&&"import"===e},'[_0.set("tab","project")]':function(t){return[t.set("tab","project")]},'_0==="project"':function(t){return"project"===t},'_0==="delimited"?"<style>pre { margin: 1rem; background-color: #fff; padding: 0.5rem; }</style><code><pre>"+_2+"</pre></code>"+_1.frameExtra():_2':function(t,e,r){return"delimited"===t?"<style>pre { margin: 1rem; background-color: #fff; padding: 0.5rem; }</style><code><pre>"+r+"</pre></code>"+e.frameExtra():r},"[_0.saveProjects()]":function(t){return[t.saveProjects()]},'[_1.download(_0+".json",_1.stringifyProject())]':function(t,e){return[e.download(t+".json",e.stringifyProject())]},"[_0.cloneProject()]":function(t){return[t.cloneProject()]},"[_0.importProject()]":function(t){return[t.importProject()]},"[_0.makeProject(true)]":function(t){return[t.makeProject(!0)]},"[_0.removeProject()]":function(t){return[t.removeProject()]},'[_0.set("projectText",_0.stringifyProject())]':function(t){return[t.set("projectText",t.stringifyProject())]},"[_0.importProject(_1)]":function(t,e){return[t.importProject(e)]},"_0!=null":function(t){return null!=t},"[_0.makeProject()]":function(t){return[t.makeProject()]},"_0===_1":function(t,e){return t===e},"[_0.linkProject(_1)]":function(t,e){return[t.linkProject(e)]},"[_0.loadImportFile()]":function(t){return[t.loadImportFile()]},'_0==="fetch"':function(t){return"fetch"===t},'[_0.set("data.type",_1?"fetch":undefined)]':function(t,e){return[t.set("data.type",e?"fetch":void 0)]},undefined:function(){},'[_0.editExpr(_1+".url",{template:true}),false]':function(t,e){return[t.editExpr(e+".url",{template:!0}),!1]},'[(_0).push(".headers",[])]':function(t){return[t.push(".headers",[])]},"[_0.fetchData()]":function(t){return[t.fetchData()]},'[(_0).splice("../",_1,1)]':function(t,e){return[t.splice("../",e,1)]},'[_0.editExpr(_1+".1",{template:true}),false]':function(t,e){return[t.editExpr(e+".1",{template:!0}),!1]},'[_0.editExpr(_1+".body",{template:true}),false]':function(t,e){return[t.editExpr(e+".body",{template:!0}),!1]},'_0!=="GET"':function(t){return"GET"!==t},"[_1.autosize(_0),_1.tryImport(_2)]":function(t,e,r){return[e.autosize(t),e.tryImport(r)]},"[_0.addHeader()]":function(t){return[t.addHeader()]},"!_0":function(t){return!t},'[_0.set("report.headers",undefined)]':function(t){return[t.set("report.headers",void 0)]},'[_0.push("report.headers",""),_0.push("report.fields","")]':function(t){return[t.push("report.headers",""),t.push("report.fields","")]},"[_0.editExpr((_1))]":function(t,e){return[t.editExpr(e)]},"[_0.removeWidget((_1)),false]":function(t,e){return[t.removeWidget(e),!1]},"!!_0":function(t){return!!t},'[_1.push("report.fields",""),_0&&_1.push("report.headers","")]':function(t,e){return[e.push("report.fields",""),t&&e.push("report.headers","")]},'_0==="delimited"':function(t){return"delimited"===t},"_0.paperSize()":function(t){return t.paperSize()},'[_0.selectWidget("report")]':function(t){return[t.selectWidget("report")]},'[_0.unlink("widget"),_0.unlink("expr"),_0.set("temp",{name:"report ",widget:"report"})]':function(t){return[t.unlink("widget"),t.unlink("expr"),t.set("temp",{name:"report ",widget:"report"})]},'_0==="report"':function(t){return"report"===t},'[_0.set("temp.hover","report"),false]':function(t){return[t.set("temp.hover","report"),!1]},'[_0.set("temp.hover",""),false]':function(t){return[t.set("temp.hover",""),!1]},'[_0.set("report.header",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.header",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.set("report.header",{type:"container"})]':function(t){return[t.set("report.header",{type:"container"})]},'[_0.set("report.footer",undefined),_0.unlink("widget"),_0.set("temp.widget","")]':function(t){return[t.set("report.footer",void 0),t.unlink("widget"),t.set("temp.widget","")]},'[_0.set("report.footer",{type:"container"})]':function(t){return[t.set("report.footer",{type:"container"})]},'_0==="page"':function(t){return"page"===t},'"page header"':function(){return"page header"},'_0==="page"&&_1':function(t,e){return"page"===t&&e},'"page footer"':function(){return"page footer"},"[_0.loadReportFile()]":function(t){return[t.loadReportFile()]},'[_1.download((_0||"report")+".js"+(_2?"":"on"),_1.reportToString(true,_2,_3))]':function(t,e,r,n){return[e.download((t||"report")+".js"+(r?"":"on"),e.reportToString(!0,r,n))]},"[_0.fmtAll()]":function(t){return[t.fmtAll()]},"[_0.autosize(_1)]":function(t,e){return[t.autosize(e)]},"_0.reportToString(_1,_2,_3)":function(t,e,r,n){return t.reportToString(e,r,n)},'[_1.loadReportString(_0),_1.update("temp")]':function(t,e){return[e.loadReportString(t),e.update("temp")]},'[(_0).set(".width",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:_2)]':function(t,e,r){return[t.set(".width","number"==typeof e||void 0===e?{percent:e}:"object"==typeof e&&"percent"in e?{x:""}:r)]},'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":"Change to REM"':function(t){return"number"==typeof t||void 0===t?"Change to percent":"object"==typeof t&&"percent"in t?"Change to Expression":"Change to REM"},'typeof _0==="number"||_0===undefined':function(t){return"number"==typeof t||void 0===t},'typeof _0==="object"&&"percent" in _0':function(t){return"object"==typeof t&&"percent"in t},'_0==="label"':function(t){return"label"===t},'[(_0).set(".height",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:_2)]':function(t,e,r){return[t.set(".height","number"==typeof e||void 0===e?{percent:e}:"object"==typeof e&&"percent"in e?{x:""}:r)]},"_0.lastKey(_1)":function(t,e){return t.lastKey(e)},"Array.isArray(_0)":function(t){return Array.isArray(t)},'[(_0).set("^^/br",typeof _1==="object"?false:{x:""})]':function(t,e){return[t.set("^^/br","object"!=typeof e&&{x:""})]},'typeof _0==="object"?"Change to Boolean":"Change to Expression"':function(t){return"object"==typeof t?"Change to Boolean":"Change to Expression"},'typeof _0!=="object"':function(t){return"object"!=typeof t},'typeof _0==="object"':function(t){return"object"==typeof t},"_0.split(_1,2)":function(t,e){return t.split(e,2)},'[_0.editExpr(".hide")]':function(t){return[t.editExpr(".hide")]},'typeof _0==="undefined"':function(t){return void 0===t},'[(_0).set(".margin",undefined)]':function(t){return[t.set(".margin",void 0)]},'typeof _0!=="undefined"':function(t){return void 0!==t},'typeof _0==="number"':function(t){return"number"==typeof t},'[(_0).set(".margin",1)]':function(t){return[t.set(".margin",1)]},'typeof _0!=="number"':function(t){return"number"!=typeof t},"_0===2":function(t){return 2===t},'[(_0).set(".margin",[1,1])]':function(t){return[t.set(".margin",[1,1])]},"_0!==2":function(t){return 2!==t},"_0===4":function(t){return 4===t},'[(_0).set(".margin",[1,1,1,1])]':function(t){return[t.set(".margin",[1,1,1,1])]},"_0!==4":function(t){return 4!==t},'typeof _0==="object"&&"x" in _0':function(t){return"object"==typeof t&&"x"in t},'[(_0).set(".margin",{x:""})]':function(t){return[t.set(".margin",{x:""})]},"!_0||_1===undefined":function(t,e){return!t||void 0===e},"_0!==undefined":function(t){return void 0!==t},'[_0.editExpr(".border")]':function(t){return[t.editExpr(".border")]},'typeof _0==="string"':function(t){return"string"==typeof t},'[(_0).set(".border",undefined)]':function(t){return[t.set(".border",void 0)]},'[(_0).set(".border",1)]':function(t){return[t.set(".border",1)]},"_0===1":function(t){return 1===t},'[(_0).set(".border",[1])]':function(t){return[t.set(".border",[1])]},"_0!==1":function(t){return 1!==t},'[(_0).set(".border",[1,1])]':function(t){return[t.set(".border",[1,1])]},'[(_0).set(".border",[1,1,1,1])]':function(t){return[t.set(".border",[1,1,1,1])]},'[(_0).set(".border","")]':function(t){return[t.set(".border","")]},'typeof _0!=="string"':function(t){return"string"!=typeof t},'[(_0).set(".font.pre",_1?true:undefined)]':function(t,e){return[t.set(".font.pre",!!e||void 0)]},'_0==="measured"':function(t){return"measured"===t},'[(_0).set(".font.clamp",_1?true:undefined)]':function(t,e){return[t.set(".font.clamp",!!e||void 0)]},'[_0.editExpr(".url")]':function(t){return[t.editExpr(".url")]},'[typeof _0==="string"?_2.editExpr(_1+".source"):_2.editReportSrc((_3),".source")]':function(t,e,r,n){return["string"==typeof t?r.editExpr(e+".source"):r.editReportSrc(n,".source")]},'[(_0).set(".source","")]':function(t){return[t.set(".source","")]},'[(_0).set(".source",{source:""})]':function(t){return[t.set(".source",{source:""})]},"_0||_1":function(t,e){return t||e},"_0||_1||_2":function(t,e,r){return t||e||r},"_0&&_1":function(t,e){return t&&e},"_0.split(_1)":function(t,e){return t.split(e)},'[_0.editExpr(".text")]':function(t){return[t.editExpr(".text")]},"_0-1-_1":function(t,e){return t-1-e},"_0&&_2[_1]":function(t,e,r){return t&&r[e]},'Array.isArray(_0)?"manual":"auto"':function(t){return Array.isArray(t)?"manual":"auto"},'[(_0).set(".layout",_1==="manual"?[]:undefined)]':function(t,e){return[t.set(".layout","manual"===e?[]:void 0)]},'[_0.editExpr(".html",{html:true})]':function(t){return[t.editExpr(".html",{html:!0})]},'[_0.editExpr(".text",{label:true})]':function(t){return[t.editExpr(".text",{label:!0})]},'[(_0).set(".text",_2.getPartStrings(_1)),_2.editExpr(".text",{label:true})]':function(t,e,r){return[t.set(".text",r.getPartStrings(e)),r.editExpr(".text",{label:!0})]},'[(_0).set(".id",undefined)]':function(t){return[t.set(".id",void 0)]},'[(_0).set(".id","")]':function(t){return[t.set(".id","")]},"_0.inRepeater(_1)":function(t,e){return t.inRepeater(e)},'[(_0).set(".format",undefined)]':function(t){return[t.set(".format",void 0)]},'[(_0).set(".format",{})]':function(t){return[t.set(".format",{})]},'[(_0).push(".format.args","")]':function(t){return[t.push(".format.args","")]},'[(_0).splice("../",_1)]':function(t,e){return[t.splice("../",e)]},'_0==="params"':function(t){return"params"===t},'[_0.set("temp.bottom.tab","params"),_0.set("temp.bottom.pop",true)]':function(t){return[t.set("temp.bottom.tab","params"),t.set("temp.bottom.pop",!0)]},'!_0||_0==="expr"':function(t){return!t||"expr"===t},'[_0.set("temp.bottom.tab","expr"),_0.set("temp.bottom.pop",true)]':function(t){return[t.set("temp.bottom.tab","expr"),t.set("temp.bottom.pop",!0)]},'_0==="param"':function(t){return"param"===t},'[_0.set("temp.bottom.tab","param"),_0.set("temp.bottom.pop",true)]':function(t){return[t.set("temp.bottom.tab","param"),t.set("temp.bottom.pop",!0)]},'_0==="source"':function(t){return"source"===t},'[_0.set("temp.bottom.tab","source"),_0.set("temp.bottom.pop",true)]':function(t){return[t.set("temp.bottom.tab","source"),t.set("temp.bottom.pop",!0)]},'[_0.checkLink("expr")]':function(t){return[t.checkLink("expr")]},'_0.replace(/\\./g," 〉 ")':function(t){return t.replace(/\./g," 〉 ")},'_0&&(!_1||_1==="expr")':function(t,e){return t&&(!e||"expr"===e)},'[_0.checkLink("param")]':function(t){return[t.checkLink("param")]},"+_0.lastKey(_1)+1":function(t,e){return+t.lastKey(e)+1},'_0&&_1==="param"':function(t,e){return t&&"param"===e},'[_0.checkLink("source")]':function(t){return[t.checkLink("source")]},'_0&&_1==="source"':function(t,e){return t&&"source"===e},'[_0.toggle("temp.bottom.pop")]':function(t){return[t.toggle("temp.bottom.pop")]},"[_0.eval()]":function(t){return[t.eval()]},'_0==="text"':function(t){return"text"===t},'[_0.set("temp.expr.tab","text")]':function(t){return[t.set("temp.expr.tab","text")]},"[_0.fmt()]":function(t){return[t.fmt()]},'_0==="text"&&!_1':function(t,e){return"text"===t&&!e},'_0?"":"none"':function(t){return t?"":"none"},'_0==="html"':function(t){return"html"===t},'[_0.set("temp.expr.tab","html")]':function(t){return[t.set("temp.expr.tab","html")]},'[_0.set("temp.expr.tab","result")]':function(t){return[t.set("temp.expr.tab","result")]},'_0==="parsed"':function(t){return"parsed"===t},'[_0.set("temp.expr.tab","parsed")]':function(t){return[t.set("temp.expr.tab","parsed")]},'!_0||_0==="text"':function(t){return!t||"text"===t},'[(_0).set(".str",_1.getPartStrings(_2))]':function(t,e,r){return[t.set(".str",e.getPartStrings(r))]},'[(_0).push(".str","")]':function(t){return[t.push(".str","")]},"_0===0":function(t){return 0===t},"[_0.moveUp((_1))]":function(t,e){return[t.moveUp(e)]},"[_0.moveDown((_1))]":function(t,e){return[t.moveDown(e)]},'[(_0).set(".",{text:_1})]':function(t,e){return[t.set(".",{text:e})]},'[(_0).set(".",_1)]':function(t,e){return[t.set(".",e)]},"_0==null?1:_0":function(t){return null==t?1:t},'[(_0).set(".str",[_1])]':function(t,e){return[t.set(".str",[e])]},'[_0.command("bold")]':function(t){return[t.command("bold")]},'[_0.command("italic")]':function(t){return[t.command("italic")]},'[_0.command("underline")]':function(t){return[t.command("underline")]},'[_0.command("strikeThrough")]':function(t){return[t.command("strikeThrough")]},"[_0.setHTMLFontSize()]":function(t){return[t.setHTMLFontSize()]},'!_0||_0==="plain"':function(t){return!t||"plain"===t},'[_0.set("temp.expr.resulttype","plain")]':function(t){return[t.set("temp.expr.resulttype","plain")]},'_0&&_0!=="plain"':function(t){return t&&"plain"!==t},'_0==="json"':function(t){return"json"===t},'[_0.set("temp.expr.resulttype","json")]':function(t){return[t.set("temp.expr.resulttype","json")]},'_0!=="json"':function(t){return"json"!==t},'[_0.set("temp.expr.resulttype","html")]':function(t){return[t.set("temp.expr.resulttype","html")]},'_0!=="html"':function(t){return"html"!==t},"_0===undefined":function(t){return void 0===t},'JSON.stringify(_0,null,"  ")':function(t){return JSON.stringify(t,null,"  ")},'_0==="ast"||_0==="text"||_0==="html"?"":"none"':function(t){return"ast"===t||"text"===t||"html"===t?"":"none"},'_0==="ast"&&(_1).decorators.scrolled&&(_1).decorators.scrolled.invalidate()||""&&""':function(t,e){return"ast"===t&&e.decorators.scrolled&&e.decorators.scrolled.invalidate()||""},"[_0.insertOp(_1)]":function(t,e){return[t.insertOp(e)]},'[(_0).set(".options",!!_1?undefined:[])]':function(t,e){return[t.set(".options",e?void 0:[])]},"_0||!_1":function(t,e){return t||!e},'[(_2).push(".options",!_0?_1:{label:_0,value:_1}),(_2).set({"ctx.label":"","ctx.value":""})]':function(t,e,r){return[r.push(".options",t?{label:t,value:e}:e),r.set({"ctx.label":"","ctx.value":""})]},'[_0.editExpr(_1+".base")]':function(t,e){return[t.editExpr(e+".base")]},'[_0.editExpr(_1+".filter")]':function(t,e){return[t.editExpr(e+".filter")]},'[_0.editExpr(_1+".sort")]':function(t,e){return[t.editExpr(e+".sort")]},'[(_0).push(".group","")]':function(t){return[t.push(".group","")]},'[(_0).set(".group",undefined)]':function(t){return[t.set(".group",void 0)]},"_0+1":function(t){return t+1},'[_0.editExpr("~/"+_1)]':function(t,e){return[t.editExpr("~/"+e)]},'[(_0).set(".group",[""])]':function(t){return[t.set(".group",[""])]},"[_0.exprToggle(_1)]":function(t,e){return[t.exprToggle(e)]},'_1[_0]?"-":"+"':function(t,e){return e[t]?"-":"+"},"[_0.insertRef(_1)]":function(t,e){return[t.insertRef(e)]},'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]':function(t,e,r){return[Array.isArray(t)?r.splice("../",e,1):r.set(".",void 0)]},'[(_0).set(".source",{r:""})]':function(t){return[t.set(".source",{r:""})]},'[(_0).set(".apply",{r:""})]':function(t){return[t.set(".apply",{r:""})]},'_1[_0]&&_1[_0].type==="aggregate"':function(t,e){return e[t]&&"aggregate"===e[t].type},"[_0.retypeASTNode(_1,_2)]":function(t,e,r){return[t.retypeASTNode(e,r)]},'_1&&"op" in _1?"operator":_1&&"v" in _1?(typeof _0==="string"?"string":typeof _0==="number"?"number":"object"):_1&&"r" in _1?"reference":"undefined"':function(t,e){return e&&"op"in e?"operator":e&&"v"in e?"string"==typeof t?"string":"number"==typeof t?"number":"object":e&&"r"in e?"reference":"undefined"},'[_0!==_2&&[_1.link(_2,"temp.expr.part"),_1.set("temp.expr.partpath",_2)],false]':function(t,e,r){return[t!==r&&[e.link(r,"temp.expr.part"),e.set("temp.expr.partpath",r)],!1]},'(_0&&("op" in _0?"op":"v" in _0?"value":"r" in _0?"ref":"wat"))||"wat"':function(t){return t&&("op"in t?"op":"v"in t?"value":"r"in t?"ref":"wat")||"wat"},'[(_0).push(".args",{v:""})]':function(t){return[t.push(".args",{v:""})]},'_0&&"op" in _0':function(t){return t&&"op"in t},'_0&&"v" in _0':function(t){return t&&"v"in t},'_0&&"r" in _0':function(t){return t&&"r"in t},'"+ "':function(){return"+ "},'"=> "':function(){return"=> "},'[_0.set("report.defaultParams",_1)]':function(t,e){return[t.set("report.defaultParams",e)]},'_0==="boolean"':function(t){return"boolean"===t},'_0==="number"':function(t){return"number"===t},"[_0.addWidget(_1)]":function(t,e){return[t.addWidget(e)]},'_0!=="delimited"&&(_1==="container"||_2==="report")':function(t,e,r){return"delimited"!==t&&("container"===e||"report"===r)},"[_0.treeScrollToActive()]":function(t){return[t.treeScrollToActive()]},'[_0.editExpr("report.name",{template:true}),false]':function(t){return[t.editExpr("report.name",{template:!0}),!1]},'_0!=="delimited"':function(t){return"delimited"!==t},'[_0.push("report.parameters",{})]':function(t){return[t.push("report.parameters",{})]},"[_0.editParam((_1))]":function(t,e){return[t.editParam(e)]},'[_0.checkLink("param",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("param",e),r.splice("../",n,1)]},'[_0.push("sources",{})]':function(t){return[t.push("sources",{})]},'[(_0).link(_1,"~/data"),_2.set("tab","import")]':function(t,e,r){return[t.link(e,"~/data"),r.set("tab","import")]},"[_0.logData(_1)]":function(t,e){return[t.logData(e)]},'[_0.checkLink("import",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("import",e),r.splice("../",n,1)]},'[_0.push("report.sources",{name:"",parameters:{}})]':function(t){return[t.push("report.sources",{name:"",parameters:{}})]},'_0!=="delimited"||_1<1':function(t,e){return"delimited"!==t||e<1},"[_0.editReportSrc((_1))]":function(t,e){return[t.editReportSrc(e)]},'[_0.checkLink("source",_1),(_2).splice("../",_3,1)]':function(t,e,r,n){return[t.checkLink("source",e),r.splice("../",n,1)]},'_0+"-props"':function(t){return t+"-props"},'[_0.set("temp.expr.hover",_1),false]':function(t,e){return[t.set("temp.expr.hover",e),!1]},'[_0.set("temp.expr.hover",""),false]':function(t){return[t.set("temp.expr.hover",""),!1]},'[_1.moveUp((_2),"../",_3),_0&&_1.moveUp((_2),"~/report.header",_3),false]':function(t,e,r,n){return[e.moveUp(r,"../",n),t&&e.moveUp(r,"~/report.header",n),!1]},'[_1.moveDown((_2),"../",_3),_0&&_1.moveDown((_2),"~/report.header",_3),false]':function(t,e,r,n){return[e.moveDown(r,"../",n),t&&e.moveDown(r,"~/report.header",n),!1]},'[_4.checkLink("expr",_0),(_2).splice("../",_3,1),_1&&(_2).splice("~/report.header",_3,1),_4.checkExpr(),false]':function(t,e,r,n,s){return[s.checkLink("expr",t),r.splice("../",n,1),e&&r.splice("~/report.header",n,1),s.checkExpr(),!1]},"[_0.selectWidget(_1),false]":function(t,e){return[t.selectWidget(e),!1]},'[_0.set("temp.hover",_1),false]':function(t,e){return[t.set("temp.hover",e),!1]},'[_0.moveUp((_1)),_0.moveUp((_1),"^^/groupEnds"),false]':function(t,e){return[t.moveUp(e),t.moveUp(e,"^^/groupEnds"),!1]},'[_0.moveDown((_1)),_0.moveDown((_1),"^^/groupEnds"),false]':function(t,e){return[t.moveDown(e),t.moveDown(e,"^^/groupEnds"),!1]},'_0==="repeater"&&_1':function(t,e){return"repeater"===t&&e},'_0!=="row"||_1!=="repeater"':function(t,e){return"row"!==t||"repeater"!==e},'_0==="container"':function(t){return"container"===t},'[_1.moveUp((_2)),Array.isArray(_0)?_1.moveUp((_2),"^^/layout"):false,false]':function(t,e,r){return[e.moveUp(r),!!Array.isArray(t)&&e.moveUp(r,"^^/layout"),!1]},'[_1.moveDown((_2)),Array.isArray(_0)?_1.moveDown((_2),"^^/groupEnds"):false,false]':function(t,e,r){return[e.moveDown(r),!!Array.isArray(t)&&e.moveDown(r,"^^/groupEnds"),!1]},'[(_0).set(".group",undefined),(_0).set(".groupEnds",[true]),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".group",void 0),t.set(".groupEnds",[!0]),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).push(".group",{type:"container"}),(_0).splice(".groupEnds",-1,0,true)]':function(t){return[t.push(".group",{type:"container"}),t.splice(".groupEnds",-1,0,!0)]},'[(_0).set(".group",[{type:"container"}]),(_0).set(".groupEnds",[true,true])]':function(t){return[t.set(".group",[{type:"container"}]),t.set(".groupEnds",[!0,!0])]},'[(_0).set(".header",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".header",void 0),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).set(".header",{type:"container"})]':function(t){return[t.set(".header",{type:"container"})]},'[(_0).set(".footer",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]':function(t,e){return[t.set(".footer",void 0),e.unlink("widget"),e.set("temp.widget",void 0)]},'[(_0).set(".footer",{type:"container"})]':function(t){return[t.set(".footer",{type:"container"})]},'"Group Header "+(_0+1)':function(t){return"Group Header "+(t+1)},'"Header"':function(){return"Header"},'(_0).set(".row",{type:"container"})&&""':function(t){return t.set(".row",{type:"container"})&&""},'"Row"':function(){return"Row"},'"Footer"':function(){return"Footer"},'[(_0).toggle("ctx.preview")]':function(t){return[t.toggle("ctx.preview")]},"[_0.autosizeHtml((_1))]":function(t,e){return[t.autosizeHtml(e)]},'[_0.editExpr((_1).resolve(".html"),{html:true})]':function(t,e){return[t.editExpr(e.resolve(".html"),{html:!0})]},"_0||0.83":function(t){return t||.83},'_0===0?"initial":(_0||_1||1)+"rem"':function(t,e){return 0===t?"initial":(t||e||1)+"rem"},"_0<50":function(t){return t<50},"_0.evalExpr(_1)":function(t,e){return t.evalExpr(e)},"[_0.selectWidget(_1)]":function(t,e){return[t.selectWidget(e)]},"_0.calcFont(_1)":function(t,e){return t.calcFont(e)},'_0||"container"':function(t){return t||"container"},'(_0).set("ctx.layout",_1==="row"||!_1?"auto":"manual")&&""':function(t,e){return t.set("ctx.layout","row"!==e&&e?"manual":"auto")&&""},'[_0==="auto"?(_1).set(".layout",undefined):(_1).set(".layout",[])]':function(t,e){return["auto"===t?e.set(".layout",void 0):e.set(".layout",[])]},false:function(){return!1},"[_0]":function(t){return[t]},'_0!=="container"':function(t){return"container"!==t},"(_1[_0]||[])[0]||0":function(t,e){return(e[t]||[])[0]||0},"(_1[_0]||[])[1]||0":function(t,e){return(e[t]||[])[1]||0},"_0===true":function(t){return!0===t},"_0.calcMargin(_1)":function(t,e){return t.calcMargin(e)},"_0.calcBorder(_1)":function(t,e){return t.calcBorder(e)},"[_0.removeWidget((_1),false)]":function(t,e){return[t.removeWidget(e,!1)]},"_0.calcWidthWithMargin(_1,_2)":function(t,e,r){return t.calcWidthWithMargin(e,r)},"_0.calcHeightWithMargin(_1)":function(t,e){return t.calcHeightWithMargin(e)}},p:{types:[{t:7,e:"option",f:["any"]}," ",{t:7,e:"option",f:["string"]}," ",{t:7,e:"option",f:["number"]}," ",{t:7,e:"option",f:["boolean"]}," ",{t:7,e:"option",f:["date"]}," ",{t:7,e:"option",f:["array"]}," ",{t:7,e:"option",f:["object"]}," ",{t:7,e:"option",f:["string[]"]}," ",{t:7,e:"option",f:["number[]"]}," ",{t:7,e:"option",f:["boolean[]"]}," ",{t:7,e:"option",f:["date[]"]}," ",{t:7,e:"option",f:["object[]"]}],project:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper project",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"project-pane",g:1}],f:[{t:4,f:[{t:7,e:"div",f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"project-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"label",m:[{t:13,n:"style",f:"width: 20rem;",g:1},{t:13,n:"class",f:"input",g:1}],f:["Project Name",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"~/project.name"}],t:13}]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Save all projects to browser storage",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.saveProjects()]"}}],f:["Save Projects"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Export this project to a file",t:13,g:1},{n:["click"],t:70,f:{r:["~/project.name","@this"],s:'[_1.download(_0+".json",_1.stringifyProject())]'}}],f:["Export Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Create a copy of this project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.cloneProject()]"}}],f:["Clone Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Import this project definition from a file",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.importProject()]"}}],f:["Import Project"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Create a new empty project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.makeProject(true)]"}}],f:["New Project"]}," ",{t:7,e:"br"},{t:7,e:"br"}," ",{t:7,e:"button",m:[{t:13,n:"style",f:"background: darkred;",g:1},{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Delete this project from browser storage",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.removeProject()]"}}],f:["Delete Project"]}," ",{t:7,e:"br"},{t:7,e:"br"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Export this project as text to the below text field",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("projectText",_0.stringifyProject())]'}}],f:["Refresh Text"]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"grow area",g:1}],f:["Project Definition",{t:7,e:"textarea",m:[{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@node.value"],s:"[_0.importProject(_1)]"}}],f:[{t:2,r:"projectText"}]}]}],n:50,x:{r:["~/project"],s:"_0!=null"}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:"title",f:"Convert the current definition to a project",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.makeProject()]"}}],f:["Make Project"]}]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"project-pane-right",g:1}],f:["Projects ",{t:7,e:"div",m:[{t:13,n:"class",f:"project-list",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"project-item",g:1},{n:"title",f:["Load ",{t:2,r:".name"},", discarding any unsaved changes in the current project or definitions"],t:13},{n:"class-active-project",t:13,f:[{t:2,x:{r:[".","~/project"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.linkProject(_1)]"}}],f:[{t:2,r:".name"}]}],n:52,r:"~/projects"}]}]}]}],"data-import":[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited import paper",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"import-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"definition",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.loadImportFile()]"}},{n:"title",f:"Import data from a file",t:13,g:1}],f:["Load"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"checked",f:[{t:2,x:{r:["data.type"],s:'_0==="fetch"'}}],t:13},{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@node.checked"],s:'[_0.set("data.type",_1?"fetch":undefined)]'}}]}," Fetch request?"]}]}," ",{t:4,f:[{t:7,e:"div",f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"radio",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"name",f:[{t:2,r:"data.eval"}],t:13},{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}]}," JSON"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"radio",t:13},{n:"style",f:"vertical-align: middle;",t:13},{n:"name",f:[{t:2,r:"data.eval"}],t:13},{n:"value",f:"txt",t:13}]}," Plain text"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"fetch scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"label",m:[{t:13,n:"style",f:"width: 26rem;",g:1},{t:13,n:"class",f:"input",g:1}],f:["URL ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".url",{template:true}),false]'}}],f:["✎"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".url"}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Method",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".method"}],t:13}],f:[" ",{t:7,e:"option",f:["GET"]}," ",{t:7,e:"option",f:["POST"]}," ",{t:7,e:"option",f:["PUT"]}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"check",g:1},{n:"title",f:"Check if this source should be fetched before each run or leave unchecked if cached data can be used",t:13,g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".fetch"}],t:13}]}," Fetch on each run?"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".headers",[])]'}}],f:["Add Header"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fetchData()]"}}],f:["Fetch Now"]}," ",{t:4,f:[{t:7,e:"h3",f:["Headers"]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"fetch-header",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Remove header",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:["×"]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Header",{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:".",m:[{r:[],s:"0"}]}}],t:13}]}]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"input",g:1}],f:["Value ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".1",{template:true}),false]'}}],f:["✎"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:".",m:[{r:[],s:"1"}]}}],t:13}]}]}]}],n:52,r:".headers"}],n:50,r:".headers"}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"area",g:1}],f:["Body ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr(_1+".body",{template:true}),false]'}}],f:["✎"]},{t:7,e:"textarea",f:[{t:2,r:".body"}]}]}],n:50,x:{r:[".method"],s:'_0!=="GET"'}}],n:54,r:"data"}]}]}],n:50,x:{r:["data.type"],s:'_0==="fetch"'}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"json",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"textarea",m:[{n:"invalidated",t:71},{n:["change","input","invalidate"],t:70,f:{r:["@node","@this","@node.value"],s:"[_1.autosize(_0),_1.tryImport(_2)]"}}]}]}]}]}]}]}],design:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:["Report ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.addHeader()]"}}],f:["Add Header"]}],n:50,x:{r:["report.headers"],s:"!_0"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.headers",undefined)]'}}],f:["Remove Header"]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:["Header ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.headers",""),_0.push("report.fields","")]'}}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children fields",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"field",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}},{n:"class-active-expr",t:13,f:[{t:2,x:{r:["~/temp.expr.path","@keypath"],s:"_0===_1"}}]},{n:"expr",t:71}],f:[{t:7,e:"span",f:[{t:2,r:"."}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:["×"]}]}],n:52,r:"report.headers"}]}]}],n:50,x:{r:["~/report.headers"],s:"!!_0"}}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widget",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1}],f:["Row ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["~/report.headers","@this"],s:'[_1.push("report.fields",""),_0&&_1.push("report.headers","")]'}}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"children fields",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"field",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}},{n:"class-active-expr",t:13,f:[{t:2,x:{r:["~/temp.expr.path","@keypath"],s:"_0===_1"}}]},{n:"expr",t:71}],f:[{t:7,e:"span",f:[{t:2,r:"."}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:["×"]}]}],n:52,r:"report.fields"}]}]}]}]}]}]}]}],n:50,x:{r:["report.type"],s:'_0==="delimited"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"paper",g:1},{n:"style",f:[{t:2,x:{r:["@this"],s:"_0.paperSize()"}}],t:13},{n:["click"],t:70,f:{r:["@this"],s:'[_0.selectWidget("report")]'}}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"cursor: pointer;",g:1},{t:13,n:"class",f:"bar",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.unlink("widget"),_0.unlink("expr"),_0.set("temp",{name:"report ",widget:"report"})]'}},{n:"class-active",t:13,f:[{t:2,x:{r:["temp.widget"],s:'_0==="report"'}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["temp.hover"],s:'_0==="report"'}}]},{n:["mouseover"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover","report"),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",f:["report"]}," ",{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.header",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove page header"]}],n:50,r:"report.header"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.header",{type:"container"})]'}}],f:["Add page header"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.footer",undefined),_0.unlink("widget"),_0.set("temp.widget","")]'}}],f:["Remove page footer"]}],n:50,r:"report.footer"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("report.footer",{type:"container"})]'}}],f:["Add page footer"]}],n:51,l:1}],n:50,x:{r:["report.type"],s:'_0==="page"'}}]}," ",{t:4,f:[{t:8,r:"widget",c:{r:"~/report.header"},z:[{n:"label",x:{x:{r:[],s:'"page header"'}}}]}],n:50,x:{r:["~/report.type","~/report.header"],s:'_0==="page"&&_1'}}," ",{t:4,f:[{t:8,r:"widget"}],n:52,r:"~/report.widgets"}," ",{t:4,f:[{t:8,r:"widget",c:{r:"~/report.footer"},z:[{n:"label",x:{x:{r:[],s:'"page footer"'}}}]}],n:50,x:{r:["~/report.type","~/report.footer"],s:'_0==="page"&&_1'}}]}]}]}],n:51,l:1}],definition:[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited paper",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"file",t:13},{n:"style",f:"display: none;",t:13},{n:"id",f:"definition-file",t:13},{n:"accept",f:"application/json",t:13}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"definition",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.loadReportFile()]"}},{n:"title",f:"Load report definition from a file",t:13,g:1}],f:["Load"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:["click"],t:70,f:{r:["~/report.name","@this","~/tmp.js","~/tmp.strings"],s:'[_1.download((_0||"report")+".js"+(_2?"":"on"),_1.reportToString(true,_2,_3))]'}},{n:"title",f:"Save report definition to a file",t:13,g:1}],f:["Save"]}," ",{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/tmp.compact"}],t:13},{n:"style",f:"vertical-align: middle;",t:13}]}," Compact?"]}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/tmp.js"}],t:13},{n:"style",f:"vertical-align: middle;",t:13}]}," JS?"]}],n:50,r:"~/tmp.compact"}," ",{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"spacer",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/tmp.strings"}],t:13}],f:[{t:7,e:"option",f:["json"]},{t:7,e:"option",f:["template"]}]}]}],n:50,r:"~/tmp.js"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fmtAll()]"}},{n:"title",f:"Reformat all expressions",t:13,g:1}],f:["Format All"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"json",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"textarea",m:[{n:"invalidated",t:71},{n:["change","input","invalidate"],t:70,f:{r:["@this","@node"],s:"[_0.autosize(_1)]"}},{t:73,v:"t",f:"false"},{n:"value",f:[{t:2,x:{r:["@this","~/tmp.compact","~/tmp.js","~/tmp.strings"],s:"_0.reportToString(_1,_2,_3)"}}],t:13},{n:["change"],t:70,f:{r:["@node.value","@this"],s:'[_1.loadReportString(_0),_1.update("temp")]'}}]}]}]}]}]}]}],"widget-props":[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Width of the ",{t:2,r:".type"}," in rem, if a number, a percentage of the parent, or an expression, defaulting to 100%"],t:13}],f:["Width ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".width",".width.percent"],s:'[(_0).set(".width",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:_2)]'}},{n:"title",f:[{t:2,x:{r:[".width"],s:'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":"Change to REM"'}}],t:13}],f:[" ",{t:4,f:["#"],n:50,x:{r:[".width"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:["%"],n:50,x:{r:[".width"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:["✎"],n:51,l:1}]}]}," ",{t:7,e:"span",f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".width"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["rem"]}],n:50,x:{r:[".width"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".width.percent"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["%"]}," "],n:50,x:{r:[".width"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:[" ",{t:7,e:"textarea",f:[{t:2,r:".width.x"}]}],n:51,l:1}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Height of the ",{t:2,r:".type"}," in rem, if a number, a percentage of the parent, or an expression, default to",{t:4,f:["the largest font size or"],n:50,x:{r:["type"],s:'_0==="label"'}}," 1"],t:13}],f:["Height ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context",".height",".height.percent"],s:'[(_0).set(".height",typeof _1==="number"||_1===undefined?{percent:_1}:typeof _1==="object"&&"percent" in _1?{x:""}:_2)]'}},{n:"title",f:[{t:2,x:{r:[".height"],s:'typeof _0==="number"||_0===undefined?"Change to percent":typeof _0==="object"&&"percent" in _0?"Change to Expression":"Change to REM"'}}],t:13}],f:[" ",{t:4,f:["#"],n:50,x:{r:[".height"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:["%"],n:50,x:{r:[".height"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:["✎"],n:51,l:1}]}]}," ",{t:7,e:"span",f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".height"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["rem"]}],n:50,x:{r:[".height"],s:'typeof _0==="number"||_0===undefined'}},{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".height.percent"}],t:13},{n:"style-width",f:"calc(100% - 2rem)",t:13}]},{t:7,e:"span",m:[{t:13,n:"class",f:"unit",g:1}],f:["%"]}," "],n:50,x:{r:[".height"],s:'typeof _0==="object"&&"percent" in _0'},l:1},{t:4,f:[" ",{t:7,e:"textarea",f:[{t:2,r:".height.x"}]}],n:51,l:1}]}]}]}," ",{t:4,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["X"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:".layout",m:[{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"},{r:[],s:"0"}]}}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Y"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:".layout",m:[{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"},{r:[],s:"1"}]}}],t:13}]}]}]}],n:50,x:{r:[".layout"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"Cause the next widget to start on the next line in an automatic layout",t:13,g:1}],f:["Break? ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context","^^/br"],s:'[(_0).set("^^/br",typeof _1==="object"?false:{x:""})]'}},{n:"title",f:[{t:2,x:{r:["^^/br"],s:'typeof _0==="object"?"Change to Boolean":"Change to Expression"'}}],t:13}],f:[{t:4,f:["#"],n:50,x:{r:["^^/br"],s:'typeof _0!=="object"'}},{t:4,f:["✎"],n:51,l:1}]}]},{t:7,e:"span",f:[" ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"^^/br"}],t:13}]}],n:50,x:{r:["^^/br"],s:'typeof _0!=="object"'}},{t:4,f:[{t:7,e:"textarea",f:[{t:2,r:"^^/br.x"}]}],n:50,x:{r:["^^/br"],s:'typeof _0==="object"'},l:1}]}]}],n:51,l:1}],n:54,rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1,2)"}]}},{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"If this evaluates to true, the widget will be hidden and not affect automatic layouts",t:13,g:1}],f:["Hidden ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".hide")]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:7,e:"textarea",f:[{t:2,r:".hide"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Margin"]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="undefined"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",undefined)]'}}],n:50,x:{r:[".margin"],s:'typeof _0!=="undefined"'}}],f:["None"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="number"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",1)]'}}],n:50,x:{r:[".margin"],s:'typeof _0!=="number"'}}],f:["All"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin.length"],s:"_0===2"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",[1,1])]'}}],n:50,x:{r:[".margin.length"],s:"_0!==2"}}],f:["Paired"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin.length"],s:"_0===4"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",[1,1,1,1])]'}}],n:50,x:{r:[".margin.length"],s:"_0!==4"}}],f:["Individual"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".margin"],s:'typeof _0==="object"&&"x" in _0'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".margin",{x:""})]'}}],n:50,x:{r:[".margin",".margin.x"],s:"!_0||_1===undefined"}}],f:["Expression"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin"}],t:13}]}],n:50,x:{r:[".margin"],s:'typeof _0==="number"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"span"},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"span"},{t:7,e:"span"}]}," "],n:50,x:{r:[".margin.length"],s:"_0===2"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.3"}],t:13}]},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".margin.2"}],t:13}]},{t:7,e:"span"}]}," "],n:50,x:{r:[".margin.length"],s:"_0===4"},l:1},{t:4,f:[" ",{t:7,e:"textarea",f:[{t:2,r:".margin.x"}]}],n:50,x:{r:[".margin.x"],s:"_0!==undefined"},l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Border ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".border")]'}}],f:["✎"]}],n:50,x:{r:[".border"],s:'typeof _0==="string"'}}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="undefined"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",undefined)]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="undefined"'}}],f:["None"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="number"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",1)]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="number"'}}],f:["Bottom"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===1"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==1"}}],f:["All"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===2"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1,1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==2"}}],f:["Paired"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border.length"],s:"_0===4"}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border",[1,1,1,1])]'}}],n:50,x:{r:[".border.length"],s:"_0!==2"}}],f:["Individual"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".border"],s:'typeof _0==="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".border","")]'}}],n:50,x:{r:[".border"],s:'typeof _0!=="string"'}}],f:["Computed"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border"}],t:13}]}],n:50,x:{r:[".border"],s:'typeof _0==="number"'}},{t:4,f:[{t:7,e:"textarea",f:[{t:2,r:".border"}]}," "],n:50,x:{r:[".border"],s:'typeof _0==="string"'},l:1},{t:4,f:[" ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]}," "],n:50,x:{r:[".border.length"],s:"_0===1"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"span"},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"span"},{t:7,e:"span"}]}," "],n:50,x:{r:[".border.length"],s:"_0===2"},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"sides",g:1}],f:[{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.0"}],t:13}]},{t:7,e:"span"}," ",{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.3"}],t:13}]},{t:7,e:"div",m:[{t:13,n:"class",f:"square",g:1}]},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.1"}],t:13}]}," ",{t:7,e:"span"},{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".border.2"}],t:13}]},{t:7,e:"span"}]}],n:50,x:{r:[".border.length"],s:"_0===4"},l:1}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Alignment"]},{t:7,e:"span",f:[" ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".font.align"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(default)"]}," ",{t:7,e:"option",f:["left"]}," ",{t:7,e:"option",f:["center"]}," ",{t:7,e:"option",f:["right"]}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Display all whitespace, including newlines, within the content of the ",{t:2,r:".type"},"?"],t:13}],f:["Significant Space?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,r:".font.pre"}],t:13},{n:["change"],t:70,f:{r:["@context","@node.checked"],s:'[(_0).set(".font.pre",_1?true:undefined)]'}}]}]}]}],n:51,x:{r:[".type"],s:'_0==="measured"'}},{t:7,e:"label",f:[{t:7,e:"span",f:["Prevent Overflow?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,r:".font.clamp"}],t:13},{n:["change"],t:70,f:{r:["@context","@node.checked"],s:'[(_0).set(".font.clamp",_1?true:undefined)]'}}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Text Size"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.size"}],t:13}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Line Height"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.line"}],t:13}]}]}]}],n:51,x:{r:[".type"],s:'_0==="measured"'}},{t:7,e:"label",f:[{t:7,e:"span",f:["Font"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".font.family"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Color"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".font.color"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Weight"]},{t:7,e:"span",f:[" ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".font.weight"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(default)"]}," ",{t:7,e:"option",m:[{n:"value",f:"400",t:13}],f:["light"]}," ",{t:7,e:"option",m:[{n:"value",f:"500",t:13}],f:["normal"]}," ",{t:7,e:"option",m:[{n:"value",f:"600",t:13}],f:["bold"]}," ",{t:7,e:"option",m:[{n:"value",f:"700",t:13}],f:["bolder"]}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:["Padding to add to the right side of the ",{t:2,r:".type"},", which is useful for right-aligned text"],t:13}],f:["Right Pad"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.right"}],t:13}]}]}]}],"image-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["URL ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".url")]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:7,e:"textarea",f:[{t:2,r:".url"}]}]}]}],"repeater-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Source ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:[".source","@keypath","@this","@context"],s:'[typeof _0==="string"?_2.editExpr(_1+".source"):_2.editReportSrc((_3),".source")]'}}],f:["✎"]}]},{t:7,e:"span",f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".source"],s:'typeof _0==="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source","")]'}}],n:50,x:{r:[".source"],s:'typeof _0!=="string"'}}],f:["Expression"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:[".source"],s:'typeof _0!=="string"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source",{source:""})]'}}],n:50,x:{r:[".source"],s:'typeof _0==="string"'}}],f:["Source"]}]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".source"}],t:13}]}],n:50,x:{r:[".source"],s:'typeof _0==="string"'}}," ",{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source.source"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"",t:13}],f:["(None)"]},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[".name",".source"],s:"_0||_1"}}],t:13}],f:[{t:2,x:{r:[".label",".name",".source"],s:"_0||_1||_2"}}]}],n:52,r:"~/report.sources"}]}],n:50,x:{r:[".source"],s:'typeof _0!=="string"'}}]}]}," ",{t:19,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Show Footer?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"repeater.groupEnds",m:[{t:30,n:"repeater.group.length"}]}}],t:13}]}]}]}],n:50,x:{r:["repeater.footer","repeater.group.length"],s:"_0&&_1"}}],n:54,z:[{n:"repeater",x:{rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1)"}]}}}]}],"measured-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Text ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".text")]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:7,e:"textarea",f:[{t:2,r:".text"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",m:[{n:"title",f:"",t:13,g:1}],f:["Metric"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:".font.metric"}],t:13}]}]}]}],"container-props":[{t:19,f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Show Footer?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"repeater.groupEnds",m:[{r:["repeater.group.length","index"],s:"_0-1-_1"}]}}],t:13}]}]}]}],n:50,x:{r:["repeater.footer","index","repeater.group"],s:"_0&&_2[_1]"}}],n:54,z:[{n:"repeater",x:{rx:{r:"~/",m:[{r:["@this","~/temp.widget"],s:"_0.split(_1,2)"}]}}},{n:"index",x:{x:{r:["@this","~/temp.widget"],s:"_0.lastKey(_1)"}}}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Layout"]},{t:7,e:"span",f:[" ",{t:7,e:"select",m:[{t:73,v:"t",f:"false"},{n:"value",f:[{t:2,x:{r:[".layout"],s:'Array.isArray(_0)?"manual":"auto"'}}],t:13},{n:["change"],t:70,f:{r:["@context","@node.value"],s:'[(_0).set(".layout",_1==="manual"?[]:undefined)]'}}],f:[{t:7,e:"option",m:[{n:"value",f:"auto",t:13}],f:["Auto"]}," ",{t:7,e:"option",m:[{n:"value",f:"manual",t:13}],f:["Manual"]}]}]}]}],"html-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["HTML ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".html",{html:true})]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:7,e:"textarea",f:[{t:2,r:".html"}]}]}]}],"label-props":[{t:7,e:"label",f:[{t:7,e:"span",f:["Text ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit in Expression Editor",t:13,g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr(".text",{label:true})]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context",".text","@this"],s:'[(_0).set(".text",_2.getPartStrings(_1)),_2.editExpr(".text",{label:true})]'}}],f:["Convert to Text"]}],n:50,x:{r:[".text"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"textarea",f:[{t:2,r:".text"}]}],n:51,l:1}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["ID ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Remove aggregate id",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".id",undefined)]'}}],f:["×"]}],n:50,x:{r:[".id"],s:"_0!=null"}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add aggregate id",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".id","")]'}}],f:["+"]}],n:51,l:1}," "]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".id"}],t:13}]}],n:50,x:{r:[".id"],s:"_0!=null"}}]}]}],n:50,x:{r:["@this","~/temp.widget"],s:"_0.inRepeater(_1)"}}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Format ",{t:7,e:"button",m:[{t:13,n:"class",f:"hide",g:1}]},{t:4,f:[" ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Remove format",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".format",undefined)]'}}],f:["×"]}],n:50,x:{r:[".format"],s:"_0!=null"}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add format",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".format",{})]'}}],f:["+"]}],n:51,l:1}," "]},{t:7,e:"span",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".format.name"}],t:13},{n:"style-width",f:"80%",t:13}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add parameter",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".format.args","")]'}}],f:["+"]}," ",{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"."}],t:13},{n:"style-width",f:"80%",t:13}]},{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Remove parameter",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1)]'}}],f:["×"]}],n:52,r:".format.args"}],n:50,x:{r:[".format"],s:"_0!=null"}}]}]}],"page-props":[],sure:[],bottom:[{t:7,e:"div",m:[{t:13,n:"class",f:"top actions",g:1}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="params"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","params"),_0.set("temp.bottom.pop",true)]'}}],f:["Parameters"]}],n:50,r:"~/report.parameters.length"}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'!_0||_0==="expr"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","expr"),_0.set("temp.bottom.pop",true)]'}}],f:[{t:4,f:["Expression"],n:50,r:"~/temp.expr.path"},{t:4,f:["Evaluate"],n:51,l:1}]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="param"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","param"),_0.set("temp.bottom.pop",true)]'}}],f:["Parameter"]}],n:50,r:"~/temp.bottom.param"}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="source"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.bottom.tab","source"),_0.set("temp.bottom.pop",true)]'}}],f:["Source"]}],n:50,r:"~/temp.bottom.source"}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"which",g:1}],f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("expr")]'}}],f:["×"]}," ",{t:2,x:{r:["~/temp.expr.path"],s:'_0.replace(/\\./g," 〉 ")'}}],n:50,x:{r:["~/temp.expr.path","~/temp.bottom.tab"],s:'_0&&(!_1||_1==="expr")'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("param")]'}}],f:["×"]}," Parameter ",{t:2,x:{r:["@this","~/temp.bottom.param"],s:"+_0.lastKey(_1)+1"}}],n:50,x:{r:["~/temp.bottom.param","~/temp.bottom.tab"],s:'_0&&_1==="param"'}}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.checkLink("source")]'}}],f:["×"]}," Source ",{t:2,x:{r:["@this","~/temp.bottom.source"],s:"+_0.lastKey(_1)+1"}}],n:50,x:{r:["~/temp.bottom.source","~/temp.bottom.tab"],s:'_0&&_1==="source"'}}]}," ",{t:7,e:"button",m:[{t:13,n:"style",f:"height: 2.5rem;",g:1},{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.toggle("temp.bottom.pop")]'}}],f:[{t:4,f:["▼"],n:50,r:"~/temp.bottom.pop"},{t:4,f:["▲"],n:51,l:1}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"bottom",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'!_0||_0==="expr"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["~/temp.expr.str"],s:"!_0"}}],t:13},{n:["click"],t:70,f:{r:["@this"],s:"[_0.eval()]"}},{n:"class-error",t:13,f:[{t:2,r:"~/temp.expr.error"}]}],f:["▷"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="text"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","text")]'}}],f:[{t:4,f:["Template"],n:50,r:"~/temp.expr.template"},{t:4,f:["Text"],n:51,l:1}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.fmt()]"}}],f:["Format"]}],n:50,x:{r:["~/temp.expr.tab","~/temp.expr.template"],s:'_0==="text"&&!_1'}}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"~/temp.expr.template"}],t:13}]}," Template"]}],n:50,x:{r:["~/temp.expr.tab","~/temp.expr.path"],s:'_0==="text"&&!_1'}}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.html"],s:'_0?"":"none"'}}],t:13},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="html"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","html")]'}}],f:["HTML"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 2;",g:1}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="result"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","result")]'}}],f:["Result"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"tab",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="parsed"'}}]},{n:"class-error",t:13,f:[{t:2,r:"~/temp.expr.error"}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.tab","parsed")]'}}],f:["Parsed"]}],n:50,r:"~/temp.expr.parsed"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab text",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'!_0||_0==="text"'}}]}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"display: flex; justify-content: space-between;",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context","@this",".str"],s:'[(_0).set(".str",_1.getPartStrings(_2))]'}}],f:["Convert to Text"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".str","")]'}},{n:"title",f:"Add part",t:13,g:1}],f:["+"]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"label-part",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large spacer",g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}},{n:"title",f:"Remove part",t:13,g:1}],f:["×"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.moveUp((_1))]"}},{n:"title",f:"Move up",t:13,g:1}],f:["▲"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.moveDown((_1))]"}},{n:"title",f:"Move down",t:13,g:1}],f:["▼"]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context","."],s:'[(_0).set(".",{text:_1})]'}},{n:"title",f:"Format part",t:13,g:1}],f:["F"]}," ",{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:"."}],t:13}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico spacer",g:1},{n:["click"],t:70,f:{r:["@context",".text"],s:'[(_0).set(".",_1)]'}},{n:"title",f:"Plain part",t:13,g:1}],f:["T"]}," ",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".id"}],t:13},{n:"placeholder",f:"Tracking ID",t:13},{n:"title",f:"Track this value by assigning it a unique ID",t:13}]}," ",{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".text"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Font Family",t:13},{n:"placeholder",f:"Font Family",t:13},{n:"value",f:[{t:2,r:".font.family"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Color",t:13},{n:"placeholder",f:"Color",t:13},{n:"value",f:[{t:2,r:".font.color"}],t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Size",t:13},{n:"placeholder",f:"Size (1)",t:13},{n:"value",f:[{t:2,r:".font.size"}],t:13},{n:"type",f:"number",t:13}]}," ",{t:7,e:"input",m:[{n:"title",f:"Line Height",t:13},{n:"placeholder",f:["Line Height (",{t:2,x:{r:[".font.size"],s:"_0==null?1:_0"}},")"],t:13},{n:"value",f:[{t:2,r:".font.line"}],t:13},{n:"type",f:"number",t:13}]}," ",{t:7,e:"select",m:[{n:"title",f:"Font Weight",t:13},{n:"value",f:[{t:2,r:".font.weight"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["Font Weight"]}," ",{t:7,e:"option",m:[{n:"value",f:"400",t:13}],f:["light"]}," ",{t:7,e:"option",m:[{n:"value",f:"500",t:13}],f:["normal"]}," ",{t:7,e:"option",m:[{n:"value",f:"600",t:13}],f:["bold"]}," ",{t:7,e:"option",m:[{n:"value",f:"700",t:13}],f:["bolder"]}]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".font.pre"}],t:13}]}," Significant whitespec?"]}],n:51,l:1}]}],n:52,r:".str"}]}]}],n:50,x:{r:[".str"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"div",f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@context",".str"],s:'[(_0).set(".str",[_1])]'}}],f:["Convert to Parts"]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".str"}],t:13},{n:"template",f:[{t:2,x:{r:[".html",".template"],s:"_0||_1"}}],t:13}]}]}]}],n:51,l:1}],n:50,r:".label"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"Editor",m:[{n:"src",f:[{t:2,r:".str"}],t:13},{n:"template",f:[{t:2,x:{r:[".html",".template"],s:"_0||_1"}}],t:13}]}]}]}],n:51,l:1}],n:54,r:"~/temp.expr"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab html",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="html"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor-buttons",g:1}],f:[{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("bold")]'}},{n:"title",f:"Bold",t:13,g:1}],f:[{t:7,e:"strong",f:["B"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("italic")]'}},{n:"title",f:"Italic",t:13,g:1}],f:[{t:7,e:"em",f:["I"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("underline")]'}},{n:"title",f:"Underline",t:13,g:1}],f:[{t:7,e:"span",m:[{t:13,n:"style",f:"text-decoration: underline;",g:1}],f:["U"]}]}," ",{t:7,e:"button",m:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.command("strikeThrough")]'}},{n:"title",f:"Strike Through",t:13,g:1}],f:[{t:7,e:"span",m:[{t:13,n:"style",f:"text-decoration: line-through;",g:1}],f:["S"]}]}," ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/temp.fontSize"}],t:13},{n:["change"],t:70,f:{r:["@this"],s:"[_0.setHTMLFontSize()]"}},{n:"title",f:"Change Font Size",t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"",t:13}],f:["(font size)"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"1"}}],t:13}],f:["smallest"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"2"}}],t:13}],f:["smaller"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"3"}}],t:13}],f:["small"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"4"}}],t:13}],f:["regular"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"5"}}],t:13}],f:["large"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"6"}}],t:13}],f:["larger"]}," ",{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"7"}}],t:13}],f:["largest"]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"html-editor",g:1},{n:"contenteditable",f:"true",t:13},{n:"value",f:[{t:2,r:"~/temp.expr.htmlstr"}],t:13},{n:"id",f:"expr-html",t:13,g:1}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab result",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="result"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"editor-buttons",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"toggles",g:1}],f:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'!_0||_0==="plain"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","plain")]'}}],n:50,x:{r:["t"],s:'_0&&_0!=="plain"'}},{n:"title",f:"Show result as a plain string",t:13,g:1}],f:["Plain"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'_0==="json"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","json")]'}}],n:50,x:{r:["t"],s:'_0!=="json"'}},{n:"title",f:"Show result as JSON",t:13,g:1}],f:["JSON"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"toggle",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["t"],s:'_0==="html"'}}]},{t:4,f:[{n:["click"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.resulttype","html")]'}}],n:50,x:{r:["t"],s:'_0!=="html"'}},{n:"title",f:"Show result as HTML",t:13,g:1}],f:["HTML"]}],n:54,z:[{n:"t",x:{r:"~/temp.expr.resulttype"}}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"style",f:"color: blue;",g:1}],f:["undefined"]}],n:50,x:{r:["~/temp.expr.result"],s:"_0===undefined"}},{t:4,f:[{t:4,f:[{t:3,r:"~/temp.expr.result"}],n:50,x:{r:["~/temp.expr.resulttype"],s:'_0==="html"'}},{t:4,f:[{t:7,e:"code",f:[{t:7,e:"pre",f:[{t:2,x:{r:["~/temp.expr.result"],s:'JSON.stringify(_0,null,"  ")'}}]}]}," "],n:50,x:{r:["~/temp.expr.resulttype"],s:'_0==="json"'},l:1},{t:4,f:[" ",{t:7,e:"code",f:[{t:7,e:"pre",f:[{t:2,r:"~/temp.expr.result"}]}]}],n:51,l:1}],n:51,l:1}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab parsed",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="parsed"'}}]}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"code",f:[{t:7,e:"pre",m:[{t:13,n:"style",f:"margin: 1em;",g:1}],f:[{t:2,r:"~/temp.expr.parsed"}]}]}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"context",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="ast"||_0==="text"||_0==="html"?"":"none"'}}],t:13}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:["Context"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"panel scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:8,r:"expr-context",c:{r:"~/temp.expr.ctx"}}],n:50,r:"~/temp.expr.ctx"}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"ops",g:1},{n:"style-display",f:[{t:2,x:{r:["~/temp.expr.tab"],s:'_0==="ast"||_0==="text"||_0==="html"?"":"none"'}}],t:13}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:["Operators"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"panel scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:2,x:{r:["~/temp.expr.tab","@context"],s:'_0==="ast"&&(_1).decorators.scrolled&&(_1).decorators.scrolled.invalidate()||""&&""'}}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"entry-details",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"expr-operator",g:1},{n:["click"],t:70,f:{r:["@this","@key"],s:"[_0.insertOp(_1)]"}}],f:[{t:2,r:"@key"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"entry-type",g:1}],f:[{t:2,r:".type"}]}]}],n:52,r:"~/operators"}]}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="param"'}}]}],f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Type"]},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".type"}],t:13}],f:[{t:8,r:"types"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".required"}],t:13}]}," Require?"]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Label"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".label"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{t:73,v:"t",f:"false"},{n:"checked",f:[{t:2,x:{r:[".options"],s:"!!_0"}}],t:13},{n:["change"],t:70,f:{r:["@context",".options"],s:'[(_0).set(".options",!!_1?undefined:[])]'}}]}," Options?"]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"height: 100%; width: 30rem;",g:1},{t:13,n:"class",f:"options",g:1}],f:[{t:7,e:"div",f:[{t:19,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Label"]},{t:7,e:"br"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"ctx.label"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Value"]},{t:7,e:"br"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"ctx.value"}],t:13}]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"disabled",f:[{t:2,x:{r:["ctx.label","ctx.value"],s:"_0||!_1"}}],t:13},{n:["click"],t:70,f:{r:["ctx.label","ctx.value","@context"],s:'[(_2).push(".options",!_0?_1:{label:_0,value:_1}),(_2).set({"ctx.label":"","ctx.value":""})]'}}],f:["+"]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}]}," ",{t:4,f:[{t:7,e:"h3",f:["Options"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"."}],t:13}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".label"}],t:13}]}," ",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".value"}],t:13}]}],n:51,l:1}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:["×"]}]}],n:52,r:".options"}]}]}],n:50,r:".options"}]}],n:50,x:{r:[".options"],s:"!!_0"}}],n:54,r:"~/param"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="params"'}}]}],f:[{t:8,r:"bottom-parameters"}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"tab properties",g:1},{n:"class-active-tab",t:13,f:[{t:2,x:{r:["~/temp.bottom.tab"],s:'_0==="source"'}}]}],f:[{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name"]},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Source"]},{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source"}],t:13}],f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:".name"}]}],n:52,r:"~/sources"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Base ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".base")]'}}],f:["✎"]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".base"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Filter ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".filter")]'}}],f:["✎"]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".filter"}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Sort ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","~/temp.bottom.source"],s:'[_0.editExpr(_1+".sort")]'}}],f:["✎"]}]},{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:".sort"}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"height: 100%; width: 20rem;",g:1},{t:13,n:"class",f:"options",g:1}],f:[{t:7,e:"h3",f:[{t:7,e:"button",m:[{t:13,n:"style",f:"float: right;",g:1},{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Add group",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".group","")]'}}],f:["+"]}," ",{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".group"}],t:13},{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".group",undefined)]'}}]}," Groups"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"group-edit",g:1}],f:[{t:7,e:"span",f:[{t:2,x:{r:["@index"],s:"_0+1"}}]}," ",{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13}],f:[{t:2,r:"."}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Edit group expression",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:'[_0.editExpr("~/"+_1)]'}}],f:["✎"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Remove group",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@index"],s:'[(_0).splice("../",_1,1)]'}}],f:["×"]}]}],n:52,r:".group"}]}]}]}],n:50,x:{r:[".group"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:["change"],t:70,f:{r:["@context"],s:'[(_0).set(".group",[""])]'}}]}," Group?"]}],n:51,l:1}],n:54,r:"~/source"}]}]}," ",{t:7,e:"datalist",m:[{n:"id",f:"operators",t:13,g:1}],f:[{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"@key"}],t:13}]}],n:52,r:"~/operators"}]}],"expr-context":[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"context-entry",g:1},{n:"class-expanded",t:13,f:[{t:2,rx:{r:"~/exprExpand",m:[{t:30,n:"@keypath"}]}}]}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"entry-details",g:1}],f:[{t:7,e:"div",f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"expand",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.exprToggle(_1)]"}}],f:[{t:2,x:{r:["@keypath","~/exprExpand"],s:'_1[_0]?"-":"+"'}}]}],n:50,r:".fields"}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"entry-name",g:1},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.insertRef(_1)]"}}],f:[{t:2,r:".name"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"entry-type",g:1}],f:[{t:2,r:".type"}]}]}," ",{t:4,f:[{t:8,r:"expr-context"}],n:50,r:".fields"}]}],n:52,r:".fields"}],"ast-dim-actions":[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-actions",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["../","@index","@context"],s:'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]'}}],f:["×"]}]}],"ast-actions":[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-actions",g:1}],f:[{t:4,f:[{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".source",{r:""})]'}}],f:["+ Source"]}],n:51,r:".source"}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".apply",{r:""})]'}}],f:["+ Application"]}],n:51,r:".apply"}],n:50,x:{r:[".op","~/operators"],s:'_1[_0]&&_1[_0].type==="aggregate"'}}," ",{t:7,e:"select",m:[{t:73,v:"t",f:"false"},{n:["change"],t:70,f:{r:["@this","@keypath","@node.value"],s:"[_0.retypeASTNode(_1,_2)]"}},{n:"value",f:[{t:2,x:{r:[".v","."],s:'_1&&"op" in _1?"operator":_1&&"v" in _1?(typeof _0==="string"?"string":typeof _0==="number"?"number":"object"):_1&&"r" in _1?"reference":"undefined"'}}],t:13}],f:[{t:7,e:"option",f:["operator"]}," ",{t:7,e:"option",f:["string"]}," ",{t:7,e:"option",f:["number"]}," ",{t:7,e:"option",f:["reference"]}," ",{t:7,e:"option",f:["undefined"]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["../","@index","@context"],s:'[Array.isArray(_0)?(_2).splice("../",_1,1):(_2).set(".",undefined)]'}}],f:["×"]}]}],"ast-node":[{t:7,e:"div",m:[{n:["click"],t:70,f:{r:["~/temp.expr.partpath","@this","@keypath"],s:'[_0!==_2&&[_1.link(_2,"temp.expr.part"),_1.set("temp.expr.partpath",_2)],false]'}},{n:"class",f:["ast-node ast-",{t:2,x:{r:["."],s:'(_0&&("op" in _0?"op":"v" in _0?"value":"r" in _0?"ref":"wat"))||"wat"'}}],t:13},{n:"class-ast-active-node",t:13,f:[{t:2,x:{r:["~/temp.expr.partpath","@keypath"],s:"_0===_1"}}]}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-op-name",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},"(",{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".op"}],t:13},{n:"list",f:"operators",t:13}]}]},{t:8,r:"ast-actions"}]}," ",{t:4,f:[{t:8,r:"ast-node"}],n:52,r:".args"}," ",{t:7,e:"div",f:[") ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".args",{v:""})]'}}],f:["+"]}]}],n:50,x:{r:["."],s:'_0&&"op" in _0'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-value",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"}," ",{t:4,f:[{t:7,e:"textarea",m:[{n:"rows",f:"1",t:13},{n:"cols",f:"30",t:13}],f:[{t:2,r:".v"}]}],n:50,x:{r:[".v"],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".v"}],t:13},{n:"type",f:"number",t:13}]}],n:50,x:{r:[".v"],s:'typeof _0==="number"'},l:1}]}," ",{t:8,r:"ast-actions"}]}," "],n:50,x:{r:["."],s:'_0&&"v" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-ref",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".r"}],t:13}]}]}," ",{t:8,r:"ast-actions"}]}],n:50,x:{r:["."],s:'_0&&"r" in _0'},l:1}]}],n:50,x:{r:["~/temp.expr.partpath","@keypath"],s:"_0===_1"}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-op-name",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},"(",{t:2,r:".op"}]},{t:8,r:"ast-dim-actions"}]}," ",{t:4,f:[{t:4,f:[{t:8,r:"ast-node",c:{r:".source"},z:[{n:"prefix",x:{x:{r:[],s:'"+ "'}}}]}],n:50,r:".source"}," ",{t:4,f:[{t:8,r:"ast-node",c:{r:".apply"},z:[{n:"prefix",x:{x:{r:[],s:'"=> "'}}}]}],n:50,r:".apply"}],n:50,x:{r:[".op","~/operators"],s:'_1[_0]&&_1[_0].type==="aggregate"'}}," ",{t:4,f:[{t:8,r:"ast-node"}],n:52,r:".args"}," )"],n:50,x:{r:["."],s:'_0&&"op" in _0'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-value",g:1}],f:[{t:7,e:"div",m:[{n:"class-ast-string",t:13,f:[{t:2,x:{r:[".v"],s:'typeof _0==="string"'}}]},{n:"class-ast-number",t:13,f:[{t:2,x:{r:[".v"],s:'typeof _0==="number"'}}]}],f:[{t:2,r:"prefix"},{t:2,r:".v"}]},{t:8,r:"ast-dim-actions"}]}," "],n:50,x:{r:["."],s:'_0&&"v" in _0'},l:1},{t:4,f:[" ",{t:7,e:"div",m:[{t:13,n:"class",f:"ast-content-ref",g:1}],f:[{t:7,e:"div",f:[{t:2,r:"prefix"},{t:2,r:".r"}," (ref)"]},{t:8,r:"ast-dim-actions"}]}],n:50,x:{r:["."],s:'_0&&"r" in _0'},l:1}]}],n:51,l:1}]}],"bottom-parameters":[{t:7,e:"div",m:[{t:13,n:"style",f:"flex-grow: 1;",g:1},{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this","params"],s:'[_0.set("report.defaultParams",_1)]'}},{n:"title",f:"Save these values as the report defaults",t:13,g:1}],f:["Save as Defaults"]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param",g:1}],f:[{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"check",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}," ",{t:2,x:{r:[".label",".name"],s:"_0||_1"}},"?"]}],n:50,x:{r:[".type"],s:'_0==="boolean"'}},{t:4,f:[{t:7,e:"label",m:[{t:13,n:"class",f:"pick",g:1}],f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}},{t:7,e:"select",m:[{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}],f:[" ",{t:4,f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:"."}]}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:".value"}],t:13}],f:[{t:2,r:".label"}]}],n:51,l:1}],n:52,r:".options"}]}]}," "],n:50,r:".options.length",l:1},{t:4,f:[" ",{t:7,e:"label",m:[{t:13,n:"class",f:"string",g:1}],f:[{t:2,x:{r:[".label",".name"],s:"_0||_1"}}," ",{t:4,f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}],n:50,x:{r:[".type"],s:'_0==="number"'}},{t:4,f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,rx:{r:"~/params",m:[{t:30,n:".name"}]}}],t:13}]}],n:51,l:1}]}],n:51,l:1}]}],n:52,r:"~/report.parameters"}]}]}],left:[{t:7,e:"div",m:[{t:13,n:"class",f:"properties",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"height: 3rem;",g:1},{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Widgets"]}," ",{t:4,f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"~/add"}],t:13},{n:["change"],t:70,f:{r:["@this","@node.value"],s:"[_0.addWidget(_1)]"}}],f:[{t:7,e:"option",f:["container"]}," ",{t:7,e:"option",f:["label"]}," ",{t:7,e:"option",f:["repeater"]}," ",{t:7,e:"option",f:["html"]}," ",{t:7,e:"option",f:["image"]}," ",{t:7,e:"option",f:["measured"]}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this","~/add"],s:"[_0.addWidget(_1)]"}}],f:["+"]}],n:50,x:{r:["~/report.type","~/widget.type","~/temp.widget"],s:'_0!=="delimited"&&(_1==="container"||_2==="report")'}}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:"[_0.treeScrollToActive()]"}}],f:["A"]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"shrinky scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"tree",g:1},{n:"scrolled",t:71},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget"],s:'_0==="report"'}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover"],s:'_0==="report"'}}]},{n:["click"],t:70,f:{r:["@this"],s:'[_0.selectWidget("report")]'}}],f:[{t:7,e:"span",m:[{t:13,n:"style",f:"height: 1.8rem;",g:1},{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover","report"),false]'}}],f:["Report"]}," ",{t:4,f:[{t:8,r:"delimited-fields"}],n:50,x:{r:["report.type"],s:'_0==="delimited"'}},{t:4,f:[{t:4,f:[{t:8,r:"widget-tree"}],n:54,r:"report"}],n:51,l:1}]}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:[{t:2,r:"~/temp.name"},"Properties"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"growy scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sheet",g:1}],f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Name ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.editExpr("report.name",{template:true}),false]'}}],f:["✎"]}]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"report.name"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Type"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.type"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:"page",t:13}],f:["Paged"]}," ",{t:7,e:"option",m:[{n:"value",f:"flow",t:13}],f:["Continuous"]}," ",{t:7,e:"option",m:[{n:"value",f:"delimited",t:13}],f:["Delimited"]}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Combine styles into classes?"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:"report.classifyStyles"}],t:13}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Paper size"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.size"}],t:13}],f:[{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"."}],t:13}],f:[{t:2,r:"@key"}]}],n:52,r:"~/pageSizes"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Orientation"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.orientation"}],t:13}],f:[{t:7,e:"option",f:["landscape"]}," ",{t:7,e:"option",f:["portrait"]}]}]}]}],n:50,x:{r:["report.type"],s:'_0==="page"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Width"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"type",f:"number",t:13},{n:"value",f:[{t:2,r:"report.width"}],t:13}]}]}]}," ",{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Paper size"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.size"}],t:13}],f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,x:{r:[],s:"undefined"}}],t:13}],f:["(None)"]},{t:4,f:[{t:7,e:"option",m:[{n:"value",f:[{t:2,r:"."}],t:13}],f:[{t:2,r:"@key"}]}],n:52,r:"~/pageSizes"}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Orientation"]},{t:7,e:"span",f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"report.orientation"}],t:13}],f:[{t:7,e:"option",f:["landscape"]}," ",{t:7,e:"option",f:["portrait"]}]}]}]}],n:50,x:{r:["report.width"],s:"!_0"}}],n:51,l:1}],n:50,x:{r:["report.type"],s:'_0!=="delimited"'}},{t:4,f:[{t:7,e:"label",f:[{t:7,e:"span",f:["Record Delimiter"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.record"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Field Delimiter"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.field"}],t:13}]}]}]}," ",{t:7,e:"label",f:[{t:7,e:"span",f:["Quote"]},{t:7,e:"span",f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:"temp.quote"}],t:13}]}]}]}],n:51,l:1}]}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Parameters"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.parameters",{})]'}}],f:["+"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"parameter head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param-name",g:1}],f:["Name"]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-type",g:1}],f:["Type"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"width: 30%;",g:1},{t:13,n:"class",f:"param-require",g:1}],f:["Require"]}]}],n:50,r:"report.parameters"}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"parameter",g:1},{n:["focusin"],t:70,f:{r:["@this","@context"],s:"[_0.editParam((_1))]"}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"param-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-type",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".type"}],t:13}],f:[{t:8,r:"types"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-require",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"checkbox",t:13},{n:"checked",f:[{t:2,r:".required"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"param-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("param",_1),(_2).splice("../",_3,1)]'}}],f:["×"]}]}]}],n:52,r:"report.parameters"}]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Provided Sources"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("sources",{})]'}}],f:["+"]}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src-name",g:1}],f:["Name"]}]}],n:50,r:"~/sources"}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"src-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"title",f:"Import data...",t:13,g:1},{n:["click"],t:70,f:{r:["@context","@keypath","@this"],s:'[(_0).link(_1,"~/data"),_2.set("tab","import")]'}}],f:["▲"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:"title",f:"Log data to console...",t:13,g:1},{n:["click"],t:70,f:{r:["@this","."],s:"[_0.logData(_1)]"}}],f:["☐"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("import",_1),(_2).splice("../",_3,1)]'}}],f:["×"]}]}]}],n:52,r:"~/sources"}]}]}],n:50,r:"~/sources"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"style",f:"justify-content: center;",g:1},{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"plain",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("sources",{})]'}},{n:"title",f:"Create a new source of data to reference from a report source",t:13,g:1}],f:["Provide Source"]}]}],n:51,l:1}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"header",g:1}],f:[{t:7,e:"h3",f:["Source",{t:4,f:["s"],n:50,x:{r:["report.type"],s:'_0!=="delimited"'}}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"add",g:1},{n:["click"],t:70,f:{r:["@this"],s:'[_0.push("report.sources",{name:"",parameters:{}})]'}}],f:["+"]}],n:50,x:{r:["report.type","report.sources.length"],s:'_0!=="delimited"||_1<1'}}]}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src head",g:1}],f:[{t:7,e:"div",m:[{t:13,n:"style",f:"width: 100%;",g:1},{t:13,n:"class",f:"src-name",g:1}],f:["Name"]}]}],n:50,r:"report.sources.length"}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"src",g:1},{n:["focusin"],t:70,f:{r:["@this","@context"],s:"[_0.editReportSrc((_1))]"}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-name",g:1}],f:[{t:7,e:"input",m:[{n:"value",f:[{t:2,r:".name"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-src",g:1}],f:[{t:7,e:"select",m:[{n:"value",f:[{t:2,r:".source"}],t:13}],f:[{t:4,f:[{t:7,e:"option",f:[{t:2,r:".name"}]}],n:52,r:"~/sources"}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"rsrc-btn",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@keypath","@context","@index"],s:'[_0.checkLink("source",_1),(_2).splice("../",_3,1)]'}}],f:["×"]}]}]}],n:52,r:"report.sources"}]}]}],n:50,x:{r:["~/temp.widget"],s:'_0==="report"'}},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"scrolled-wrapper",g:1}],f:[{t:7,e:"div",m:[{n:"scrolled",t:71}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"sheet",g:1}],f:[{t:4,f:[{t:8,x:{r:[".type"],s:'_0+"-props"'}}," ",{t:8,r:"widget-props"}],n:54,r:"~/widget"}]}]}]}],n:50,r:"~/widget",l:1}],n:50,r:"~/temp.widget"},{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"placeholder",g:1}],f:["Click on a Widget"]}],n:51,l:1}]}],"delimited-fields":[{t:7,e:"div",m:[{t:13,n:"class",f:"delimited children",g:1}],f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["@keypath","~/temp.expr.path"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.editExpr((_1))]"}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.expr.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.expr.hover",""),false]'}}],f:[{t:7,e:"span",f:[{t:2,r:"@index"},". ",{t:2,r:"."}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["~/report.header","@this","@context","@index"],s:'[_1.moveUp((_2),"../",_3),_0&&_1.moveUp((_2),"~/report.header",_3),false]'}}],f:["▲"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["~/report.header","@this","@context","@index"],s:'[_1.moveDown((_2),"../",_3),_0&&_1.moveDown((_2),"~/report.header",_3),false]'}}],f:["▼"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@keypath","~/report.header","@context","@index","@this"],s:'[_4.checkLink("expr",_0),(_2).splice("../",_3,1),_1&&(_2).splice("~/report.header",_3,1),_4.checkExpr(),false]'}}],f:["×"]}]}]}],n:52,r:"report.fields"}]}],"widget-tree":[{t:7,e:"div",m:[{t:13,n:"class",f:"children",g:1}],f:[{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1),false]"}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],f:[{t:7,e:"span",f:["group ",{t:2,x:{r:["@index"],s:"_0+1"}}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.moveUp((_1)),_0.moveUp((_1),"^^/groupEnds"),false]'}},{n:"title",f:"Move up",t:13,g:1}],f:["▲"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.moveDown((_1)),_0.moveDown((_1),"^^/groupEnds"),false]'}},{n:"title",f:"Move down",t:13,g:1}],f:["▼"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}},{n:"title",f:"Remove",t:13,g:1}],f:["×"]}]}," ",{t:8,r:"widget-tree"}]}],n:52,r:".group"}],n:50,x:{r:[".type",".group"],s:'_0==="repeater"&&_1'}}," ",{t:4,f:[{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1),false]"}},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1}],f:[{t:7,e:"span",f:[{t:2,r:"@key"}]}," ",{t:4,f:[{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:["×"]}],n:50,x:{r:["@key","../type"],s:'_0!=="row"||_1!=="repeater"'}}]}," ",{t:8,r:"widget-tree"}]}],n:50,x:{r:[".type"],s:'_0==="container"'}}],n:52,r:"."}," ",{t:4,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"node",g:1},{n:"class-active",t:13,f:[{t:2,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}]},{n:"class-hover",t:13,f:[{t:2,x:{r:["~/temp.hover","@keypath"],s:"_0===_1"}}]},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1),false]"}},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}}],f:[{t:7,e:"span",m:[{t:13,n:"class",f:"line",g:1}],f:[{t:7,e:"span",f:[{t:2,r:".type"}]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index"],s:"_0===0"}}],t:13},{n:["click"],t:70,f:{r:["^^/layout","@this","@context"],s:'[_1.moveUp((_2)),Array.isArray(_0)?_1.moveUp((_2),"^^/layout"):false,false]'}}],f:["▲"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico",g:1},{n:"disabled",f:[{t:2,x:{r:["@index","@last"],s:"_0===_1"}}],t:13},{n:["click"],t:70,f:{r:["^^/layout","@this","@context"],s:'[_1.moveDown((_2)),Array.isArray(_0)?_1.moveDown((_2),"^^/groupEnds"):false,false]'}}],f:["▼"]}," ",{t:7,e:"button",m:[{t:13,n:"class",f:"ico large",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1)),false]"}}],f:["×"]}]}," ",{t:8,r:"widget-tree"}]}],n:52,r:".widgets"}]}],repeater:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",f:["Repeater"]}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".group",undefined),(_0).set(".groupEnds",[true]),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Group"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).push(".group",{type:"container"}),(_0).splice(".groupEnds",-1,0,true)]'}}],f:["Add Group Level"]}],n:50,r:".group"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".group",[{type:"container"}]),(_0).set(".groupEnds",[true,true])]'}}],f:["Add Group"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".header",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Header"]}],n:50,r:".header"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".header",{type:"container"})]'}}],f:["Add Header"]}],n:51,l:1}," ",{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context","@this"],s:'[(_0).set(".footer",undefined),_1.unlink("widget"),_1.set("temp.widget",undefined)]'}}],f:["Remove Footer"]}],n:50,r:".footer"},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"btn",g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).set(".footer",{type:"container"})]'}}],f:["Add Footer"]}],n:51,l:1}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widgets",g:1}],f:[{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:["@index"],s:'"Group Header "+(_0+1)'}}}]}],n:52,r:".group"}],n:50,r:".group"}," ",{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Header"'}}}]}],n:54,r:".header"}],n:50,r:".header"}," ",{t:4,f:[{t:2,x:{r:["@context"],s:'(_0).set(".row",{type:"container"})&&""'}}],n:50,x:{r:[".row"],s:"!_0"}}," ",{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Row"'}}}]}],n:54,r:".row"}," ",{t:4,f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:'"Footer"'}}}]}],n:54,r:".footer"}],n:50,r:".footer"}]}],html:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"preview btn",g:1},{n:"title",f:"Toggle Preview",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle("ctx.preview")]'}}],f:["◎"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"autosize btn",g:1},{n:"title",f:"Autosize Block",t:13,g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.autosizeHtml((_1))]"}}],f:["↕"]}," ",{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{n:["click"],t:70,f:{r:["@this","@context"],s:'[_0.editExpr((_1).resolve(".html"),{html:true})]'}},{n:"class-preview",t:13,f:[{t:2,r:"ctx.preview"}]},{t:4,f:[{n:"style-font-size",f:[{t:2,x:{r:[".font.size"],s:"_0||0.83"}},"rem"],t:13},{n:"style-line-height",f:[{t:2,x:{r:[".font.line",".font.size"],s:'_0===0?"initial":(_0||_1||1)+"rem"'}}],t:13}],n:50,r:"ctx.preview"},{t:4,f:[{n:"style",f:"height: auto;",t:13}],n:50,r:"ctx.autosize"},{t:4,f:[{n:"title",f:[{t:2,r:".html"}],t:13}],n:50,x:{r:[".html.length"],s:"_0<50"}}],f:[{t:4,f:[{t:3,r:".html"}],n:50,r:"ctx.preview"},{t:4,f:[{t:7,e:"Viewer",m:[{n:"src",f:[{t:2,r:".html"}],t:13},{n:"template",f:"true",t:13,g:1}]}],n:51,l:1}]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}],image:[{t:19,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"preview btn",g:1},{n:"title",f:"Toggle Preview",t:13,g:1},{n:["click"],t:70,f:{r:["@context"],s:'[(_0).toggle("ctx.preview")]'}}],f:["◎"]}," ",{t:4,f:[{t:7,e:"img",m:[{t:13,n:"style",f:"width: 100%; height: 100%;",g:1},{n:"src",f:[{t:2,x:{r:["@this",".url"],s:"_0.evalExpr(_1)"}}],t:13}]}],n:50,r:"ctx.preview"}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}],measured:[{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1)]"}},{n:"title",f:[{t:2,r:".text"}],t:13}],f:[{t:2,r:".text"}]}],label:[{t:7,e:"span",m:[{t:13,n:"class",f:"content",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}},{n:["click"],t:70,f:{r:["@this","@keypath"],s:"[_0.selectWidget(_1)]"}},{n:"title",f:[{t:2,r:".text"}],t:13}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:2,r:"."}],n:50,x:{r:["."],s:'typeof _0==="string"'}},{t:4,f:[{t:7,e:"span",m:[{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcFont(_1)"}}],t:13}],n:50,r:".font"}],f:[{t:2,r:".text"}]}],n:51,l:1}],n:52,r:".text"}],n:50,x:{r:[".text"],s:"Array.isArray(_0)"}},{t:4,f:[{t:7,e:"Viewer",m:[{n:"src",f:[{t:2,r:".text"}],t:13}]}],n:51,l:1}]}],container:[{t:19,f:[{t:7,e:"div",m:[{t:13,n:"class",f:"bar",g:1},{n:["mouseover"],t:70,f:{r:["@this","@keypath"],s:'[_0.set("temp.hover",_1),false]'}},{n:["mouseout"],t:70,f:{r:["@this"],s:'[_0.set("temp.hover",""),false]'}}],f:[{t:7,e:"span",f:[{t:2,x:{r:["label"],s:'_0||"container"'}}]}," ",{t:4,f:[{t:2,x:{r:["@context",".layout"],s:'(_0).set("ctx.layout",_1==="row"||!_1?"auto":"manual")&&""'}}],n:50,r:"ctx.layout"}," ",{t:7,e:"select",m:[{n:"value",f:[{t:2,r:"ctx.layout"}],t:13},{n:["change"],t:70,f:{r:["@node.value","@context"],s:'[_0==="auto"?(_1).set(".layout",undefined):(_1).set(".layout",[])]'}}],f:[{t:7,e:"option",m:[{n:"value",f:"auto",t:13}],f:["Auto Layout"]}," ",{t:7,e:"option",m:[{n:"value",f:"manual",t:13}],f:["Manual Layout"]}]}]}],n:54,z:[{n:"ctx",x:{r:"@local"}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"widgets",g:1},{n:"class-manual",t:13,f:[{t:2,x:{r:[".layout"],s:"Array.isArray(_0)"}}]},{n:"style",f:["height: ",{t:2,r:"heightMargin"},";"],t:13}],f:[{t:4,f:[{t:8,r:"widget",z:[{n:"label",x:{x:{r:[],s:"false"}}}]}],n:52,r:".widgets"}]}],widget:[{t:19,f:[{t:7,e:"div",m:[{n:"widget",t:71,f:{r:[".type"],s:"[_0]"}},{n:"style",f:["width: ",{t:2,r:"widthMargin"},"; ",{t:4,f:["height: ",{t:2,r:"heightMargin"}],n:50,x:{r:[".type"],s:'_0!=="container"'}}],t:13},{t:4,f:[{n:"style",f:["margin-left: ",{t:2,x:{r:["@index","^^/layout"],s:"(_1[_0]||[])[0]||0"}},"rem; margin-top: ",{t:2,x:{r:["@index","^^/layout"],s:"(_1[_0]||[])[1]||0"}},"rem; margin-right: calc(-",{t:2,x:{r:["@index","^^/layout"],s:"(_1[_0]||[])[0]||0"}},"rem - ",{t:2,r:"widthMargin"},")"],t:13},{t:4,f:[{n:"moveable",t:71}],n:50,x:{r:["~/temp.widget","@keypath"],s:"_0===_1"}}," "],n:50,x:{r:["^^/layout"],s:"Array.isArray(_0)"}},{t:4,f:[{n:"style",f:[{t:4,f:["break-after: always;"],n:50,x:{r:[".br"],s:"_0===true"}}],t:13}],n:51,l:1},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcMargin(_1)"}}],t:13}],n:50,r:".margin"},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcBorder(_1)"}}],t:13}],n:50,r:".border"},{t:4,f:[{n:"style",f:[{t:2,x:{r:["@this","."],s:"_0.calcFont(_1)"}}],t:13}],n:50,r:".font"}],f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"remove btn",g:1},{n:"title",f:["Remove ",{t:2,r:".type"}],t:13},{n:["click"],t:70,f:{r:["@this","@context"],s:"[_0.removeWidget((_1),false)]"}}],f:["×"]}],n:50,x:{r:["../"],s:"Array.isArray(_0)"}}," ",{t:8,r:".type"}]}],n:54,z:[{n:"widthMargin",x:{x:{r:["@this",".","@keypath"],s:"_0.calcWidthWithMargin(_1,_2)"}}},{n:"heightMargin",x:{x:{r:["@this","."],s:"_0.calcHeightWithMargin(_1)"}}}]}]}};const i={v:4,t:[{t:7,e:"div",m:[{t:13,n:"class",f:"syntax-editor",g:1}],f:[{t:7,e:"code",m:[{t:13,n:"class",f:"ast-nodes",g:1}],f:[{t:7,e:"pre",f:[{t:8,r:"ast-node",c:{r:"ast"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-fail",g:1}],f:[{t:2,x:{r:["src","ast.end","src.length"],s:"_0.substring(_1,_2)"}}]}],n:50,x:{r:["ast.end","src.length"],s:"_0<_1"}},{t:4,f:[" "],n:50,x:{r:["src.length","src"],s:'_0>0&&_1[_0-1]==="\\n"'}}]}]}," ",{t:7,e:"textarea",m:[{n:"autosize",t:71},{n:"class-expr-text",t:13},{n:"id",f:"expr-text",t:13},{n:"spellcheck",f:"false",t:13},{n:["keydown"],t:70,f:{r:["@this","@event"],s:"[_0.keydown(_1)]"}}],f:[{t:2,r:"src"}]}]}],e:{"_0.substring(_1,_2)":function(t,e,r){return t.substring(e,r)},"_0<_1":function(t,e){return t<e},'_0>0&&_1[_0-1]==="\\n"':function(t,e){return t>0&&"\n"===e[t-1]},"[_0.keydown(_1)]":function(t,e){return[t.keydown(e)]},'(_0||"").substring(_1,_2)':function(t,e,r){return(t||"").substring(e,r)}},p:{viewer:[{t:7,e:"div",m:[{t:13,n:"class",f:"syntax-editor",g:1}],f:[{t:7,e:"code",m:[{t:13,n:"class",f:"ast-nodes",g:1}],f:[{t:7,e:"pre",f:[{t:8,r:"ast-node",c:{r:"ast"}},{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-fail",g:1}],f:[{t:2,x:{r:["src","ast.end","src.length"],s:"_0.substring(_1,_2)"}}]}],n:50,x:{r:["ast.end","src.length"],s:"_0<_1"}},{t:4,f:[" "],n:50,x:{r:["src.length","src"],s:'_0>0&&_1[_0-1]==="\\n"'}}]}]}]}],"ast-node":[{t:7,e:"span",m:[{n:"class",f:[{t:2,r:".name"}],t:13}],f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-extra",g:1}],f:[{t:2,x:{r:["~/src","./0","./1"],s:"_0.substring(_1,_2)"}}]}],n:54,rx:{r:"^^/extra",m:[{t:30,n:"@index"}]}}],n:50,rx:{r:"^^/extra",m:[{t:30,n:"@index"}]}},{t:8,r:"ast-node"}],n:52,r:".children"},{t:4,f:[{t:4,f:[{t:7,e:"span",m:[{t:13,n:"class",f:"ast-extra",g:1}],f:[{t:2,x:{r:["~/src","./0","./1"],s:"_0.substring(_1,_2)"}}]}],n:54,rx:{r:".extra",m:[{t:30,n:".children.length"}]}}],n:50,rx:{r:".extra",m:[{t:30,n:".children.length"}]}}],n:50,r:".children.length"},{t:4,f:[{t:2,x:{r:["~/src",".start",".end"],s:'(_0||"").substring(_1,_2)'}}],n:51,l:1}]}]}},a=" .syntax-editor { position: relative; min-height: 99%; color: #555; } .ast-extra { color: #555; } .syntax-editor textarea { position: absolute; top: 0; font-family: monospace; color: transparent; background: transparent; caret-color: black; min-height: 99%; overflow: hidden; resize: none; } .syntax-editor code { padding: 0.5em; font-family: monospace; display: block; box-sizing: border-box; min-height: 99%; overflow: hidden; } .syntax-editor > code > pre { word-break: break-word; } .ast-nodes .reference { color: #222; } .ast-nodes .primitive, .ast-nodes .number, .ast-nodes .date, .ast-nides .timespan { color: #164; } .ast-nodes .format-op { color: #951; } .ast-nodes .string, .ast-nodes .string > .ast-extra { color: #a11; } .ast-nodes .string > .string-interpolation { font-style: oblique; } .ast-nodes .binary-op > .ast-extra, .ast-nodes .conditional > .ast-extra { color: #708; } .ast-nodes .ast-fail { color: #f00; } .ast-nodes .interpolator, .ast-nodes .each-block > .ast-extra, .ast-nodes .if-block > .ast-extra, .ast-nodes .unless-block > .ast-extra, .ast-nodes .case-block > .ast-extra, .ast-nodes .with-block > .ast-extra { font-weight: 600; } .ast-nodes .each-block > .ast-extra { color: #167; } .ast-nodes .case-block > .ast-extra, .ast-nodes .unless-block > .ast-extra, .ast-nodes .if-block > .ast-extra { color: #189; } .ast-nodes .with-block > .ast-extra { color: #145; }";function l(t){const e=t.cloneNode();function r(){e.style.width=t.clientWidth+"px",e.value=t.value,t.style.height=e.scrollHeight+8+"px"}function n(){setTimeout(r,500)}return e.style.position="absolute",e.style.left="-110%",e.style.zIndex="-1",e.style.height="1em",document.body.appendChild(e),t.addEventListener("focus",n),t.addEventListener("input",n),t.style.overflow="hidden",{teardown(){e.remove(),t.removeEventListener("focus",n),t.removeEventListener("input",n)}}}class f extends s.default{constructor(t){super(t)}highlightSyntax(){const t=this.get("src")||"";if("string"!=typeof t)return;const e=(this.get("template")?r.parseTemplate:r.parse)(t,{tree:!0,compact:!0});this.set("ast",e)}keydown(t){if("Tab"===t.key){const e=t.target;let r,n=e.value,s=[e.selectionStart,e.selectionEnd];if(s[0]===s[1])r=n.lastIndexOf("\n",s[0]),r===s[0]&&(r=n.lastIndexOf("\n",r-1)),-1===r?r=0:r+=1,t.shiftKey?"  "===n.substr(r,2)&&(n=n.substring(0,r)+n.substr(r+2),s[0]=s[0]-2,s[1]=s[1]-2):(n=n.substring(0,r)+"  "+n.substr(r),s[0]=s[0]+2,s[1]=s[1]+2);else{for(r=n.lastIndexOf("\n",e.selectionEnd),r===s[0]&&r==s[1]&&(r=n.lastIndexOf("\n",r-1));~r&&r>e.selectionStart;)t.shiftKey?"  "===n.substr(r+1,2)&&(n=n.substring(0,r+1)+n.substr(r+3),s[1]=s[1]-2):(n=n.substring(0,r+1)+"  "+n.substr(r+1),s[1]=s[1]+2),r=n.lastIndexOf("\n",r-1);r=n.lastIndexOf("\n",e.selectionStart),~r?r+=1:r=0,~r&&(t.shiftKey?"  "===n.substr(r,2)&&(n=n.substring(0,r)+n.substr(r+2),s[0]=s[0]-2,s[1]=s[1]-2):(n=n.substring(0,r)+"  "+n.substr(r),s[0]=s[0]+2,s[1]=s[1]+2))}return e.value=n,e.selectionStart=s[0],e.selectionEnd=s[1],e.dispatchEvent(new InputEvent("input")),e.dispatchEvent(new InputEvent("change")),!1}}}s.default.extendWith(f,{template:i,css:a,cssId:"raport-editor",observe:{"src template"(){this.highlightSyntax()}},decorators:{autosize:l}});class c extends s.default{constructor(t){super(t)}highlightSyntax(){const t=this.get("src")||"";if("string"!=typeof t)return;const e=(this.get("template")?r.parseTemplate:r.parse)(t,{tree:!0,compact:!0});this.set("ast",e)}}s.default.extendWith(c,{template:{v:i.v,t:i.p.viewer},cssId:"raport-ast-view",css:a+"\n  pre { margin: 0; white-space: pre-wrap; }\n  .syntax-editor code { padding: 0; }\n  .syntax-editor { max-height: 100%; overflow: auto; }\n  ",partials:{"ast-node":i.p["ast-node"]},observe:{"src template"(){this.highlightSyntax()}}});const p={};function d(t){return p[t||""]}let u,m;const g=["**","*","/%","/","%","+","-",">=",">","<=","<","gt","gte","lt","lte","in","like","ilike","not-in","not-like","not-ilike","contains","does-not-contain","is","is-not","==","!=","and","&&","or","||"];class h extends s.default{constructor(t){super(t),this.evalLock=!1,this._scrollers=[]}addWidget(t){const e={type:t},r=this.get("temp.widget");"label"===t?("report"!==r&&(e.width=10),e.text=":label"):"html"===t&&(e.html="<div>html</div>",e.font={line:0}),this.push(r+".widgets",e)}async run(){const t=this.get("report"),e=new r.Root({},{parameters:this.get("params")}),n=await this.buildSources();let s;this.fire("running");try{s=r.run(t,n,e,{foot:this.frameExtra()})}catch(t){}return this.fire("run"),this.set("result",s),!0}frameExtra(){return"\n      <style>\n        html:before, html:after { content: ' '; position: fixed; display: block; z-index: 2; box-shadow: 0 0 10px #000; transition: opacity 0.4s ease-in-out; opacity: 1; width: 100%; height: 5px; }\n        html:before { top: -5px; }\n        html:after { bottom: -5px; }\n        html.scrolled-top:before { opacity: 0; }\n        html.scrolled-bottom:after { opacity: 0; }\n      </style>\n      <script>\n        const html = document.scrollingElement || document.documentElement;\n        const listener = ev => {\n          if (html.scrollTop === 0) html.classList.add('scrolled-top');\n          else html.classList.remove('scrolled-top');\n\n          if (html.scrollTop + html.clientHeight >= html.scrollHeight) html.classList.add('scrolled-bottom');\n          else html.classList.remove('scrolled-bottom');\n        };\n        html.addEventListener('scroll', listener, { passive: true });\n        window.addEventListener('resize', listener);\n        window.addEventListener('scroll', listener);\n        html.classList.add('scrolled-top');\n      <\/script>\n    "}paperSize(){if("flow"===this.get("report.type")){const t=this.get("report.width");if(t)return`width: ${t}rem;`}const t=this.get("report.size"),e=this.get("report.orientation")||"landscape";if(t){const r="landscape"===e?t.height:t.width,n=[(t.margin||[])[0]||0,(t.margin||[])[1]||0];return`width: ${r}rem; box-sizing: border-box; margin: 1rem auto; box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.4); padding: ${n[0]}rem ${n[1]}rem; min-height: ${"landscape"===e?t.width:t.height}rem; background-size: 1rem 1rem; background-position: ${10.5-n[0]}rem ${10.5-n[1]}rem; background-image: radial-gradient(circle, #ccc 1px, transparent 1px);`}return""}calcHeight(t){if("number"==typeof t.height)return t.height+"rem";if("object"==typeof t.height&&"percent"in t.height&&t.height.percent)return t.height.percent+"%";if("label"===t.type){let e=1;if(t.font&&t.font.size>e&&(e=t.font.size),Array.isArray(t.text))for(let r=0;r<t.text.length;r++)"object"==typeof t.text[0]&&t.text[0].font&&t.text[0].font.size>e&&(e=t.text[0].font.size);return e+"rem"}return"container"!==t.type&&"repeater"!==t.type?"1rem":"min-content"}calcHeightWithMargin(t){const e=this.calcHeight(t);return!t.margin||r.isComputed(t.margin)?e:"number"==typeof t.margin?`calc(${e} + ${2*t.margin}rem)`:2===t.margin.length?`calc(${e} + ${2*t.margin[0]}rem)`:4===t.margin.length?`calc(${e} + ${t.margin[0]+t.margin[2]}rem)`:e}calcWidth(t){return!t.width||r.isComputed(t.width)?"100%":"object"==typeof t.width&&t.width.percent?t.width.percent+"%":"number"==typeof t.width?t.width+"rem":t.width.percent+"%"}calcWidthWithMargin(t,e){if(/^report\.widgets\.\d+$/.test(e))return"100%";const n=this.calcWidth(t);return!t.margin||r.isComputed(t.margin)?n:"number"==typeof t.margin?`calc(${n} + ${2*t.margin}rem)`:2===t.margin.length?`calc(${n} + ${2*t.margin[1]}rem)`:4===t.margin.length?`calc(${n} + ${t.margin[1]+t.margin[3]}rem)`:void 0}calcMargin(t){const e=t.margin;return!e||r.isComputed(e)?"":"number"==typeof e?`padding: ${e}rem;`:2===e.length?`padding: ${e[0]}rem ${e[1]}rem;`:4===e.length?`padding: ${e[0]}rem ${e[1]}rem ${e[2]}rem ${e[3]}rem;`:""}calcBorder(t){const e=t.border;return e?"number"==typeof e?`border-bottom: ${.0625*e}rem solid;`:Array.isArray(e)?1===e.length?`border: ${.0625*e[0]}rem solid;`:2===e.length?`border-style: solid; border-width: ${.0625*e[0]}rem ${.0625*e[1]}rem`:4===e.length?`border-style: solid; border-width: ${.0625*e[0]}rem ${.0625*e[1]}rem ${.0625*e[2]}rem ${.0625*e[3]}rem`:"":"string"==typeof e?"border: 1px dotted green;":`border-style: solid; border-width: ${.0625*(e.top||0)}rem ${.0625*(e.right||0)}rem ${.0625*(e.bottom||0)}rem ${.0625*(e.left||0)}rem;`:""}calcFont(t){const e=t.font;let r="";return e.pre&&(r+="white-space: pre-wrap;"),e.size&&(r+=`font-size: ${e.size}rem;`),e.line&&(r+=`line-height: ${e.line}rem;`),e.align&&(r+=`text-align: ${e.align};`),e.color&&(r+=`color: ${e.color} !important;`),e.family&&(r+=`font-family: ${e.family};`),e.weight&&(r+=`font-weight: ${e.weight};`),e.right&&(r+=`padding-right: ${e.right}rem;`),r}split(t,e,...r){const n=s.default.splitKeypath(t);return e&&n.splice(-e,e),r&&n.push(...r),n}lastKey(t,e=1){const r=s.default.splitKeypath(t);for(let t=1;t<e;t++)r.pop();return r.pop()}selectWidget(t){this.link(t,"widget"),this.set("temp.name",("report"===t?"Report":this.get(t+".type")||"")+" "),this.set("temp.widget",t);const e=this.get("widget");"html"===e.type?this.editExpr(t+".html",{html:!0}):"label"===e.type||"measured"===e.type?this.editExpr(t+".text",{label:!0}):"image"===e.type&&this.editExpr(t+".url"),this.treeScrollToActive()}treeScrollToActive(){setTimeout((()=>{const t=document.querySelector(".tree .node.active > .line");t&&"function"==typeof t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"center"})}),100)}async eval(){const t=this.get("temp.expr.str");let e=this.get("temp.expr.path");e&&e.startsWith("widget.")&&(e=e.replace("widget",this.get("temp.widget")));const n=await this.buildLocalContext(e),s=Array.isArray(t)?t.map((t=>"string"==typeof t?r.evaluate(n,t):t&&"object"==typeof t&&"string"==typeof t.text?r.evaluate(n,t.text):"")).join(""):r.evaluate(n,this.get("temp.expr.html")||this.get("temp.expr.template")?r.parseTemplate(t):t);this.set("temp.expr.result",s),this.set("temp.expr.tab","result")}evalExpr(t,e,n){return n?r.evaluate(n,e?r.parseTemplate(t):r.parse(t)):r.evaluate(e?r.parseTemplate(t):r.parse(t))}autosizeHtml(t){const e=t.get("ctx.preview");t.set("ctx.preview",!0),t.set("ctx.autosize",!0),t.set(".height",Math.ceil(t.node.nextElementSibling.offsetHeight/16)),t.set("ctx.autosize",!1),t.set("ctx.preview",e)}async logData(t){"type"in t&&"fetch"===t.type?console.log(await this.fetchData(t)):("data"in t||"values"in t)&&console.log(t.data?t.data:await t.values())}editExpr(t,e){this.event&&(t=this.getContext(this.event.node).resolve(t)),t.startsWith("widget.")&&(t=t.replace("widget",this.get("temp.widget")));let n=this.get(t);Array.isArray(n)?n.forEach(((t,e)=>{"object"!=typeof t||"text"in t||(n[e]=r.stringify(t))})):"string"!=typeof n&&(n=r.stringify(n)),this.set("temp.expr.path",t);const s=e&&e.html,o=this.get("temp.expr.tab");this.set("temp.expr.html",s),this.set("temp.expr.label",e&&e.label),this.set("temp.expr.template",e&&e.template),this.set("temp.expr.tab",s?"html":"ast"===o||"text"===o?o:"text"),this.set("temp.bottom.tab","expr"),this.link(t,"expr"),this.set("temp.expr.str",n),this.set("temp.bottom.pop",!0);const i=document.getElementById("expr-"+(s?"html":"text"));i&&i.focus()}editParam(t){const e=t.resolve();this.set("temp.bottom.pop",!0),this.set("temp.bottom.param",e),this.set("temp.bottom.tab","param"),this.link(e,"param")}editReportSrc(t,e){const r=t.resolve(e||void 0);this.set("temp.bottom.pop",!0),this.set("temp.bottom.source",r),this.set("temp.bottom.tab","source"),this.link(r,"source")}moveUp(t,e,r){const n=void 0!==r?r:t.get("@index");if(n<=0)return;const[s]=t.splice(e||"../",n-1,1).result;t.splice(e||"../",n,0,s)}moveDown(t,e,r){const n=void 0!==r?r:t.get("@index");if(n>=t.get("@last"))return;const[s]=t.splice(e||"../",n+1,1).result;t.splice(e||"../",n,0,s)}addHeader(){this.set("report.headers",(this.get("report.fields")||[]).map((()=>"")))}command(t,e,r){return document.execCommand(t,e||!1,void 0===r?null:r)}retypeASTNode(t,e){"operator"===e?this.set(t,{op:"+"}):"reference"===e?this.set(t,{r:""}):"string"===e?this.set(t,{v:""}):"number"===e?this.set(t,{v:0}):"undefined"===e&&this.set(t,{v:void 0})}autosize(t){m&&clearTimeout(m),m=setTimeout((()=>{m=0;const e=t.parentElement.scrollTop,r=t.parentElement.scrollHeight,n=t.parentElement.clientHeight,s=parseInt(t.style.height);t.style.height="",t.style.overflow="",setTimeout((()=>{const o=t.scrollHeight+1;t.style.height=o+"px",t.style.overflow="hidden",t.parentElement.scrollTop=s&&e+n+(o-s)>=r?e+(o-s):e}))}),500)}exprToggle(t){this.toggle("exprExpand."+s.default.escapeKey(t))}async buildRoot(){const t=new r.Root({},{parameters:this.get("params")}),e=this.get("report"),n=await this.buildSources();for(const s of e.sources||[]){const e=n[s.source];e&&r.applySource(t,s,{[s.source]:e}),(s.name||s.source)in t.value||(t.value[s.name||s.source]=(t.sources[s.name||s.source]||{}).value)}return t}async buildSources(){const t=this.get("report"),e=this.get("sources"),r={};for(const n of t.sources||[]){const t=e.find((t=>t.name===n.source));if(t){let e;const n=t;"fetch"!==n.type||!n.fetch&&n.data?"data"in t&&t.data?e=n.eval||"string"!=typeof t.data?t.data:{value:x(t.data)}:"values"in t&&"function"==typeof t.values&&(e=await t.values(this.get("params")||[])):(e=await this.fetchData(n),n.eval||(e={value:x(e)}),n.fetch||(n.data=e)),r[t.name]=e}}return r}async buildLocalContext(t){const e=await this.buildRoot();e.special.date=new Date;let n=this.get("report"),o=e;if(t){const i=s.default.splitKeypath(t);if("report"===i[0]&&i.shift(),"fields"===i[0])o=r.extend(o,{value:r.evaluate(o,`*${this.get("report.sources.0.source")}.0`)});else if("sources"===i[0])o="base"===i[i.length-1]?r.extend(o,{value:r.evaluate(o,`*${this.get(`report.sources.${i[1]}.source`)}.value`)}):r.extend(o,{value:r.evaluate(o,`*${this.get(`report.sources.${i[1]}.source`)}.0`)});else for(;n&&i.length;){if(n=n[i.shift()],n)if(n.context)o=r.extend(o,{value:r.evaluate(o,n.context)});else if(n.source&&n.source.source){const t=r.filter(e.sources[n.source.source]||{value:[]},n.source.filter,n.source.sort,n.source.group,o);o=r.extend(o,{value:t.value,special:{source:t}})}else n.source&&(o=r.extend(o,{value:r.evaluate(o,n.source)}));n&&"repeater"===n.type&&"row"===i[0]&&(o=r.extend(o,{value:r.evaluate(o,"@value.0")}))}}return o}async fetchData(t){const e=!t;t=t||this.get("data");const n=new r.Root({},{parameters:this.get("params")}),s=this.evalExpr(t.url,!0,n),o={};if(Array.isArray(t.headers))for(let e=0;e<t.headers.length;e++)o[t.headers[e][0]]=this.evalExpr(t.headers[e][1],!0,n);try{const r={headers:o,method:t.method};"POST"!==r.method&&"PUT"!==r.method||(r.body=this.evalExpr(t.body,!0,n));const i=await fetch(s,r);if(!e)return i.text();this.set("data.data",await i.text())}catch(t){}}getSchema(t){const e=r.inspect(t.value);let n=t.value,s=e;s.fields=s.fields||[];let o=t,i="";for(const e in t.root.sources)s.fields.push({name:"*"+e,type:"any"});let a=r.inspect(t.root.special);if(a.fields.forEach((t=>(t.name="@"+t.name,s.fields.push(t)))),(this.get("report.parameters")||[]).forEach((t=>s.fields.push({name:"!"+t.name,type:t.type}))),o!==o.root)for(;o&&(o=o.parent,o===o.root?i="#":i+="^",n===o.value||(a=r.inspect(o.value,!0),(a.fields||[]).forEach((t=>(t.name=`${i}${t.name}`,s.fields.push(t)))),n=o.value,o!==o.root)););return e}insertRef(t){const e=this.get("temp.expr.tab")||"text",r=s.default.splitKeypath(t);let n=[];for(;r.length&&"ctx"!==r[r.length-1];)n.unshift(this.get(s.default.joinKeys.apply(s.default,r.concat("name")))),r.pop(),r.pop();"*"===n[0][0]&&"value"===n[1]&&n.length>2&&(n[1]="0");let o=s.default.joinKeys.apply(s.default,n);if((this.get("temp.expr.html")||this.get("temp.expr.template"))&&(o=`{{${o}}}`),"text"===e){const t=d();if(!t)return;const e=t.value,r=[t.selectionStart,t.selectionEnd];t.value=e.substring(0,r[0])+o+e.substr(r[1]),t.selectionStart=t.selectionEnd=r[0]+o.length,t.dispatchEvent(new InputEvent("input")),t.dispatchEvent(new InputEvent("change")),t.focus()}else{if("html"===e)return this.command("insertText",!1,o);if("ast"===e){const t=this.get("temp.expr.partpath")||"temp.expr.ast";this.set(t,{r:o})}}}insertOp(t){if("text"!==(this.get("temp.expr.tab")||"text"))return this.command("insertText",!1,`{{${t}}}`);{const e=d();if(!e)return;const r=e.value,n=[e.selectionStart,e.selectionEnd];let s,o=r.substring(n[0],n[1]);g.includes(t)?(o=` ${t} `,s=n[0]+o.length):(o=`${t}(${o})`,s=n[0]+o.length-1),e.value=r.substring(0,n[0])+o+r.substr(n[1]),e.selectionStart=e.selectionEnd=s,e.dispatchEvent(new InputEvent("input")),e.dispatchEvent(new InputEvent("change")),e.focus()}}resetScrollers(){this._scrollers.forEach((t=>t()))}loadReportString(t){try{const e=JSON.parse(t);this.set("report",e),this.set("params",e.defaultParams||{})}catch(e){try{const e=r.evaluate({PageSizes:r.PageSizes},t);this.set("report",e),this.set("params",e.defaultParams||{})}catch(t){console.error("Failed to load report",t)}}}async download(t,e,n="application/json"){t=r.evaluate(r.extend(await this.buildRoot(),{parser:r.parseTemplate}),t);const s=new Blob([e],{type:n}),o=URL.createObjectURL(s),i=document.createElement("a");i.download=t,i.href=o,i.style.display="none",document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(o)}reportToString(t,e,r){const n=this.get("report");return t?e?j(b(n),r):JSON.stringify(b(n)):JSON.stringify(n,null,2)}loadReportFile(){const t=this.find("#definition-file");let e;e=()=>{if(t.removeEventListener("change",e),t.files.length){const e=t.files[0],r=new FileReader;r.onload=t=>this.loadReportString(t.target.result),r.readAsText(e)}},t.addEventListener("change",e),t.click()}loadImportFile(){const t=this.find("#import-file");let e;e=()=>{if(t.removeEventListener("change",e),t.files.length){const e=t.files[0],r=new FileReader;r.onload=t=>this.tryImport(t.target.result),r.readAsText(e)}},t.addEventListener("change",e),t.click()}tryImport(t){if(!t||!this.readLink("data"))return;const e=x(t);e?"object"==typeof e&&"type"in e&&"fetch"===e.type?this.set("data",e):Array.isArray(e)||!Array.isArray(e.value)?this.set("data.data",{value:e}):this.set("data.data",e):this.set("data.data",t)}setHTMLFontSize(){const t=this.get("temp.fontSize");t&&this.command("fontSize",!1,t),setTimeout((()=>this.set("temp.fontSize","")))}inRepeater(t){return/\.row\./.test(t)}getPartStrings(t){return t.map((t=>t.text||t)).join(" + ")}nodeForPosition(t,e){const n=this.get("temp.expr.str"),s=(this.get("temp.expr.html")||this.get("temp.expr.template")?r.parseTemplate:r.parse)(n,{tree:!0});return"message"in s?s:function(t,e,r){const n=[];let s,o=t;for(;o;){o.start<=e&&o.end>=e&&(!r||o.name)&&n.unshift(o),s=null;for(let t=0;t<o.children.length&&(s=o.children[t],s.start>e||s.end<e);t++)s=null;o=s}return n}(s,t,e)}fmt(){const t=this.get("temp.expr.str");this.set("temp.expr.str",y(t,this.get("temp.expr.html")))}fmtAll(){const t=this.get("report");this.set("report",k(t))}removeWidget(t){if(this.get("temp.widget")===t.resolve()&&this.set("temp.widget",void 0),this.checkLink("expr",t.resolve()),t.get("^^/groupEnds")&&t.splice("^^/groupEnds",t.get("^^/groupEnds")-1-t.get("@index"),1),"repeater"===t.get("../type"))t.set("^^/"+t.get("@key"),void 0);else{Array.isArray(t.get("^^/layout"))&&t.splice("^^/layout",t.get("@index"),1);const e=t.resolve(),r=t.get("@index");t.splice("../",r,1),e.startsWith("report.fields")&&t.get("../headers")?t.splice("../headers",r,1):e.startsWith("report.headers")&&t.splice("../fields",r,1)}}checkLink(t,e){let r;"import"===t?r=this.readLink("data"):"param"===t?r=this.readLink("param"):"source"===t&&(r=this.readLink("source")),void 0===e&&("expr"===t&&(e=this.get("temp.expr.path")),r&&(e=r.keypath)),"import"===t&&r&&e===r.keypath?(this.unlink("data"),this.set("tab","definition")):"expr"!==t&&"field"!==t||!(this.get("temp.expr.path")||"").startsWith(e)?"param"===t&&r&&e===r.keypath?(this.unlink("param"),this.set("temp.bottom.param",void 0),this.set("temp.bottom.tab","expr")):"source"===t&&r&&e===r.keypath&&(this.unlink("source"),this.set("temp.bottom.source",void 0),this.set("temp.bottom.tab","expr")):(this.unlink("expr"),this.set("temp.expr",{path:void 0,str:"",html:!1,tab:"text",label:!1,template:!1},{deep:!0})),"field"!==t&&e&&(e.startsWith("report.fields")&&this.checkLink("field",e.replace("fields","headers")),e.startsWith("report.headers")&&this.checkLink("field",e.replace("headers","fields")))}checkLinks(){this.checkLink("expr"),this.checkLink("import"),this.checkLink("source"),this.checkLink("param"),this.checkLink("field")}saveProjects(){const t=this.get("projects")||[];for(const e of t)"type"in e&&"fetch"===e.type&&delete e.data;window.localStorage.setItem("projects",JSON.stringify(this.get("projects")||[]))}loadProjects(){this.set("projects",JSON.parse(window.localStorage.getItem("projects")||"[]"))}makeProject(t){const e=t?{name:"Project",report:{},sources:[]}:{name:"Project",report:this.get("report")||{},sources:this.get("sources")||[]};this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.checkLinks(),this.push("projects",e),this.link("projects."+(this.get("projects").length-1),"project"),this.link("project.report","report"),this.link("project.sources","sources"),this.set("projectText","")}stringifyProject(t){t||(t=this.get("project"));const e=(this.get("project.sources")||this.get("sources")||[]).map((t=>"type"in t&&"fetch"===t.type?Object.assign({},t,{data:void 0}):Object.assign({},t)));return JSON.stringify(Object.assign({},t,{sources:e,report:this.get("project.report")||this.get("report")||{}}))}removeProject(){if(window.confirm("Do you want to delete this project? This cannot be undone.")){const t=this.get("project"),e=this.get("projects")||[];e.splice(e.indexOf(t),1),this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.set("project",void 0),this.checkLinks(),this.saveProjects()}}importProject(t){const e=t=>{const e=JSON.parse(t);if(Array.isArray(e)&&e.length>0&&"name"in e[0])this.set("projects",e),this.checkLinks();else if("object"==typeof e&&"name"in e){const t=this.get("project"),r=this.get("projects");this.set("project",e),this.link("project.report","report"),this.link("project.sources","sources"),~r.indexOf(t)&&r.splice(r.indexOf(t),1,e),this.checkLinks()}};if(this.set("projectText",""),"string"==typeof t)t&&e(t);else{const t=this.find("#project-file");let r;r=()=>{if(t.removeEventListener("change",r),t.files.length){const r=t.files[0],n=new FileReader;n.onload=t=>e(t.target.result),n.readAsText(r)}},t.addEventListener("change",r),t.click()}}cloneProject(){this.set("projectText","");const t=this.get("project");this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.push("projects",JSON.parse(JSON.stringify(t))),this.link("projects."+(this.get("projects").length-1),"project"),this.link("project.report","report"),this.link("project.sources","sources")}linkProject(t){this.set("projectText",""),this.unlink("report"),this.unlink("sources"),this.unlink("project"),this.checkLinks(),this.link(t,"project"),this.link("project.report","report"),this.link("project.sources","sources")}}function x(t){try{return JSON.parse(t)}catch(t){return{}}}s.default.extendWith(h,{template:o,css:" h3 { padding: 0.5rem; margin: 0; } button.plain { text-decoration: none; text-align: center; letter-spacing: 0.5px; cursor: pointer; user-select: none; border: none; border-radius: 0.2em; padding: 0 1.25rem; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2); transition: 0.2s ease-in-out; transition-property: box-shadow, opacity, background-color; font-size: 0.7em; line-height: 1.5em; background-color: #07e; color: #fff; vertical-align: middle; min-height: 2.25em; outline: 0; margin: 0.25em; position: relative; overflow: hidden; -webkit-tap-highlight-color: transparent; font-family: inherit; } button.ico { border: none; background-color: transparent; padding: 0.25rem; cursor: pointer; outline: none; } button.hide { border: none; width: 0; height: 0; padding: 0; outline: none; } button.ico:hover { color: #4596ff; } button.ico.large { font-size: 1.5rem; padding: 0 0.5rem; } .properties button.ico.large { line-height: 1.5rem; } button.ico:disabled { color: #ccc; cursor: default; } span.which { flex-grow: 1; line-height: 2em; display: flex; align-items: center; } .raport-report { display: flex; flex-grow: 1; flex-shrink: 1; font-family: sans-serif; height: 100%; width: 100%; color: #222; } button.add { width: 2rem; height: 2rem; line-height: 1em; text-align: center; border-radius: 2rem; background-color: #4596ff; color: #fff; margin: 0.5rem; border: none; cursor: pointer; font-size: 1.5em; } select { padding: 0.2rem; border-style: solid; border-width: 0 0 1px 0; background: none; } .layout { display: flex; flex-direction: column; flex-grow: 2; flex-shrink: 1; margin: 0 0.5em; box-sizing: border-box; overflow: hidden; } .layout > .tab { background-color: #999; } .editor > .tab, .layout > .tab { flex-grow: 10; flex-shrink: 1; overflow: hidden; max-height: 0; } .editor > .active-tab, .layout > .active-tab { max-height: none; } .designer { display: flex; flex-direction: column; } .spacer { margin-right: 3em; } .layout .actions { display: flex; align-items: center; z-index: 2; } .layout .actions .tab { box-sizing: border-box; padding: 0.5em; margin: 0 0.5em; background-color: #eee; color: #777; border-style: solid; border-width: 1px 1px 0 1px; font-weight: bold; cursor: pointer; outline: none; border-color: #ddd; } .layout .actions .tab:first-of-type { margin-left: 0; } .layout .actions .tab.right { margin-left: auto; } .layout .actions .tab.active { background-color: #999; color: #fff; border: none; } .layout .bottom-pane .actions .tab { line-height: 1.3rem; } .layout .bottom-pane .actions .tab.active { background-color: #fff; border-color: #ddd; color: #222; margin-bottom: -2px; border-style: solid; border-width: 1px; border-bottom-color: #fff; } .layout .bottom-pane .actions .tab.error, .layout .bottom-pane .error { border-color: red; color: red; } .layout .bottom-pane .actions .tab.active.error { background-color: #fafafa; border-bottom-color: #fafafa; } .layout .bottom-pane { height: 2.25rem; overflow: hidden; flex-shrink: 0; display: flex; flex-direction: column; flex-grow: 0; padding-top: 0.5rem; box-sizing: border-box; } .layout .bottom-pane.active { height: 33vh; border-top: 1px solid #ddd; } .result { display: flex; flex-grow: 2; background-color: #fff; } iframe { display: block; border: none; } .bar { height: 2rem; background-color: #555; color: #fff; display: flex; align-items: center; font-size: 0.75rem; border-bottom: 1px solid; box-sizing: border-box; padding: 0 0.25rem; user-select: none; } .bar * { margin: 0 0.5em 0 0; } .bar button, .bar .btn { background: none; color: #fff; border: none; cursor: pointer; font-size: inherit; padding: 0 0.5em; } .bar select { background: none; border: none; color: #fff; height: 1rem; font-size: 0.6rem; padding: 0; } div.widgets { display: flex; flex-wrap: wrap; position: relative; height: min-content; width: calc(100% + 2px); left: -1px; background-image: radial-gradient(circle, #999 1px, transparent 1px); background-position: 1.5rem 1.5rem; background-size: 1rem 1rem; } div.widgets.manual { display: inline-block; } div.widget { cursor: pointer; display: block; border: 1px dotted rgba(0, 0, 0, 0.2); box-sizing: border-box; font-size: 0.83rem; position: relative; } div.widgets.manual > .widget { float: left; } div.widgets.manual > .active-widget { cursor: move; } div.widgets { background-color: #fff; } div.widget:hover { z-index: 1000; } div.active-widget { border-color: #4596ff; border-style: solid; background-color: #4596ff20; user-select: none; z-index: 999; } div.active-widget > .widgets { background-image: linear-gradient(to top, #4596ff20, #4596ff20), radial-gradient(circle, #999 1px, transparent 1px); } div.hover-widget { border-color: #26bf10; border-style: solid; background-color: #26bf1017; } div.hover-widget > .widgets { background-image: linear-gradient(to top, #26bf1017, #26bf1017), radial-gradient(circle, #999 1px, transparent 1px); } .active-widget > .bar, .bar.active { background-color: #4596ff; } .hover-widget > .bar, .bar.hover { background-color: #26bf10; } .widget > .btn { position: absolute; right: 0; top: 0; opacity: 0; cursor: pointer; background-color: #000; color: #fff; font-weight: bold; border-radius: 0.2rem; width: 0.9rem; height: 0.9rem; text-align: center; line-height: 0.9rem; font-size: 0.7rem; z-index: 10; } .widget > .preview.btn { right: 1.2rem; } .widget > .autosize.btn { right: 2.3rem; } .widget:hover > .btn { opacity: 1; } .label, .html { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .html .preview { font-size: 0.83rem; line-height: 1rem; white-space: normal; word-break: break-all; display: block; } .widget > .content { display: block; height: 100%; } .sheet .toggles { margin-bottom: 0.5rem; } .toggle { font-size: 0.6rem; border: 1px dotted; padding: 0.2rem; border-radius: 0.2rem; display: inline-block; margin: 0.1em; line-height: 0.8rem; color: rgba(0, 0, 0, 0.5); cursor: pointer; } .toggle.active { border: 1px solid; color: #222; } .sides { display: flex; flex-wrap: wrap; width: 12rem; margin: 0.5rem; } .properties .sheet .sides > input { width: 3rem; margin: 0.5rem 0.5rem; box-sizing: border-box; } .sides .square { width: 4rem; height: 4rem; background-color: #4596ff; border: 1px solid; box-sizing: border-box; } .sides span { width: 4rem; height: 0.1rem; display: inline-block; } .shrinky { flex-shrink: 1000; flex-grow: 1; } .growy { flex-grow: 100; flex-shrink: 1; } .scrolled-wrapper { position: relative; overflow: hidden; min-height: 4em; display: flex; flex-direction: column; } .scrolled { height: 100%; overflow-y: auto; } .scrolled:before, .scrolled:after { content: ' '; display: block; position: absolute; z-index: 2; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); height: 5px; width: 100%; opacity: 1; transition: opacity 0.25s ease-in-out; } .scrolled:before { top: -5px; } .scrolled:after { bottom: -5px; } .scrolled.scroll-top:before { opacity: 0; transition: opacity 0s linear; } .scrolled.scroll-bottom:after { opacity: 0; transition: opacity 0s linear; }  .project { display: flex; flex-grow: 1; } .project-pane { flex-grow: 1; padding-right: 1rem; display: flex; flex-direction: column; } .project-pane-right { width: 15rem; display: flex; flex-direction: column; } .project-list { flex-grow: 1; border: 1px solid #ddd; overflow-y: auto; } .project-item { padding: 0.25rem 0.5rem; min-height: 1.5rem; cursor: pointer; } .active-project { background-color: #eee; }  .tab.data-import { display: flex; flex-direction: column; } .import.paper { flex-grow: 1; display: flex; flex-direction: column; max-height: calc(100% - 2em); } .import .definition { display: flex; flex-direction: column; max-height: 100%; } .import .fetch { margin: 1em 0 2em; max-height: 40%; flex-grow: 0; flex-shrink: 1; } label.input, label.check { padding: 0.25rem; display: inline-block; } label.check { padding-top: 1.625rem; } label.input input, label.input select { display: block; height: 2.5rem; width: 100%; padding: 0.5rem; box-sizing: border-box; margin: 0; border: 1px solid #ddd; border-radius: 0; } label.area { display: block; padding: 0.25rem; } label.area.grow { display: flex; flex-direction: column; flex-grow: 1; } label.area textarea { display: block; min-height: 11rem; width: 100%; padding: 0.5rem; box-sizing: border-box; border: 1px solid #ddd; margin: 0; border-radius: 0; } label.area.grow textarea { flex-grow: 1; } label.check input { height: 2rem; vertical-align: middle; }  .paper { background-color: #fff; } .delimited.paper { margin: 0.5rem; padding: 0.5rem; } .delimited .children.fields { display: flex; flex-wrap: wrap; } .field { display: flex; border: 1px solid rgba(0, 0, 0, 0.2); margin: 0.25rem; padding: 0.25rem; } .field span { display: inline-block; width: 15em; min-height: 1em; max-height: 6em; word-break: break-all; white-space: pre-wrap; overflow: hidden; } .field.active-expr { background-color: #4596ff20; border-color: #4596ff; } .field.hover-expr { background-color: #26bf1017; border-color: #26bf10; }   .report-definition .paper { flex-grow: 1; display: flex; flex-direction: column; } .tab.report-definition { display: flex; flex-direction: column; } .definition { display: flex; flex-direction: column; flex-grow: 1; } .definition .json { display: flex; flex-direction: column; flex-grow: 1; height: 10em; } .definition .json > * { flex-grow: 1; } .definition .json textarea { flex-shrink: 0; flex-grow: 1; width: 100%; box-sizing: border-box; min-height: 99%; }  .unit { font-size: 0.6rem; margin-left: 1em; }  .bottom-pane pre { margin: 0; } .bottom-pane .top { display: flex; flex-shrink: 0; flex-grow: 0; box-sizing: border-box; height: 2.5em; font-size: 0.75rem; align-items: end; } .bottom-pane .bottom { display: flex; flex-grow: 1; flex-shrink: 1; overflow: hidden; border: 1px solid #ddd; } .bottom-pane .bottom > .tab { display: flex; padding: 0.5rem; flex-grow: 0; border: none; display: none; } .bottom-pane .bottom > .active-tab { flex-grow: 1; display: flex; } .bottom-pane .context, .bottom-pane .ops { margin: 0.2em; width: 25%; max-width: 20em; flex-shrink: 0; display: flex; flex-direction: column; } .bottom-pane .context .panel, .bottom-pane .ops .panel { border: 1px solid #ddd; flex-grow: 1; } .bottom-pane .context .header, .bottom-pane .ops .header { height: 2.55em; font-weight: bold; text-align: center; line-height: 2.2em; font-size: 0.85rem; } .bottom-pane .editor { flex-grow: 2; display: flex; flex-direction: column; padding: 0.25rem; box-sizing: border-box; } .bottom-pane textarea { width: 100%; box-sizing: border-box; padding: 0.5em; min-height: 99%; border: none; outline: none; } .bottom-pane .active-tab { border: 1px solid #ddd; } .bottom-pane .editor .tab { display: flex; flex-direction: column; } .bottom-pane .ast.tab { word-wrap: anywhere; word-break: break-all; } .bottom-pane .ast.tab.error { border-color: red; } .bottom-pane .tab.html .scrolled { display: flex; flex-direction: column; } .bottom-pane .tab.result .scrolled { padding: 0.5rem; } .bottom-pane .tab.html, .bottom-pane .tab.result { display: flex; flex-direction: column; } .bottom-pane .tab .editor-buttons { display: flex; flex-shrink: 0; padding: 0.2rem; border-bottom: 1px solid #ddd; } .bottom-pane .tab.html button { border: none; background-color: transparent; padding: 0.25rem; cursor: pointer; outline: none; } .bottom-pane .tab.html button:hover { color: #4596ff; } .bottom-pane .tab.html button.skip { margin-left: 1rem; } .bottom-pane .html-editor { padding: 0.5rem; flex-grow: 1; flex-shrink: 1; white-space: pre-wrap; word-wrap: anywhere; word-break: break-all; } .bottom-pane pre { white-space: pre-wrap; word-break: break-all; } .bottom-pane .properties { flex-direction: column; flex-wrap: wrap; align-content: flex-start; } .bottom-pane .properties > label { width: 20em; margin: 0.5rem; } .bottom-pane .options label { display: inline-block; } .bottom-pane .options label > span:first-of-type { font-size: 0.8rem; } .bottom-pane .properties > label > span:first-of-type { font-size: 0.8rem; display: block; } .bottom-pane .properties input, .bottom-pane .properties select { border: none; background-color: transparent; border: 1px solid #ddd; } .bottom-pane .options { box-sizing: border-box; padding: 0.5rem; border: 1px solid #ddd; overflow: hidden; display: flex; flex-direction: column; } .bottom-pane .group-edit { display: flex; align-items: center; } .ast-node { margin-left: 0.5em; display: flex; cursor: pointer; min-height: 2em; border: 1px solid transparent; } .ast-node input, .ast-node select { border: 1px solid rgba(0, 0, 0, 0.15); background-color: transparent; padding: 0.2em; } .ast-content { display: flex; flex-direction: column; flex-grow: 1; } .ast-active-node { background-color: #4596ff20; border: 1px solid #4596ff; cursor: default; } .ast-string:before, .ast-string:after { content: '\"'; } .ast-number { font-family: mono; } .ast-op-name, .ast-content-value, .ast-content-ref { display: flex; justify-content: space-between; } .entry-details { display: flex; justify-content: space-between; } .entry-type { opacity: 0.5; padding: 0 0.5em; } .entry-details button { text-align: left; padding: 0; background: none; border: none; margin: 0; font-size: 1rem; } .entry-details button.expand { margin-left: -1em; background-color: #fff; border: 1px solid #ddd; width: 1em; height: 1em; text-align: center; line-height: 0.6em; } .context-entry { padding-left: 0.5em; border-left: 1px dotted rgba(0, 0, 0, 0.2); margin-left: 1em; } .context-entry .context-entry { margin-left: 0.5em; } .context-entry > .context-entry { display: none; } .context-entry.expanded > .context-entry { display: block; } .expr-operator, .context-entry { cursor: pointer; } .expr-operator { padding: 0 0.5em; } .label-part { padding: 0.25em; margin: 0.25em; border: 1px solid; border-radius: 0.2em; } .label-part code { background-color: #f5f5f5; } .label-part input, .label-part label, .label-part select { font-size: 0.8rem; padding: 0.25em; border-radius: 0.2rem; margin: 0.25em; vertical-align: middle; border: 1px solid #eee; } .label-part input[type=number] { width: 8rem; } .label-part label { white-space: nowrap; }  .param { width: 18rem; margin: 0.5rem; } .param label { width: 100%; } .param label input, .param label select { display: block; width: 100%; box-sizing: border-box; padding: 0.5rem; } .param label.check input { width: auto; display: inline-block; vertical-align: middle; padding: 0; }  .properties { width: 20em; flex-grow: 0; flex-shrink: 0; overflow-y: auto; border: 1px solid #ddd; background-color: #fafafa; display: flex; flex-direction: column; } .placeholder { flex-grow: 1; align-items: center; display: flex; justify-content: center; font-size: 1.7rem; color: #aaa; } .properties .header { display: flex; flex: 1 1 auto; flex-grow: 0; flex-shrink: 0; align-items: center; margin-top: 1em; } .properties .header:first-of-type { margin-top: 0; } .properties .header h3 { flex-grow: 5; } .properties .tree { overflow-y: auto; } .properties .tree .children { margin-left: 0.5em; padding-left: 0.5em; border-left: 1px dotted #ddd; } .properties .tree .node { color: #222; cursor: pointer; } .properties .tree .node.active > .line { background-color: #4596ff; color: #fff; } .properties .tree .node.active { background-color: #4596ff20; } .properties .tree .node .line:hover ~ .children > .node, .properties .tree .node.hover > .children > .node { background-color: #26bf1017; } .properties .tree .node .line { display: flex; align-items: center; padding: 0.1rem 0.25rem; margin: 0.1rem; } .properties .tree .node .line:hover, .properties .tree .node.hover > .line { background-color: #26bf10; color: #fff; } .properties .tree .node .line span { flex-grow: 1; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; } .properties .tree .node.active > .line button, .properties .tree .node .line:hover button, .properties .tree .node.hover > .line button { color: #fff; } .properties .tree .node.active > .line button:disabled, .properties .tree .node .line:hover button:disabled, .properties .tree .node.hover > .line button:disabled { color: #ccc; cursor: default; } .properties .sheet { display: table; border-collapse: collapse; width: 100%; box-sizing: border-box; } .properties .sheet > label { display: table-row; } .properties .sheet > label > * { display: table-cell; line-height: 1rem; padding: 0.4rem; vertical-align: middle; border-style: solid; border-width: 1px 0; border-color: #ddd; } .properties .sheet > label > *:first-of-type { border-width: 1px 1px 1px 0; } .properties .sheet input, .properties .sheet select { border: none; padding: 0; margin: 0; width: 100%; background-color: transparent; outline: none; } .properties .sheet textarea { background: transparent; border: none; width: 100%; height: 100%; margin: -0.2rem; padding: 0; box-sizing: border-box; outline: none; } .properties .sheet label:focus-within { background-color: #efefef; } .parameter, .src { display: flex; border-bottom: 1px solid #ccc; } .parameter:focus-within, .src:focus-within { background-color: #efefef; } .parameter.head, .src.head { border-top: 1px solid #ccc; font-weight: bold; } .parameter > *, .src > * { border-left: 1px solid #ccc; padding: 0.2rem; flex-grow: 0; flex-shrink: 0; box-sizing: border-box; } .parameter > *:first-of-type, .src > *:first-of-type { border-left: none; } .parameter input:not([type=checkbox]), .parameter select, .src input:not([type=checkbox]), .src select { width: 100%; height: 100%; border: none; background: transparent; } .param-name { width: 40%; } .param-type { width: 30%; } .param-require { width: 19%; text-align: center; } .param-btn { width: 10%; } .src-name { width: 65%; } .rsrc-name { width: 43%; } .rsrc-src { width: 43%; } .src-btn { width: 35%; display: flex; justify-content: space-around; } .rsrc-btn { width: 14%; }",cssId:"raport-report",data:()=>({pageSizes:r.PageSizes,report:{type:"page",parameters:[],sources:[],context:{},classifyStyles:!0,widgets:[],size:r.PageSizes.letter,orientation:"landscape"},temp:{expr:{tab:"text"}},exprExpand:{}}),components:{Editor:f,Viewer:c},computed:{operators(){const t=r.getOperatorMap();return Object.keys(t).filter((t=>!~t.indexOf("parse"))).sort().reduce(((e,r)=>(e[r]=t[r],e)),{})}},observe:{"report.type"(t){"delimited"===t?this.get("report.fields")||this.set("report.fields",[]):this.get("report.widgets")||this.set("report.widgets",[])},"temp.quote temp.record temp.field"(t,e,n){try{this.set(n.replace("temp","report"),r.parse(`'${t.replace(/'/g,"\\'")}'`).v)}catch(t){}},"temp.expr.str"(t){if(!t)return this.set("temp.expr.error",void 0),void this.set("temp.expr.ast",void 0);const e=this.get("temp.expr.path"),n=this.get("temp.expr.html")||this.get("temp.expr.template");if(e&&this.set(e,t),!this.evalLock){this.evalLock=!0;try{const e=Array.isArray(t)?t:[t];for(let t=0;t<e.length;t++){const s="string"==typeof e[t]?e[t]:"text"in e[t]&&"string"==typeof e[t].text?e[t].text:e[t],o=(n?r.parseTemplate:r.parse)(s,{detailed:!0,contextLines:3,consumeAll:!0}),i=("marked"in o?`${"latest"in o?`${o.latest.message||"(no message)"} on line ${o.latest.line} at column ${o.latest.column}\n\n${o.latest.marked}\n\n`:""}${o.message||"(no message)"} on line ${o.line} at column ${o.column}\n\n${o.marked}\n\n`:"")+JSON.stringify(o,null,"  ");if(this.set("temp.expr.parsed",i),"message"in o?(this.set("temp.expr.error",o),this.set("temp.expr.ast",void 0)):(this.set("temp.expr.ast",o),this.set("temp.expr.error",void 0)),n?this.set("temp.expr.htmlstr",s):this.set("temp.expr.htmlstr",""),"message"in o)break}}catch(t){}this.evalLock=!1}},"temp.expr.ast"(t,e){if(!this.evalLock){this.evalLock=!0,void 0===e&&t&&this.set("temp.expr.error",void 0);try{const e=r.stringify(t,{template:this.get("temp.expr.html")});this.set("temp.expr.str",e),!("v"in t)||"`"!==e[0]&&"'"!==e[0]?this.set("temp.expr.htmlstr",""):this.set("temp.expr.htmlstr",e.substr(1,-1))}catch(t){}this.evalLock=!1}},"temp.expr.htmlstr"(t){this.evalLock||this.set("temp.expr.str",t)},"temp.widget"(){null==this.get(this.get("temp.expr.path"))&&(this.unlink("expr"),this.set("temp.expr.path",void 0),this.set("temp.expr.str",""),this.set("temp.expr.ctx",!1))},async"temp.expr.path report.parameters report.sources"(){u&&clearTimeout(u),u=setTimeout((async()=>{u=0;let t=this.get("temp.expr.path");t?(t.startsWith("widget.")&&(t=t.replace("widget",this.get("temp.widget"))),this.set("temp.expr.ctx",this.getSchema(await this.buildLocalContext(t)))):this.set("temp.expr.ctx",this.getSchema(await this.buildLocalContext()))}),1e3)},"temp.bottom.pop"(){setTimeout((()=>this.resetScrollers()))},"report.defaultParams"(t){this.set("params",Object.assign({},t))}},on:{init(){this.command("styleWithCSS",!1,"true"),this.loadProjects()},expr(t,e){const r=e||t.resolve();this.link(r,"expr"),this.set("temp.expr.path",r)}},decorators:{expr(t,e){const r=this.getContext(t);const n=r.observe("~/temp.expr.hover",(function(n){n===r.resolve(e||".")?t.classList.add("hover-expr"):t.classList.remove("hover-expr")})),s=[r.listen("click",(()=>this.fire("expr",r))),r.listen("mouseover",(()=>r.set("~/temp.expr.hover",e||r.resolve()))),r.listen("mouseout",(()=>r.set("~/temp.expr.hover","")))];return{teardown(){n.cancel(),s.forEach((t=>t.cancel())),t.classList.remove("active-expr")}}},widget(t,e){const r=this.getContext(t);t.classList.add(e),t.classList.add("widget");const n=r.observe("~/temp.widget",(function(e){e===r.resolve()?t.classList.add("active-widget"):t.classList.remove("active-widget")})),s=r.observe("~/temp.hover",(function(e){e===r.resolve()?t.classList.add("hover-widget"):t.classList.remove("hover-widget")})),o=r.listen("click",(t=>{const e=r.resolve();return this.link(e,"widget"),this.set("temp.widget",e),this.set("temp.name",(r.get("label")||r.get("type"))+" "),t.stopPropagation(),t.preventDefault(),!1}));return{teardown(){n.cancel(),s.cancel(),o.cancel(),t.classList.remove(e),t.classList.remove("widget")}}},scrolled(t){const e=this.getContext(t),r=e.ractive;r._scrollers||(r._scrollers=[]),t.classList.add("scrolled");let n=setTimeout((()=>{s()}),100);function s(){n=null,t.scrollHeight>t.offsetHeight?(t.scrollTop>0?t.classList.remove("scroll-top"):t.classList.add("scroll-top"),t.scrollTop+t.offsetHeight<t.scrollHeight?t.classList.remove("scroll-bottom"):t.classList.add("scroll-bottom")):t.classList.add("scroll-top","scroll-bottom")}t.classList.add("scroll-top","scroll-bottom");const o=function(){n||(n=setTimeout(s,250))},i=e.listen("scroll",o);return r._scrollers.push(s),{invalidate:()=>(o(),""),teardown(){t.classList.remove("scrolled","scroll-top","scroll-bottom"),i.cancel(),r._scrollers.splice(r._scrollers.indexOf(s),1)}}},moveable(t){const e=this.getContext(t),r=e.get("@index");let n,s,o,i,a,l,f;const c=e.listen("mousedown",(t=>{o=e.get(`^^/layout.${r}.0`)||0,i=e.get(`^^/layout.${r}.1`)||0,a=l=0,n=t.clientX,s=t.clientY;const c=document.getElementById("sizer");f=c?c.offsetHeight:12,document.body.addEventListener("mousemove",p),document.body.addEventListener("mouseup",d)}));function p(t){a=t.clientX-n,l=t.clientY-s,t.ctrlKey?e.set({[`^^/layout.${r}.0`]:o+a/f,[`^^/layout.${r}.1`]:i+l/f}):e.set({[`^^/layout.${r}.0`]:Math.round(o+a/f),[`^^/layout.${r}.1`]:Math.round(i+l/f)})}function d(){document.body.removeEventListener("mousemove",p),document.body.removeEventListener("mouseup",d)}return{teardown(){c.cancel()}}},invalidated(t){const e=this.getContext(t);return{teardown(){},invalidate(){e.hasListener("invalidate")&&e.raise("invalidate",{})}}},autosize:l,trackfocus:function(t,e){function r(t){const r=t.target;"selectionStart"in r&&(p[e||""]=r)}return t.addEventListener("focus",r,{capture:!0}),{teardown(){t.removeEventListener("focus",r,{capture:!0})}}}}});const _=["family","size","weight","color","align","line","right","pre","clamp"];function b(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(b);const e={};for(const r in t){const n=t[r];if(!1!==n&&(("hide"!==r&&"br"!==r||n)&&("height"!==r||"auto"!==n||"container"!==t.type&&"repeater"!==t.type)))if(Array.isArray(n)){const t=[];n.forEach((e=>t.push(b(e)))),e[r]=t}else if("object"==typeof n)if("font"===r){if(void 0===Object.values(n).find((t=>null!=t&&""!==t&&!1!==t)))continue;{const r={};if(_.forEach((t=>null!=n[t]&&""!==n[t]&&!1!==n[t]&&(r[t]=n[t]))),"html"===t.type&&1===Object.keys(r).length&&0===r.line)continue;e.font=r}}else{if(!Object.keys(n).length)continue;if(1===Object.keys(n).length&&"x"in n&&!n.x)continue;if("format"===r&&!n.name)continue;e[r]=b(n)}else e[r]=n}return"page"!==e.type&&"flow"!==e.type&&"delimited"!==e.type||(e.context&&!Object.keys(e.context).length&&delete e.context,e.defaultParams&&!Object.keys(e.defaultParams).length&&delete e.defaultParams,e.sources&&!e.sources.length&&delete e.sources,e.parameters&&!e.parameters.length&&delete e.parameters,e.orientation&&"landscape"!==e.orientation||delete e.orientation,e.name||delete e.name,e.header&&Object.keys(e.header).length&&Array.isArray(e.header.widgets)&&e.header.widgets.length||delete e.header,e.footer&&Object.keys(e.footer).length&&Array.isArray(e.footer.widgets)&&e.footer.widgets.length||delete e.footer,e.width||delete e.width,e.margin&&e.margin.length||delete e.margin,e.source||delete e.source,e.headers&&e.headers.length||delete e.headers,e.record||delete e.record,e.field||delete e.field,e.quote||delete e.quote),e.source&&(e.filter||delete e.filter,e.sort||delete e.sort,e.base||delete e.base,e.parameters&&0!==Object.keys(e.parameters).length||delete e.parameters),(e.classifyStyles||null==e.classifyStyles)&&delete e.classifyStyles,e}const v={throw:!0,consumeAll:!0};function y(t,e){if("string"!=typeof t&&"object"!=typeof t)return t;const n=e?r.parseTemplate:r.parse,s=Object.assign(v,{template:e});if("string"==typeof t)try{return r.stringify(n(t,s),{template:e,listWrap:40})}catch(e){return t}else{if(Array.isArray(t))return t.map((t=>{if("string"==typeof t)try{return r.stringify(n(t,s),{template:e,listWrap:40})}catch(e){return t}else{if(!("text"in t)||"string"!=typeof t.text)return r.isValueOrExpr(t)?r.stringify(t,{template:e,listWrap:40}):t;try{return Object.assign({},t,{text:r.stringify(n(t.text,s),{template:e,listWrap:40})})}catch(e){return t}}}));if("x"in t&&"string"==typeof t.x)try{return{x:r.stringify(n(t.x,s),{template:e,listWrap:40})}}catch(e){return t}else if(r.isValueOrExpr(t))return r.stringify(t,{template:e,listWrap:40})}return t}function k(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(k);const e={};for(const r in t){const n=t[r];e[r]="text"===r||"width"===r||"height"===r||"hide"===r||"br"===r?y(n):"name"===r||"html"===r?y(n,!0):k(n)}return e}const w=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/;function j(t,e){return"number"==typeof t?""+t:"boolean"==typeof t?t?"true":"false":null==t?"null":"string"==typeof t?"json"===e?JSON.stringify(t):`\`${t.replace(/(`|${|\\)/g,"\\$1")}\``:Array.isArray(t)?`[${t.map((t=>j(t,e))).join(",")}]`:"object"==typeof t?`{${Object.entries(t).map((([t,r])=>void 0===r?r:`${w.test(t)?t:`'${t}'`}:${j(r,e)}`)).filter((t=>!!t)).join(",")}}`:void 0}r.registerOperator({type:"value",names:["parse","unparse"],apply:(t,[e,n])=>"parse"===t?(n&&n.template?r.parseTemplate:r.parse)(e):r.stringify(e,n)}),r.registerOperator({type:"value",names:["log"],apply(t,e){console.log.apply(console,e)}}),t.ReportDesigner=h,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=raport.design.umd.min.js.map
